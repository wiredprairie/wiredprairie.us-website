{"id":379,"date":"2008-06-21T11:54:23","date_gmt":"2008-06-21T16:54:23","guid":{"rendered":"http:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/379"},"modified":"2008-06-21T11:54:23","modified_gmt":"2008-06-21T16:54:23","slug":"oh-silverlight-20-console-example-and-source-code","status":"publish","type":"post","link":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/379","title":{"rendered":"Oh Silverlight 2.0 Console (Example and Source code)"},"content":{"rendered":"<p>Try it <a href=\"http:\/\/www.wiredprairie.us\/examples\/ohconsole\/default.html\" target=\"_blank\">here<\/a>.<\/p>\n<p>See a picture below: :)<\/p>\n<p><a href=\"http:\/\/www.wiredprairie.us\/examples\/ohconsole\/default.html\"><img loading=\"lazy\" style=\"border-right: 0px; border-top: 0px; border-left: 0px; border-bottom: 0px\" height=\"358\" alt=\"image\" src=\"http:\/\/www.wiredprairie.us\/blog\/wp-content\/uploads\/2008\/06\/image20.png\" width=\"470\" border=\"0\"\/><\/a> <\/p>\n<p>I ran into one odd issue when using Silverlight 2.0 Beta 2&#8230;.<\/p>\n<p>&nbsp;<\/p>\n<pre class=\"code\"><span style=\"color: blue\">void <\/span>Page_Loaded(<span style=\"color: blue\">object <\/span>sender, <span style=\"color: #2b91af\">RoutedEventArgs <\/span>e)\n{\n    <span style=\"color: green\">\/\/ if you don't invoke this asynchronously, you can't add at load time\n    \/\/ (seems to be a silverlight 2.0 issue)\n    <\/span>Dispatcher.BeginInvoke(<span style=\"color: blue\">delegate<\/span>()\n    {\n        consoleCanvas.AnimateNewChild(\n                <span style=\"color: blue\">string<\/span>.Format(<span style=\"color: #a31515\">\"Welcome!\\nThe time right now is {0}.\"<\/span>, \n                <span style=\"color: #2b91af\">DateTime<\/span>.Now.ToLocalTime()));\n        consoleCanvas.AnimateNewChild(<span style=\"color: #a31515\">\"\\n\\nThanks for stopping by WiredPrairie.us. \"\n            <\/span>+ <span style=\"color: #a31515\">\"This code may be used for only for good, not evil.\"<\/span>);\n    });\n}\n<\/pre>\n<p><a href=\"http:\/\/11011.net\/software\/vspaste\"><\/a><\/p>\n<p>The code above for example &#8212; if the ConsoleCanvas control (the simple base control for the console output-like functionality) performs any UpdateLayout calls within the context of the Load event, the entire Silverlight control fails to load, silently. The only work-around I could discover was to delay what I wanted to occur by using the asynchronous invoke method on the Dispatcher object.<\/p>\n<p>The easiest way to force a UIElement to measure itself is to use a little trick:<\/p>\n<pre class=\"code\">_holder.Width = <span style=\"color: blue\">this<\/span>.ActualWidth;\nchild.Width = <span style=\"color: blue\">this<\/span>.ActualWidth;\n_holder.Children.Add(child);\n_holder.UpdateLayout();\n\nchild.Width = child.DesiredSize.Width;\nchild.Height = child.DesiredSize.Height;\n<\/pre>\n<p><a href=\"http:\/\/11011.net\/software\/vspaste\"><\/a><\/p>\n<p>The console control maintains a visible (yet opacity is set to 0.0) StackPanel. Each time a new line of output is added via the AnimateNewChild method, it&#8217;s placed in the StackPanel. The StackPanel (_holder) is resized to fit the current width of the entire ConsoleCavnas control. Next, the UpdateLayout method of the StackPanel is called &#8212; which forces an immediate measure of all of the children (and thus forces any children of the TextPanel to potentially re-layout). The width and height are grabbed and permanently stored as the new size for the child. <\/p>\n<p>Instead of using Storyboards and various animations, I found it more convenient to simply use a DispatchTimer and do the animations manually. <\/p>\n<pre class=\"code\"><span style=\"color: #2b91af\">List<\/span>&lt;<span style=\"color: #2b91af\">FrameworkElement<\/span>&gt; remove = <span style=\"color: blue\">new <\/span><span style=\"color: #2b91af\">List<\/span>&lt;<span style=\"color: #2b91af\">FrameworkElement<\/span>&gt;();<\/pre>\n<p><a href=\"http:\/\/11011.net\/software\/vspaste\"><\/a><\/p>\n<pre class=\"code\"><span style=\"color: blue\">for<\/span>(<span style=\"color: blue\">int <\/span>childIndex = 0; childIndex &lt; <span style=\"color: blue\">this<\/span>.Children.Count; childIndex++)\n{\n    <span style=\"color: #2b91af\">FrameworkElement <\/span>child = <span style=\"color: blue\">this<\/span>.Children[childIndex] <span style=\"color: blue\">as <\/span><span style=\"color: #2b91af\">FrameworkElement<\/span>;\n\n    <span style=\"color: blue\">if <\/span>(!child.Equals(_holder))\n    {                        \n        child.Arrange(<span style=\"color: blue\">new <\/span><span style=\"color: #2b91af\">Rect<\/span>(0, <span style=\"color: #2b91af\">Canvas<\/span>.GetTop(child), 0, 0));\n        <span style=\"color: blue\">double <\/span>top = <span style=\"color: #2b91af\">Canvas<\/span>.GetTop(child);\n        top -= 2.0;\n        <span style=\"color: #2b91af\">Canvas<\/span>.SetTop(child, top);                       \n        <span style=\"color: blue\">if <\/span>(top + child.Height &lt; 0.0)\n        {\n            remove.Add(child);\n        }\n    }    \n}\n<span style=\"color: green\">\/\/ remove them all \n<\/span>remove.ForEach(fe =&gt; <span style=\"color: blue\">this<\/span>.Children.Remove(fe <span style=\"color: blue\">as <\/span><span style=\"color: #2b91af\">UIElement<\/span>));                \n<\/pre>\n<p><a href=\"http:\/\/11011.net\/software\/vspaste\"><\/a><\/p>\n<p>If an element is no longer visible on the screen, it is removed using a Lambda expression and the ForEach method on the List object instance named <strong>remove<\/strong> (after the repositioning loop has completed). <\/p>\n<p>Download source, etc. <a href=\"http:\/\/www.wiredprairie.us\/examples\/ohconsole\/OhConsole.zip\" target=\"_blank\">here<\/a>.<\/p>\n","protected":false},"excerpt":{"rendered":"<p>Try it here. See a picture below: :) I ran into one odd issue when using Silverlight 2.0 Beta 2&#8230;. &nbsp; void Page_Loaded(object sender, RoutedEventArgs e) { \/\/ if you don&#8217;t invoke this asynchronously, you can&#8217;t add at load time \/\/ (seems to be a silverlight 2.0 issue) Dispatcher.BeginInvoke(delegate() { consoleCanvas.AnimateNewChild( string.Format(&#8220;Welcome!\\nThe time right now [&hellip;]<\/p>\n","protected":false},"author":2,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"spay_email":"","jetpack_publicize_message":"","jetpack_is_tweetstorm":false,"jetpack_publicize_feature_enabled":true},"categories":[4],"tags":[153],"jetpack_publicize_connections":[],"jetpack_featured_media_url":"","jetpack_sharing_enabled":true,"jetpack_shortlink":"https:\/\/wp.me\/pd5QIe-67","jetpack_likes_enabled":true,"jetpack-related-posts":[{"id":388,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/388","url_meta":{"origin":379,"position":0},"title":"Silverlight Weather Demonstration","date":"June 26, 2008","format":false,"excerpt":"Demonstration available here. (You'll need to wait for a moment while it loads the first time). I've created a reasonably simple, yet multi-technology (and discipline) demonstration using Silverlight for the user interface and ASP.NET as the back-end. The demonstration uses: Silverlight 2.0 Data binding Delayed downloading of images \"Web services\"\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"https:\/\/i0.wp.com\/www.wiredprairie.us\/blog\/wp-content\/uploads\/2008\/06\/image21.png?resize=350%2C200","width":350,"height":200},"classes":[]},{"id":633,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/633","url_meta":{"origin":379,"position":1},"title":"A Silverlight 2 TilePanel","date":"December 14, 2008","format":false,"excerpt":"You may notice that the Silverlight TileBrush is missing some key properties which would enable it to actually tile a brush. The WPF TileBrush has properties such as TileMode, Viewbox, and ViewportUnits that can be used to tile an image as a fill or as a background for a UIElement.\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"https:\/\/i0.wp.com\/www.wiredprairie.us\/blog\/wp-content\/uploads\/2008\/12\/image1.png?resize=350%2C200","width":350,"height":200},"classes":[]},{"id":543,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/543","url_meta":{"origin":379,"position":2},"title":"Where do you &quot;event&quot;?","date":"September 4, 2008","format":false,"excerpt":"From JohnPapa.net, \"Siliverlight 2-Tip - Declaring Events.\" He thinks that the place to wire up an event is always in code rather than in markup (like XAML). \"What\u2019s my opinion? I firmly believe the handlers belong in the code and not in the XAML.\" I'd suggest that's not always right\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"","width":0,"height":0},"classes":[]},{"id":426,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/426","url_meta":{"origin":379,"position":3},"title":"Visual WebGUI &#8212; Uh? Neat technology for someone else.","date":"July 16, 2008","format":false,"excerpt":"At the top of the page linked above, you can try the Ajax version or the Silverlight version of their web-mail demo. Try it. I won't say that I'm not impressed by what they've accomplished technically. It's impressive. They use a WinForms designer to build parts of the user interface\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"image","src":"https:\/\/i0.wp.com\/www.wiredprairie.us\/blog\/wp-content\/uploads\/2008\/07\/image-thumb2.png?resize=350%2C200","width":350,"height":200},"classes":[]},{"id":389,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/389","url_meta":{"origin":379,"position":4},"title":"Silverlight (and Flex), not for LOB applications?","date":"June 27, 2008","format":false,"excerpt":"Shawn suggests that line of business applications should not be written using Silverlight (and hence Flex), instead XBAPs (the run in browser Windows-only WPF solution). IT shops, with trimmed budgets and staff, have little time to maintain workstations and troubleshoot interactions between various installed applications. Web applications, although they may\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"","width":0,"height":0},"classes":[]},{"id":723,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/723","url_meta":{"origin":379,"position":5},"title":"Silverlight Stopwatch class in C#","date":"March 1, 2009","format":false,"excerpt":"I needed a simple method for doing some timings in Silverlight. Silverlight lacks the high performance query counter that is available natively in Windows (and available in .NET 3.5 for example), but it does have a TickCount. My code (mostly) mirrors the existing .NET Stopwatch class using the TickCount property\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"","width":0,"height":0},"classes":[]}],"_links":{"self":[{"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/posts\/379"}],"collection":[{"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/users\/2"}],"replies":[{"embeddable":true,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/comments?post=379"}],"version-history":[{"count":0,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/posts\/379\/revisions"}],"wp:attachment":[{"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/media?parent=379"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/categories?post=379"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/tags?post=379"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}