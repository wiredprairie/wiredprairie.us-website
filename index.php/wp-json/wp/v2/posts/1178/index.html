{"id":1178,"date":"2011-02-05T12:53:33","date_gmt":"2011-02-05T17:53:33","guid":{"rendered":"http:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/1178"},"modified":"2011-02-08T09:18:37","modified_gmt":"2011-02-08T14:18:37","slug":"msbuild-task-reference-and-ajax-minification","status":"publish","type":"post","link":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/1178","title":{"rendered":"MSBuild Task Reference and Ajax Minification"},"content":{"rendered":"<p><img loading=\"lazy\" style=\"background-image: none; border-right-width: 0px; margin: ; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px\" title=\"image\" border=\"0\" alt=\"image\" src=\"http:\/\/www.wiredprairie.us\/blog\/wp-content\/uploads\/2011\/02\/image2.png\" width=\"470\" height=\"318\" \/><\/p>\n<p>I\u2019m not one for dumping all scripts into a single folder and calling it a day. <\/p>\n<p>The template project for ASP.NET MVC 3 does that unfortunately. So, after a bit of cleanup and adding a few more JavaScript libraries that I needed, I\u2019m left with a reasonably organized folder structure. <\/p>\n<p>I\u2019ve added a folder for JavaScript files associated with Views, in this case, it\u2019s located here: Scripts\\Views\\ViewName\\\u2026<\/p>\n<p>I want to create minified versions of scripts, yet not minify scripts that have already been minified by other processes. The Microsoft Ajax Minifier (download <a href=\"http:\/\/aspnet.codeplex.com\/releases\/view\/40584\">here<\/a>) includes a msbuild task, making the effort of creating minified scripts painless.<\/p>\n<p>I followed these basic instructions for adding the build task:<\/p>\n<p><a href=\"http:\/\/www.asp.net\/ajaxlibrary\/AjaxMinQuickStart.ashx\">http:\/\/www.asp.net\/ajaxlibrary\/AjaxMinQuickStart.ashx<\/a><\/p>\n<p>I did not however, as I mentioned, want to compress all JavaScript files. <\/p>\n<p>So, based on <a href=\"http:\/\/msdn.microsoft.com\/en-us\/library\/ms171453(v=VS.100).aspx\">this<\/a> documentation (MSBuild Items), I changed the basic <strong>Include<\/strong> settings to reflect my folder structure.<\/p>\n<pre class=\"code\">  <span style=\"color: blue\">&lt;<\/span><span style=\"color: #a31515\">Import <\/span><span style=\"color: red\">Project<\/span><span style=\"color: blue\">=<\/span>&quot;<span style=\"color: blue\">$(MSBuildExtensionsPath)\\Microsoft\\MicrosoftAjax\\ajaxmin.tasks<\/span>&quot; <span style=\"color: blue\">\/&gt;\n  &lt;<\/span><span style=\"color: #a31515\">Target <\/span><span style=\"color: red\">Name<\/span><span style=\"color: blue\">=<\/span>&quot;<span style=\"color: blue\">AfterBuild<\/span>&quot;<span style=\"color: blue\">&gt;\n    &lt;<\/span><span style=\"color: #a31515\">ItemGroup<\/span><span style=\"color: blue\">&gt;\n      &lt;<\/span><span style=\"color: #a31515\">JS <\/span><span style=\"color: red\">Include<\/span><span style=\"color: blue\">=<\/span>&quot;<span style=\"color: blue\">Scripts\\Views\\\\**\\*.js<\/span>&quot; <span style=\"color: red\">Exclude<\/span><span style=\"color: blue\">=<\/span>&quot;<span style=\"color: blue\">Scripts\\Views\\\\<\/span><span style=\"color: blue\">**\\*.min.js;<\/span>&quot; <span style=\"color: blue\">\/&gt;\n    &lt;\/<\/span><span style=\"color: #a31515\">ItemGroup<\/span><span style=\"color: blue\">&gt;\n    &lt;<\/span><span style=\"color: #a31515\">ItemGroup<\/span><span style=\"color: blue\">&gt;\n      &lt;<\/span><span style=\"color: #a31515\">CSS <\/span><span style=\"color: red\">Include<\/span><span style=\"color: blue\">=<\/span>&quot;<span style=\"color: blue\">**\\*.css<\/span>&quot; <span style=\"color: red\">Exclude<\/span><span style=\"color: blue\">=<\/span>&quot;<span style=\"color: blue\">**\\*.min.css<\/span>&quot; <span style=\"color: blue\">\/&gt;\n    &lt;\/<\/span><span style=\"color: #a31515\">ItemGroup<\/span><span style=\"color: blue\">&gt;\n    &lt;<\/span><span style=\"color: #a31515\">AjaxMin <\/span><span style=\"color: red\">JsSourceFiles<\/span><span style=\"color: blue\">=<\/span>&quot;<span style=\"color: blue\">@(JS)<\/span>&quot; <span style=\"color: red\">JsSourceExtensionPattern<\/span><span style=\"color: blue\">=<\/span>&quot;<span style=\"color: blue\">\\.js$<\/span>&quot; <span style=\"color: red\">JsTargetExtension<\/span><span style=\"color: blue\">=<\/span>&quot;<span style=\"color: blue\">.min.js<\/span>&quot; <span style=\"color: red\">CssSourceFiles<\/span><span style=\"color: blue\">=<\/span>&quot;<span style=\"color: blue\">@(CSS)<\/span>&quot; <span style=\"color: red\">CssSourceExtensionPattern<\/span><span style=\"color: blue\">=<\/span>&quot;<span style=\"color: blue\">\\.css$<\/span>&quot; <span style=\"color: red\">CssTargetExtension<\/span><span style=\"color: blue\">=<\/span>&quot;<span style=\"color: blue\">.min.css<\/span>&quot; <span style=\"color: blue\">\/&gt;\n  &lt;\/<\/span><span style=\"color: #a31515\">Target<\/span><span style=\"color: blue\">&gt;\n\n<\/span><\/pre>\n<p>What I wanted specifically, is to only process JavaScript files found in the Scripts\\Views subfolders. So, I changed the <strong>Include<\/strong> attribute to:<\/p>\n<p><strong>Scripts\\Views\\**\\*.js<\/strong><\/p>\n<p>Roughly translated to English, the above:<\/p>\n<ol>\n<li>Recursively, find all JavaScript files under the folder Scripts\\Views <\/li>\n<li>Skip anything that is already named *.min.js <\/li>\n<li>Minify. <\/li>\n<\/ol>\n","protected":false},"excerpt":{"rendered":"<p>I\u2019m not one for dumping all scripts into a single folder and calling it a day. The template project for ASP.NET MVC 3 does that unfortunately. So, after a bit of cleanup and adding a few more JavaScript libraries that I needed, I\u2019m left with a reasonably organized folder structure. I\u2019ve added a folder for [&hellip;]<\/p>\n","protected":false},"author":2,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"spay_email":"","jetpack_publicize_message":"","jetpack_is_tweetstorm":false,"jetpack_publicize_feature_enabled":true},"categories":[4],"tags":[36],"jetpack_publicize_connections":[],"jetpack_featured_media_url":"","jetpack_sharing_enabled":true,"jetpack_shortlink":"https:\/\/wp.me\/pd5QIe-j0","jetpack_likes_enabled":true,"jetpack-related-posts":[{"id":885,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/885","url_meta":{"origin":1178,"position":0},"title":"Microsoft Ajax Library Declarative Command Alternatives","date":"January 3, 2010","format":false,"excerpt":"There may be another way to accomplish this, but I wanted to have a simple commanding system in the Microsoft Ajax Library which worked outside of the templates. After a number of false starts and frustration brought about by very limited documentation, I discovered a reasonable implementation. I created a\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"","width":0,"height":0},"classes":[]},{"id":890,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/890","url_meta":{"origin":1178,"position":1},"title":"Disabling automatic Sys.UI.Control attachment","date":"January 17, 2010","format":false,"excerpt":"If you\u2019re using the Microsoft Ajax Library (learn), you may not always want to start the automatic \u201cattach\u201d process that takes place when the page loads. It\u2019s easy to disable, but not yet documented any place I could find easily. <script src=\"Scripts\/MicrosoftAjax\/Start.debug.js\" type=\"text\/javascript\"><\/script> <script type=\"text\/javascript\"> var ajaxPath = \"\"; Sys.activateDom\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"","width":0,"height":0},"classes":[]},{"id":1880,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/1880","url_meta":{"origin":1178,"position":2},"title":"Using Windows CSCRIPT to compile a Handlebar.js template","date":"March 28, 2013","format":false,"excerpt":"I was looking for an alternative to using Node.JS for a JavaScript build process today on a Windows machine. I wanted something that relied as much on natively installed elements of a modern Windows PC as possible so that the build process would be portable. So, I broke out my\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"image","src":"https:\/\/i0.wp.com\/www.wiredprairie.us\/blog\/wp-content\/uploads\/2013\/03\/image_thumb9.png?resize=350%2C200","width":350,"height":200},"classes":[]},{"id":1442,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/1442","url_meta":{"origin":1178,"position":3},"title":"Nest Thermostat API\/Protocol","date":"January 8, 2012","format":false,"excerpt":"While Nest Labs hasn\u2019t released a formal (documented & supported) API, I thought I\u2019d do a bit of digging to see how they\u2019re using the network and what might be achievable. A few things are going on, the majority as you\u2019d probably expect. The web interface is using a long\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"image","src":"https:\/\/i0.wp.com\/www.wiredprairie.us\/blog\/wp-content\/uploads\/2012\/01\/image_thumb7.png?resize=350%2C200","width":350,"height":200},"classes":[]},{"id":860,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/860","url_meta":{"origin":1178,"position":4},"title":"Google&rsquo;s Closure Compiler, Test Site","date":"November 25, 2009","format":false,"excerpt":"http:\/\/closure-compiler.appspot.com\/home Compress your javascript files using Google\u2019s Closure Compiler. I tried a quick experiment using Jquery 1.3.2 development edition, using the \u201cadvanced\u201d mode of the compiler: As a comparison, Jquery from jquery.com (here) is compressed to 55.9KB minified and 19KB gzipped. Google\u2019s Chrome Compiler shaves off one KB or so.\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"image","src":"https:\/\/i0.wp.com\/www.wiredprairie.us\/blog\/wp-content\/uploads\/2009\/11\/image5.png?resize=350%2C200","width":350,"height":200},"classes":[]},{"id":426,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/426","url_meta":{"origin":1178,"position":5},"title":"Visual WebGUI &#8212; Uh? Neat technology for someone else.","date":"July 16, 2008","format":false,"excerpt":"At the top of the page linked above, you can try the Ajax version or the Silverlight version of their web-mail demo. Try it. I won't say that I'm not impressed by what they've accomplished technically. It's impressive. They use a WinForms designer to build parts of the user interface\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"image","src":"https:\/\/i0.wp.com\/www.wiredprairie.us\/blog\/wp-content\/uploads\/2008\/07\/image-thumb2.png?resize=350%2C200","width":350,"height":200},"classes":[]}],"_links":{"self":[{"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/posts\/1178"}],"collection":[{"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/users\/2"}],"replies":[{"embeddable":true,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/comments?post=1178"}],"version-history":[{"count":1,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/posts\/1178\/revisions"}],"predecessor-version":[{"id":1185,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/posts\/1178\/revisions\/1185"}],"wp:attachment":[{"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/media?parent=1178"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/categories?post=1178"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/tags?post=1178"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}