{"id":1204,"date":"2011-03-31T20:35:03","date_gmt":"2011-04-01T01:35:03","guid":{"rendered":"http:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/1204"},"modified":"2011-03-31T20:35:03","modified_gmt":"2011-04-01T01:35:03","slug":"return-of-syntax-highlighting-and-code-completion-for-knockoutjs-in-vs2010-when-using-razor","status":"publish","type":"post","link":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/1204","title":{"rendered":"Return of syntax highlighting and code completion for KnockoutJS in VS2010 (when using Razor)"},"content":{"rendered":"<p>OK, admittedly, this is a workaround for an issue where the syntax of <a href=\"http:\/\/api.jquery.com\/jquery.tmpl\/\">jQuery Templates<\/a> (used by <a href=\"http:\/\/knockoutjs.com\/\">KnockoutJS<\/a>) doesn\u2019t lend itself to the most pleasant editing experience in Visual Studio, but eh.<\/p>\n<p>This was inspired after talking with Ryan a bit and seeing a recent <a href=\"http:\/\/www.knockmeout.net\/2011\/03\/using-external-jquery-template-files.html\">post<\/a> on his new web site. Here\u2019s what I came up with.<\/p>\n<p>Following a similar pattern to the <a href=\"http:\/\/msdn.microsoft.com\/en-us\/library\/dd410596.aspx\">BeginForm<\/a> Helper, I created a \u201cTemplate\u201d helper. It\u2019s simple to use as the code below demonstrates (the example is taken from the KnockoutJS web site).<\/p>\n<pre class=\"code\"><span style=\"color: blue\">&lt;<\/span><span style=\"color: maroon\">div <\/span><span style=\"color: red\">data-bind<\/span><span style=\"color: blue\">='template: &quot;personTemplate&quot;'&gt; &lt;\/<\/span><span style=\"color: maroon\">div<\/span><span style=\"color: blue\">&gt;\n\n<\/span><span style=\"background: yellow\">@<\/span><span style=\"color: blue\">using <\/span>(Html.Template(<span style=\"color: #a31515\">&quot;personTemplate&quot;<\/span>))\n{ <span style=\"background: yellow\">&lt;text&gt;<\/span>    \n    ${ name } is ${ age } years old\n    <span style=\"color: blue\">&lt;<\/span><span style=\"color: maroon\">button <\/span><span style=\"color: red\">data-bind<\/span><span style=\"color: blue\">='click: makeOlder'&gt;<\/span>Make older<span style=\"color: blue\">&lt;\/<\/span><span style=\"color: maroon\">button<\/span><span style=\"color: blue\">&gt;\n<\/span><span style=\"background: yellow\">&lt;\/text&gt;<\/span> }\n     \n<span style=\"color: blue\">&lt;<\/span><span style=\"color: maroon\">script <\/span><span style=\"color: red\">type<\/span><span style=\"color: blue\">='text\/javascript'&gt;\n    var <\/span>viewModel = {\n        name: ko.observable(<span style=\"color: maroon\">'Bert'<\/span>),\n        age: ko.observable(78),\n        makeOlder: <span style=\"color: blue\">function <\/span>() {\n            <span style=\"color: blue\">this<\/span>.age(<span style=\"color: blue\">this<\/span>.age() + 1);\n        }\n    };\n    ko.applyBindings(viewModel);\n<span style=\"color: blue\">&lt;\/<\/span><span style=\"color: maroon\">script<\/span><span style=\"color: blue\">&gt;\n\n<\/span><\/pre>\n<p>Sometimes, the Razor compiler\/engine is confused by the template syntax however, so to work around that, you\u2019ll need to add the &lt;text&gt;\u2026&lt;\/text&gt; block to prevent the template syntax from being parsed as Razor syntax. The example above shouldn\u2019t require it. The one that causes problems I\u2019ve found mostly right now is the conditional {{ if }} block which apparently looks like Razor\/C# code, and fails. The &lt;text&gt; tag syntax isn\u2019t tragic. The most annoying part is that it highlights as bright yellow.<\/p>\n<p>The Template Helper emits the start and end &lt;script&gt; tags appropriately. There\u2019s an optional second parameter that allows the developer to override the default of the type being text\/html.<\/p>\n<pre class=\"code\"><span style=\"color: blue\">using <\/span>System;\n<span style=\"color: blue\">using <\/span>System.Collections.Generic;\n<span style=\"color: blue\">using <\/span>System.Linq;\n<span style=\"color: blue\">using <\/span>System.Web;\n<span style=\"color: blue\">using <\/span>System.Web.Mvc;\n\n<span style=\"color: blue\">namespace <\/span>TestMVC.Web\n{\n    <span style=\"color: blue\">public static class <\/span><span style=\"color: #2b91af\">MvcExtensions\n    <\/span>{\n        <span style=\"color: gray\">\/\/\/ &lt;summary&gt;\n        \/\/\/ <\/span><span style=\"color: green\">Automatically generates a script block, useful for non-typical script\n        <\/span><span style=\"color: gray\">\/\/\/ <\/span><span style=\"color: green\">tags that have HTML content inside (like those in jquery templates for example)\n        <\/span><span style=\"color: gray\">\/\/\/ <\/span><span style=\"color: green\">Always use this within using statement as Dispose must be called to properly close\n        <\/span><span style=\"color: gray\">\/\/\/ <\/span><span style=\"color: green\">the script tag.\n        <\/span><span style=\"color: gray\">\/\/\/ &lt;\/summary&gt;\n        \/\/\/ &lt;param name=&quot;helper&quot;&gt;<\/span><span style=\"color: green\">Html Helper object<\/span><span style=\"color: gray\">&lt;\/param&gt;\n        \/\/\/ &lt;param name=&quot;id&quot;&gt;<\/span><span style=\"color: green\">The ID for the generated script tag.<\/span><span style=\"color: gray\">&lt;\/param&gt;\n        \/\/\/ &lt;returns&gt;<\/span><span style=\"color: green\">TemplateBlock object which must be disposed to properly emit\n        <\/span><span style=\"color: gray\">\/\/\/ <\/span><span style=\"color: green\">the necessary script tags.<\/span><span style=\"color: gray\">&lt;\/returns&gt;\n        <\/span><span style=\"color: blue\">public static <\/span><span style=\"color: #2b91af\">TemplateBlock <\/span>Template(<span style=\"color: blue\">this <\/span><span style=\"color: #2b91af\">HtmlHelper <\/span>helper, <span style=\"color: blue\">string <\/span>id)\n        {\n            <span style=\"color: blue\">return <\/span>Template(helper, id, <span style=\"color: #a31515\">&quot;&quot;<\/span>);\n        }\n\n        <span style=\"color: gray\">\/\/\/ &lt;summary&gt;\n        \/\/\/ <\/span><span style=\"color: green\">Automatically generates a script block, useful for non-typical script\n        <\/span><span style=\"color: gray\">\/\/\/ <\/span><span style=\"color: green\">tags that have HTML content inside (like those in jquery templates for example)\n        <\/span><span style=\"color: gray\">\/\/\/ <\/span><span style=\"color: green\">Always use this within using statement as Dispose must be called to properly close\n        <\/span><span style=\"color: gray\">\/\/\/ <\/span><span style=\"color: green\">the script tag.\n        <\/span><span style=\"color: gray\">\/\/\/ &lt;\/summary&gt;\n        \/\/\/ &lt;param name=&quot;helper&quot;&gt;<\/span><span style=\"color: green\">Html Helper object<\/span><span style=\"color: gray\">&lt;\/param&gt;\n        \/\/\/ &lt;param name=&quot;id&quot;&gt;<\/span><span style=\"color: green\">The ID for the generated script tag.<\/span><span style=\"color: gray\">&lt;\/param&gt;\n        \/\/\/ &lt;param name=&quot;type&quot;&gt;<\/span><span style=\"color: green\">Defaults to text\/html, but may be overriden by setting\n        <\/span><span style=\"color: gray\">\/\/\/ <\/span><span style=\"color: green\">this parameter.<\/span><span style=\"color: gray\">&lt;\/param&gt;\n        \/\/\/ &lt;returns&gt;<\/span><span style=\"color: green\">TemplateBlock object which must be disposed to properly emit\n        <\/span><span style=\"color: gray\">\/\/\/ <\/span><span style=\"color: green\">the necessary script tags.<\/span><span style=\"color: gray\">&lt;\/returns&gt;\n        <\/span><span style=\"color: blue\">public static <\/span><span style=\"color: #2b91af\">TemplateBlock <\/span>Template(<span style=\"color: blue\">this <\/span><span style=\"color: #2b91af\">HtmlHelper <\/span>helper, <span style=\"color: blue\">string <\/span>id, <span style=\"color: blue\">string <\/span>type)\n        {\n            <span style=\"color: blue\">return new <\/span><span style=\"color: #2b91af\">TemplateBlock<\/span>(helper.ViewContext, id, type);\n        }\n    \n    }\n\n    <span style=\"color: blue\">public class <\/span><span style=\"color: #2b91af\">TemplateBlock <\/span>: <span style=\"color: #2b91af\">IDisposable\n    <\/span>{\n        <span style=\"color: blue\">private bool <\/span>_disposed = <span style=\"color: blue\">false<\/span>;\n        <span style=\"color: blue\">public <\/span><span style=\"color: #2b91af\">ViewContext <\/span>ViewContext { <span style=\"color: blue\">get<\/span>; <span style=\"color: blue\">private set<\/span>; }\n        \n        <span style=\"color: blue\">public <\/span>TemplateBlock(<span style=\"color: #2b91af\">ViewContext <\/span>context, <span style=\"color: blue\">string <\/span>id, <span style=\"color: blue\">string <\/span>type)\n        {\n            <span style=\"color: blue\">this<\/span>.ViewContext = context;\n            type = <span style=\"color: blue\">string<\/span>.IsNullOrWhiteSpace(type) ? <span style=\"color: #a31515\">&quot;text\/html&quot; <\/span>: type;\n            context.Writer.Write(<span style=\"color: #a31515\">&quot;&lt;script type='{0}' id='{1}'&gt;\\n&quot;<\/span>, type, id);\n        }\n\n        <span style=\"color: blue\">private void <\/span>Disposing(<span style=\"color: blue\">bool <\/span>disposing)\n        {\n            <span style=\"color: blue\">if <\/span>(!_disposed)\n            {\n                _disposed = <span style=\"color: blue\">true<\/span>;\n                ViewContext.Writer.Write(<span style=\"color: #a31515\">&quot;&lt;\/script&gt;\\n&quot;<\/span>);\n            }\n        }\n        <span style=\"color: blue\">public void <\/span>Dispose()\n        {\n            <span style=\"color: blue\">this<\/span>.Disposing(<span style=\"color: blue\">true<\/span>);            \n        }\n    }\n\n}<\/pre>\n<p>Enjoy.<\/p>\n","protected":false},"excerpt":{"rendered":"<p>OK, admittedly, this is a workaround for an issue where the syntax of jQuery Templates (used by KnockoutJS) doesn\u2019t lend itself to the most pleasant editing experience in Visual Studio, but eh. This was inspired after talking with Ryan a bit and seeing a recent post on his new web site. Here\u2019s what I came [&hellip;]<\/p>\n","protected":false},"author":2,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"spay_email":"","jetpack_publicize_message":"","jetpack_is_tweetstorm":false,"jetpack_publicize_feature_enabled":true},"categories":[4],"tags":[35,39],"jetpack_publicize_connections":[],"jetpack_featured_media_url":"","jetpack_sharing_enabled":true,"jetpack_shortlink":"https:\/\/wp.me\/pd5QIe-jq","jetpack_likes_enabled":true,"jetpack-related-posts":[{"id":1563,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/1563","url_meta":{"origin":1204,"position":0},"title":"Knockout.JS: AsDictionary","date":"March 9, 2012","format":false,"excerpt":"I frequently find that I have an array of objects in JavaScript that I want to display in a particular order and also have the ability to quickly locate an object by an ID or a key (and not use the indexOf function). As my recent project is using Knockout.JS,\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"https:\/\/i0.wp.com\/www.wiredprairie.us\/blog\/wp-content\/uploads\/2012\/03\/image3.png?resize=350%2C200","width":350,"height":200},"classes":[]},{"id":1820,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/1820","url_meta":{"origin":1204,"position":1},"title":"Knockout binding for JavaScript route fixup","date":"January 25, 2013","format":false,"excerpt":"Part one. After the first round, I felt compelled to KnockOut the code a bit more. I\u2019d mentioned I wasn\u2019t pleased with the code exactly. It needed some refactoring. So, I\u2019ve created a new Knockout binding handler. This binding handler replaces\u00a0 named parameters with a model\u2019s properties in a path.\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"","width":0,"height":0},"classes":[]},{"id":1800,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/1800","url_meta":{"origin":1204,"position":2},"title":"Named routing with Knockout, ASP.NET MVC, and AttributeRouting, from JavaScript","date":"January 24, 2013","format":false,"excerpt":"It's hard to describe exactly what I've built here, but I'm just throwing these pieces out on the Internet in case someone: a) finds them useful, or b) has a better solution. Goals: Named routes, with a wee bit of a Rails feel A Knockout friendly syntax for binding to\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"","width":0,"height":0},"classes":[]},{"id":2224,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/2224","url_meta":{"origin":1204,"position":3},"title":"Flutter Demo application linking to BoardGameGeek.Com&#8217;s Hot Game List","date":"February 26, 2018","format":false,"excerpt":"I've built a slightly more interesting application using Flutter.\u00a0 Using an XML feed from BoardGameGeek's API, the application displays a list of the current hot games complete with thumbnail images. Here's the code. I used a standard Flutter app template and also added a few packages to the project. I've\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"Hulk Smash Layout","src":"https:\/\/i0.wp.com\/www.wiredprairie.us\/blog\/wp-content\/uploads\/2018\/02\/2018-02-26-19_45_39-Hulk-Smash-Meme-Generator-Imgflip.png?resize=350%2C200&ssl=1","width":350,"height":200},"classes":[]},{"id":331,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/331","url_meta":{"origin":1204,"position":4},"title":"Velocity &#8212; a rockin&#8217; distributed in memory cache for ASP.NET","date":"June 3, 2008","format":false,"excerpt":"Velocity, the code-name for a new in-memory distributed caching system for ASP.NET was released as a Community Tech Preview today. What is it? It's described in the documentation: Microsoft project code named \"Velocity\" provides a highly scalable in-memory application cache for all kinds of data. By using cache, your application\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"image","src":"https:\/\/i0.wp.com\/www.wiredprairie.us\/blog\/wp-content\/uploads\/2008\/06\/image-thumb.png?resize=350%2C200","width":350,"height":200},"classes":[]},{"id":1693,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/1693","url_meta":{"origin":1204,"position":5},"title":"Simple Node based Http Put simulator","date":"July 31, 2012","format":false,"excerpt":"It\u2019s great what you can accomplish in a few lines of code. The Node based source code below uses express to create a mini view-based web server along with a mock Http Put file upload destination. \/** * Module dependencies. *\/var express = require('express') , routes = require('.\/routes') , http\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"","width":0,"height":0},"classes":[]}],"_links":{"self":[{"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/posts\/1204"}],"collection":[{"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/users\/2"}],"replies":[{"embeddable":true,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/comments?post=1204"}],"version-history":[{"count":0,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/posts\/1204\/revisions"}],"wp:attachment":[{"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/media?parent=1204"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/categories?post=1204"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/tags?post=1204"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}