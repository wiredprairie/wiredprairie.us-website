{"id":1643,"date":"2012-04-17T07:53:00","date_gmt":"2012-04-17T12:53:00","guid":{"rendered":"http:\/\/www.wiredprairie.us\/blog\/?p=1643"},"modified":"2012-04-16T21:05:54","modified_gmt":"2012-04-17T02:05:54","slug":"svg-setting-text-content-dynamically","status":"publish","type":"post","link":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/1643","title":{"rendered":"SVG Setting Text Content Dynamically"},"content":{"rendered":"<p>Continuing on a <a href=\"http:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/1638\">theme<\/a> of animating SVG, I\u2019ve added a label in the center of the animation which contains the current angle of the ever-rotating marker (in fact in a centered horizontally and vertically SVG text node). <\/p>\n<p>(Click image below to try it.)<\/p>\n<p><a href=\"http:\/\/www.wiredprairie.us\/examples\/svg\/demo2.html\" target=\"_blank\"><img loading=\"lazy\" style=\"background-image: none; border-bottom: 0px; border-left: 0px; margin: 0px auto; padding-left: 0px; padding-right: 0px; display: block; float: none; border-top: 0px; border-right: 0px; padding-top: 0px\" title=\"image\" border=\"0\" alt=\"image\" src=\"http:\/\/www.wiredprairie.us\/blog\/wp-content\/uploads\/2012\/04\/image26.png\" width=\"316\" height=\"313\" \/><\/a><\/p>\n<p>At the bottom of the file from the <a href=\"http:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/1638\">previous<\/a> post, I\u2019ve added the following:<\/p>\n<pre class=\"code\">    <span style=\"color: blue\">&lt;<\/span><span style=\"color: maroon\">text <\/span><span style=\"color: red\">id<\/span><span style=\"color: blue\">=&quot;currentValueAsText&quot; <\/span><span style=\"color: red\">x<\/span><span style=\"color: blue\">=&quot;300&quot; <\/span><span style=\"color: red\">y<\/span><span style=\"color: blue\">=&quot;300&quot; \n        <\/span><span style=\"color: red\">style<\/span><span style=\"color: blue\">=&quot;<\/span><span style=\"color: red\">text-anchor<\/span><span style=\"color: blue\">: middle;<\/span><span style=\"color: red\">alignment-baseline<\/span><span style=\"color: blue\">:middle&quot; \n        <\/span><span style=\"color: red\">fill<\/span><span style=\"color: blue\">=&quot;#FFFFFF&quot; <\/span><span style=\"color: red\">font-family<\/span><span style=\"color: blue\">=&quot;'Arial'&quot; <\/span><span style=\"color: red\">font-size<\/span><span style=\"color: blue\">=&quot;96&quot; <\/span><span style=\"color: red\">opacity<\/span><span style=\"color: blue\">=&quot;.6&quot;&gt;<\/span>0<span style=\"color: blue\">&lt;\/<\/span><span style=\"color: maroon\">text<\/span><span style=\"color: blue\">&gt;\n\n<\/span><\/pre>\n<p>It\u2019s a new text node. It\u2019s set to centered both horizontally and vertically (using the text-anchor and alignment-baseline style properties respectively) at 300,300. <\/p>\n<p>Setting the content is simple as well:<\/p>\n<pre class=\"code\">(<span style=\"color: blue\">function <\/span>() {\n    window.onload = loaded;\n    <span style=\"color: blue\">function <\/span>loaded() {\n        <span style=\"color: blue\">var <\/span>colorTemp = document.getElementById(<span style=\"color: maroon\">&quot;color-temp&quot;<\/span>);\n        <span style=\"color: blue\">var <\/span>reading = document.getElementById(<span style=\"color: maroon\">'current-reading'<\/span>);\n<font style=\"background-color: #ffff00\">        <span style=\"color: blue\">var <\/span>currentVal = document.getElementById(<span style=\"color: maroon\">&quot;currentValueAsText&quot;<\/span>);\n<\/font>        <span style=\"color: blue\">var <\/span>currentAngle = 0;\n        <span style=\"color: blue\">var <\/span>fill;\n\n        <span style=\"color: blue\">var <\/span>direction = 1;\n        setInterval(<span style=\"color: blue\">function <\/span>() {\n            currentAngle += direction;\n            <span style=\"color: blue\">if <\/span>(currentAngle &gt;= 120 || currentAngle &lt;= -120) {\n                direction *= -1;\n            } <span style=\"color: blue\">else if <\/span>(currentAngle === 0) {\n                fill = direction === 1 ? <span style=\"color: maroon\">&quot;#BE1E2D&quot; <\/span>: <span style=\"color: maroon\">&quot;#10A2DC&quot;<\/span>;\n                colorTemp.setAttribute(<span style=\"color: maroon\">&quot;fill&quot;<\/span>, fill);\n            }\n            <span style=\"color: #006400\">\/\/ adjust the opacity\n            <\/span>colorTemp.setAttribute(<span style=\"color: maroon\">&quot;opacity&quot;<\/span>, Math.abs(currentAngle) \/ 120.0);\n            reading.setAttribute(<span style=\"color: maroon\">&quot;transform&quot;<\/span>, <span style=\"color: maroon\">&quot;rotate(&quot; <\/span>+ currentAngle + <span style=\"color: maroon\">&quot;)&quot;<\/span>);\n<font style=\"background-color: #ffff00\">            currentValueAsText.textContent = currentAngle.toString();\n<\/font>\n        }, 25);\n    }\n})();<\/pre>\n<p>Use the <strong>textContent<\/strong> property of the SVG text node to set the text. <\/p>\n<p>Done. <img style=\"border-bottom-style: none; border-left-style: none; border-top-style: none; border-right-style: none\" class=\"wlEmoticon wlEmoticon-smile\" alt=\"Smile\" src=\"http:\/\/www.wiredprairie.us\/blog\/wp-content\/uploads\/2012\/04\/wlEmoticon-smile2.png\" \/><\/p>\n","protected":false},"excerpt":{"rendered":"<p>Continuing on a theme of animating SVG, I\u2019ve added a label in the center of the animation which contains the current angle of the ever-rotating marker (in fact in a centered horizontally and vertically SVG text node). (Click image below to try it.) At the bottom of the file from the previous post, I\u2019ve added [&hellip;]<\/p>\n","protected":false},"author":2,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"spay_email":"","jetpack_publicize_message":"","jetpack_is_tweetstorm":false,"jetpack_publicize_feature_enabled":true},"categories":[4],"tags":[88,90,38,89],"jetpack_publicize_connections":[],"jetpack_featured_media_url":"","jetpack_sharing_enabled":true,"jetpack_shortlink":"https:\/\/wp.me\/pd5QIe-qv","jetpack_likes_enabled":true,"jetpack-related-posts":[{"id":1638,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/1638","url_meta":{"origin":1643,"position":0},"title":"Spinning SVG Animation","date":"April 16, 2012","format":false,"excerpt":"Interested in learning a few capabilities of SVG animation this evening from JavaScript in a web page, I put together a simple demonstration. Click on the image to launch the demo. Animating SVG in a modern browser (including IE9) is generally easy enough. This example was slightly more interesting in\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"https:\/\/i0.wp.com\/www.wiredprairie.us\/blog\/wp-content\/uploads\/2012\/04\/image23.png?resize=350%2C200","width":350,"height":200},"classes":[]},{"id":1930,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/1930","url_meta":{"origin":1643,"position":1},"title":"Sending a socket to a forked process in Node.JS","date":"August 27, 2013","format":false,"excerpt":"If you want to fork a process in Node and pass a socket, the current Node documentation has a rather odd example, so I\u2019ve simplified it here for my own sanity (further complicated by the fact that the WebStorm debugger can\u2019t debug a forked Node.JS process, which confused me for\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"","width":0,"height":0},"classes":[]},{"id":1820,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/1820","url_meta":{"origin":1643,"position":2},"title":"Knockout binding for JavaScript route fixup","date":"January 25, 2013","format":false,"excerpt":"Part one. After the first round, I felt compelled to KnockOut the code a bit more. I\u2019d mentioned I wasn\u2019t pleased with the code exactly. It needed some refactoring. So, I\u2019ve created a new Knockout binding handler. This binding handler replaces\u00a0 named parameters with a model\u2019s properties in a path.\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"","width":0,"height":0},"classes":[]},{"id":1563,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/1563","url_meta":{"origin":1643,"position":3},"title":"Knockout.JS: AsDictionary","date":"March 9, 2012","format":false,"excerpt":"I frequently find that I have an array of objects in JavaScript that I want to display in a particular order and also have the ability to quickly locate an object by an ID or a key (and not use the indexOf function). As my recent project is using Knockout.JS,\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"https:\/\/i0.wp.com\/www.wiredprairie.us\/blog\/wp-content\/uploads\/2012\/03\/image3.png?resize=350%2C200","width":350,"height":200},"classes":[]},{"id":1570,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/1570","url_meta":{"origin":1643,"position":4},"title":"JavaScript: isScrolledIntoView","date":"March 15, 2012","format":false,"excerpt":"I needed a simple way to detect when a placeholder DIV (that would contain an image) had scrolled into the current viewport of the browser. I\u2019ve seen a few solutions that worked, and a few that didn\u2019t (hello? test your code!). Here\u2019s my simple solution: function isScrolledIntoView(elem) { elem =\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"SmugMupBrowser-live","src":"https:\/\/i0.wp.com\/www.wiredprairie.us\/blog\/wp-content\/uploads\/2012\/03\/SmugMupBrowser-live.gif?resize=350%2C200","width":350,"height":200},"classes":[]},{"id":1754,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/1754","url_meta":{"origin":1643,"position":5},"title":"Nest Thermostat API using Node JS and Nest API Update","date":"October 9, 2012","format":false,"excerpt":"I\u2019ve been asked by a few people for more details on the API Nest Labs uses for their thermostats, especially regarding setting data (and not just polling). The API uses mostly JSON formatted data POSTed to their web servers. Authentication To authenticate, POST the username and password, encoded as form\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"","width":0,"height":0},"classes":[]}],"_links":{"self":[{"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/posts\/1643"}],"collection":[{"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/users\/2"}],"replies":[{"embeddable":true,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/comments?post=1643"}],"version-history":[{"count":1,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/posts\/1643\/revisions"}],"predecessor-version":[{"id":1644,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/posts\/1643\/revisions\/1644"}],"wp:attachment":[{"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/media?parent=1643"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/categories?post=1643"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/tags?post=1643"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}