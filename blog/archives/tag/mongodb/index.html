<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="UTF-8" /><base href="https://wiredprairie.github.io/wiredprairie.us-website/">
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="profile" href="http://gmpg.org/xfn/11" />
        <link rel="pingback" href="blog/xmlrpc.php" />

        <title>MongoDB &#8211; WiredPrairie</title>
        <meta name="robots" content="max-image-preview:large" />
        <link rel="dns-prefetch" href="//secure.gravatar.com" />
        <link rel="dns-prefetch" href="//www.wiredprairie.us" />
        <link rel="dns-prefetch" href="//fonts.googleapis.com" />
        <link rel="dns-prefetch" href="//s.w.org" />
        <link rel="dns-prefetch" href="//v0.wordpress.com" />
        <link rel="dns-prefetch" href="//widgets.wp.com" />
        <link rel="dns-prefetch" href="//s0.wp.com" />
        <link rel="dns-prefetch" href="//0.gravatar.com" />
        <link rel="dns-prefetch" href="//1.gravatar.com" />
        <link rel="dns-prefetch" href="//2.gravatar.com" />
         <link rel="dns-prefetch" href="//public-api.wordpress.com" />
        <link
            rel="alternate"
            type="application/rss+xml"
            title="WiredPrairie &raquo; Feed"
            href="blog/feed"
        />
        <link
            rel="alternate"
            type="application/rss+xml"
            title="WiredPrairie &raquo; Comments Feed"
            href="blog/comments/feed"
        />
        <link
            rel="alternate"
            type="application/rss+xml"
            title="WiredPrairie &raquo; MongoDB Tag Feed"
            href="blog/archives/tag/mongodb/feed"
        />
        <script type="text/javascript">
            window._wpemojiSettings = {
                baseUrl: "https:\/\/s.w.org\/images\/core\/emoji\/14.0.0\/72x72\/",
                ext: ".png",
                svgUrl: "https:\/\/s.w.org\/images\/core\/emoji\/14.0.0\/svg\/",
                svgExt: ".svg",
                source: { concatemoji: "\/scripts\/js\/wp-emoji-release.min.js" },
            };
            /*! This file is auto-generated */
            !(function (e, a, t) {
                var n,
                    r,
                    o,
                    i = a.createElement("canvas"),
                    p = i.getContext && i.getContext("2d");
                function s(e, t) {
                    var a = String.fromCharCode,
                        e = (p.clearRect(0, 0, i.width, i.height), p.fillText(a.apply(this, e), 0, 0), i.toDataURL());
                    return (
                        p.clearRect(0, 0, i.width, i.height), p.fillText(a.apply(this, t), 0, 0), e === i.toDataURL()
                    );
                }
                function c(e) {
                    var t = a.createElement("script");
                    (t.src = e),
                        (t.defer = t.type = "text/javascript"),
                        a.getElementsByTagName("head")[0].appendChild(t);
                }
                for (
                    o = Array("flag", "emoji"), t.supports = { everything: !0, everythingExceptFlag: !0 }, r = 0;
                    r < o.length;
                    r++
                )
                    (t.supports[o[r]] = (function (e) {
                        if (!p || !p.fillText) return !1;
                        switch (((p.textBaseline = "top"), (p.font = "600 32px Arial"), e)) {
                            case "flag":
                                return s([127987, 65039, 8205, 9895, 65039], [127987, 65039, 8203, 9895, 65039])
                                    ? !1
                                    : !s([55356, 56826, 55356, 56819], [55356, 56826, 8203, 55356, 56819]) &&
                                          !s(
                                              [
                                                  55356, 57332, 56128, 56423, 56128, 56418, 56128, 56421, 56128, 56430,
                                                  56128, 56423, 56128, 56447,
                                              ],
                                              [
                                                  55356, 57332, 8203, 56128, 56423, 8203, 56128, 56418, 8203, 56128,
                                                  56421, 8203, 56128, 56430, 8203, 56128, 56423, 8203, 56128, 56447,
                                              ]
                                          );
                            case "emoji":
                                return !s(
                                    [129777, 127995, 8205, 129778, 127999],
                                    [129777, 127995, 8203, 129778, 127999]
                                );
                        }
                        return !1;
                    })(o[r])),
                        (t.supports.everything = t.supports.everything && t.supports[o[r]]),
                        "flag" !== o[r] &&
                            (t.supports.everythingExceptFlag = t.supports.everythingExceptFlag && t.supports[o[r]]);
                (t.supports.everythingExceptFlag = t.supports.everythingExceptFlag && !t.supports.flag),
                    (t.DOMReady = !1),
                    (t.readyCallback = function () {
                        t.DOMReady = !0;
                    }),
                    t.supports.everything ||
                        ((n = function () {
                            t.readyCallback();
                        }),
                        a.addEventListener
                            ? (a.addEventListener("DOMContentLoaded", n, !1), e.addEventListener("load", n, !1))
                            : (e.attachEvent("onload", n),
                              a.attachEvent("onreadystatechange", function () {
                                  "complete" === a.readyState && t.readyCallback();
                              })),
                        (e = t.source || {}).concatemoji
                            ? c(e.concatemoji)
                            : e.wpemoji && e.twemoji && (c(e.twemoji), c(e.wpemoji)));
            })(window, document, window._wpemojiSettings);
        </script>
        <style type="text/css">
            img.wp-smiley,
            img.emoji {
                display: inline !important;
                border: none !important;
                box-shadow: none !important;
                height: 1em !important;
                width: 1em !important;
                margin: 0 0.07em !important;
                vertical-align: -0.1em !important;
                background: none !important;
                padding: 0 !important;
            }
        </style>
        <link
            rel="stylesheet"
            id="wp-block-library-css"
            href="css/style.min.css"
            type="text/css"
            media="all"
        />
        <style id="wp-block-library-inline-css" type="text/css">
            .has-text-align-justify {
                text-align: justify;
            }
        </style>
        <link
            rel="stylesheet"
            id="mediaelement-css"
            href="blog/scripts/js/mediaelement/mediaelementplayer-legacy.min.css"
            type="text/css"
            media="all"
        />
        <link
            rel="stylesheet"
            id="wp-mediaelement-css"
            href="blog/scripts/js/mediaelement/wp-mediaelement.min.css"
            type="text/css"
            media="all"
        />
        <style id="global-styles-inline-css" type="text/css">
            body {
                --wp--preset--color--black: #000000;
                --wp--preset--color--cyan-bluish-gray: #abb8c3;
                --wp--preset--color--white: #ffffff;
                --wp--preset--color--pale-pink: #f78da7;
                --wp--preset--color--vivid-red: #cf2e2e;
                --wp--preset--color--luminous-vivid-orange: #ff6900;
                --wp--preset--color--luminous-vivid-amber: #fcb900;
                --wp--preset--color--light-green-cyan: #7bdcb5;
                --wp--preset--color--vivid-green-cyan: #00d084;
                --wp--preset--color--pale-cyan-blue: #8ed1fc;
                --wp--preset--color--vivid-cyan-blue: #0693e3;
                --wp--preset--color--vivid-purple: #9b51e0;
                --wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(
                    135deg,
                    rgba(6, 147, 227, 1) 0%,
                    rgb(155, 81, 224) 100%
                );
                --wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(
                    135deg,
                    rgb(122, 220, 180) 0%,
                    rgb(0, 208, 130) 100%
                );
                --wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(
                    135deg,
                    rgba(252, 185, 0, 1) 0%,
                    rgba(255, 105, 0, 1) 100%
                );
                --wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(
                    135deg,
                    rgba(255, 105, 0, 1) 0%,
                    rgb(207, 46, 46) 100%
                );
                --wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(
                    135deg,
                    rgb(238, 238, 238) 0%,
                    rgb(169, 184, 195) 100%
                );
                --wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(
                    135deg,
                    rgb(74, 234, 220) 0%,
                    rgb(151, 120, 209) 20%,
                    rgb(207, 42, 186) 40%,
                    rgb(238, 44, 130) 60%,
                    rgb(251, 105, 98) 80%,
                    rgb(254, 248, 76) 100%
                );
                --wp--preset--gradient--blush-light-purple: linear-gradient(
                    135deg,
                    rgb(255, 206, 236) 0%,
                    rgb(152, 150, 240) 100%
                );
                --wp--preset--gradient--blush-bordeaux: linear-gradient(
                    135deg,
                    rgb(254, 205, 165) 0%,
                    rgb(254, 45, 45) 50%,
                    rgb(107, 0, 62) 100%
                );
                --wp--preset--gradient--luminous-dusk: linear-gradient(
                    135deg,
                    rgb(255, 203, 112) 0%,
                    rgb(199, 81, 192) 50%,
                    rgb(65, 88, 208) 100%
                );
                --wp--preset--gradient--pale-ocean: linear-gradient(
                    135deg,
                    rgb(255, 245, 203) 0%,
                    rgb(182, 227, 212) 50%,
                    rgb(51, 167, 181) 100%
                );
                --wp--preset--gradient--electric-grass: linear-gradient(
                    135deg,
                    rgb(202, 248, 128) 0%,
                    rgb(113, 206, 126) 100%
                );
                --wp--preset--gradient--midnight: linear-gradient(135deg, rgb(2, 3, 129) 0%, rgb(40, 116, 252) 100%);
                --wp--preset--duotone--dark-grayscale: url("#wp-duotone-dark-grayscale");
                --wp--preset--duotone--grayscale: url("#wp-duotone-grayscale");
                --wp--preset--duotone--purple-yellow: url("#wp-duotone-purple-yellow");
                --wp--preset--duotone--blue-red: url("#wp-duotone-blue-red");
                --wp--preset--duotone--midnight: url("#wp-duotone-midnight");
                --wp--preset--duotone--magenta-yellow: url("#wp-duotone-magenta-yellow");
                --wp--preset--duotone--purple-green: url("#wp-duotone-purple-green");
                --wp--preset--duotone--blue-orange: url("#wp-duotone-blue-orange");
                --wp--preset--font-size--small: 13px;
                --wp--preset--font-size--medium: 20px;
                --wp--preset--font-size--large: 36px;
                --wp--preset--font-size--x-large: 42px;
            }
            .has-black-color {
                color: var(--wp--preset--color--black) !important;
            }
            .has-cyan-bluish-gray-color {
                color: var(--wp--preset--color--cyan-bluish-gray) !important;
            }
            .has-white-color {
                color: var(--wp--preset--color--white) !important;
            }
            .has-pale-pink-color {
                color: var(--wp--preset--color--pale-pink) !important;
            }
            .has-vivid-red-color {
                color: var(--wp--preset--color--vivid-red) !important;
            }
            .has-luminous-vivid-orange-color {
                color: var(--wp--preset--color--luminous-vivid-orange) !important;
            }
            .has-luminous-vivid-amber-color {
                color: var(--wp--preset--color--luminous-vivid-amber) !important;
            }
            .has-light-green-cyan-color {
                color: var(--wp--preset--color--light-green-cyan) !important;
            }
            .has-vivid-green-cyan-color {
                color: var(--wp--preset--color--vivid-green-cyan) !important;
            }
            .has-pale-cyan-blue-color {
                color: var(--wp--preset--color--pale-cyan-blue) !important;
            }
            .has-vivid-cyan-blue-color {
                color: var(--wp--preset--color--vivid-cyan-blue) !important;
            }
            .has-vivid-purple-color {
                color: var(--wp--preset--color--vivid-purple) !important;
            }
            .has-black-background-color {
                background-color: var(--wp--preset--color--black) !important;
            }
            .has-cyan-bluish-gray-background-color {
                background-color: var(--wp--preset--color--cyan-bluish-gray) !important;
            }
            .has-white-background-color {
                background-color: var(--wp--preset--color--white) !important;
            }
            .has-pale-pink-background-color {
                background-color: var(--wp--preset--color--pale-pink) !important;
            }
            .has-vivid-red-background-color {
                background-color: var(--wp--preset--color--vivid-red) !important;
            }
            .has-luminous-vivid-orange-background-color {
                background-color: var(--wp--preset--color--luminous-vivid-orange) !important;
            }
            .has-luminous-vivid-amber-background-color {
                background-color: var(--wp--preset--color--luminous-vivid-amber) !important;
            }
            .has-light-green-cyan-background-color {
                background-color: var(--wp--preset--color--light-green-cyan) !important;
            }
            .has-vivid-green-cyan-background-color {
                background-color: var(--wp--preset--color--vivid-green-cyan) !important;
            }
            .has-pale-cyan-blue-background-color {
                background-color: var(--wp--preset--color--pale-cyan-blue) !important;
            }
            .has-vivid-cyan-blue-background-color {
                background-color: var(--wp--preset--color--vivid-cyan-blue) !important;
            }
            .has-vivid-purple-background-color {
                background-color: var(--wp--preset--color--vivid-purple) !important;
            }
            .has-black-border-color {
                border-color: var(--wp--preset--color--black) !important;
            }
            .has-cyan-bluish-gray-border-color {
                border-color: var(--wp--preset--color--cyan-bluish-gray) !important;
            }
            .has-white-border-color {
                border-color: var(--wp--preset--color--white) !important;
            }
            .has-pale-pink-border-color {
                border-color: var(--wp--preset--color--pale-pink) !important;
            }
            .has-vivid-red-border-color {
                border-color: var(--wp--preset--color--vivid-red) !important;
            }
            .has-luminous-vivid-orange-border-color {
                border-color: var(--wp--preset--color--luminous-vivid-orange) !important;
            }
            .has-luminous-vivid-amber-border-color {
                border-color: var(--wp--preset--color--luminous-vivid-amber) !important;
            }
            .has-light-green-cyan-border-color {
                border-color: var(--wp--preset--color--light-green-cyan) !important;
            }
            .has-vivid-green-cyan-border-color {
                border-color: var(--wp--preset--color--vivid-green-cyan) !important;
            }
            .has-pale-cyan-blue-border-color {
                border-color: var(--wp--preset--color--pale-cyan-blue) !important;
            }
            .has-vivid-cyan-blue-border-color {
                border-color: var(--wp--preset--color--vivid-cyan-blue) !important;
            }
            .has-vivid-purple-border-color {
                border-color: var(--wp--preset--color--vivid-purple) !important;
            }
            .has-vivid-cyan-blue-to-vivid-purple-gradient-background {
                background: var(--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple) !important;
            }
            .has-light-green-cyan-to-vivid-green-cyan-gradient-background {
                background: var(--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan) !important;
            }
            .has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background {
                background: var(--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange) !important;
            }
            .has-luminous-vivid-orange-to-vivid-red-gradient-background {
                background: var(--wp--preset--gradient--luminous-vivid-orange-to-vivid-red) !important;
            }
            .has-very-light-gray-to-cyan-bluish-gray-gradient-background {
                background: var(--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray) !important;
            }
            .has-cool-to-warm-spectrum-gradient-background {
                background: var(--wp--preset--gradient--cool-to-warm-spectrum) !important;
            }
            .has-blush-light-purple-gradient-background {
                background: var(--wp--preset--gradient--blush-light-purple) !important;
            }
            .has-blush-bordeaux-gradient-background {
                background: var(--wp--preset--gradient--blush-bordeaux) !important;
            }
            .has-luminous-dusk-gradient-background {
                background: var(--wp--preset--gradient--luminous-dusk) !important;
            }
            .has-pale-ocean-gradient-background {
                background: var(--wp--preset--gradient--pale-ocean) !important;
            }
            .has-electric-grass-gradient-background {
                background: var(--wp--preset--gradient--electric-grass) !important;
            }
            .has-midnight-gradient-background {
                background: var(--wp--preset--gradient--midnight) !important;
            }
            .has-small-font-size {
                font-size: var(--wp--preset--font-size--small) !important;
            }
            .has-medium-font-size {
                font-size: var(--wp--preset--font-size--medium) !important;
            }
            .has-large-font-size {
                font-size: var(--wp--preset--font-size--large) !important;
            }
            .has-x-large-font-size {
                font-size: var(--wp--preset--font-size--x-large) !important;
            }
        </style>
        <link
            rel="stylesheet"
            id="editor-style-css"
            href="blog/wpcontent/themes/editor/style.css"
            type="text/css"
            media="all"
        />
        <link
            rel="stylesheet"
            id="editor-font-awesome-css-css"
            href="blog/wpcontent/themes/editor/inc/fontawesome/font-awesome.css"
            type="text/css"
            media="screen"
        />
        <!--[if IE]>
            <link
                rel="stylesheet"
                id="ie7-style-css"
                href="themes/editor/inc/styles/ie.css"
                type="text/css"
                media="all"
            />
        <![endif]-->
        <link
            rel="stylesheet"
            id="editor-fonts-css"
            href="//fonts.googleapis.com/css?family=Source+Sans+Pro%3A400%2C600%2C700%2C400italic%2C600italic%2C700italic%7CRoboto+Condensed%3A300%2C400%2C700%2C300italic%2C400italic%2C700italic&#038;subset=latin%2Clatin-ext"
            type="text/css"
            media="all"
        />

        <script
            type="text/javascript"
            src="blog/scripts/js/jquery/jquery.min.js"
            id="jquery-core-js"
        ></script>
        <script
            type="text/javascript"
            src="blog/scripts/js/jquery/jquery-migrate.min.js"
            id="jquery-migrate-js"
        ></script>
        <link rel="https://api.w.org/" href="blog/wpjson/" />
        <link rel="alternate" type="application/json" href="blog/wpjson/wp/v2/tags/129" />
        <link rel="EditURI" type="application/rsd+xml" title="RSD" href="blog/xmlrpc.php?rsd" />
        <link rel="wlwmanifest" type="application/wlwmanifest+xml" href="blog/scripts/wlwmanifest.xml" />
        <meta name="generator" content="WordPress 6.0" />
        <link
            rel="stylesheet"
            type="text/css"
            href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.css"
        />
        <script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.js"></script>
        <script>
            window.addEventListener("load", function () {
                window.cookieconsent.initialise({
                    palette: {
                        popup: {
                            background: "#000",
                        },
                        button: {
                            background: "#f1d600",
                        },
                    },
                });
            });
        </script>
        <style>
            img#wpstats {
                display: none;
            }
        </style>

        <!-- Jetpack Open Graph Tags -->
        <meta property="og:type" content="website" />
        <meta property="og:title" content="MongoDB &#8211; WiredPrairie" />
        <meta property="og:url" content="/index.php/archives/tag/mongodb" />
        <meta property="og:site_name" content="WiredPrairie" />
        <meta property="og:image" content="https://s0.wp.com/i/blank.jpg" />
        <meta property="og:image:alt" content="" />
        <meta property="og:locale" content="en_US" />

        <!-- End Jetpack Open Graph Tags -->
    </head>

    <body class="archive tag tag-mongodb tag-129 group-blog">
        <div id="page" class="hfeed site container">
            <a class="skip-link screen-reader-text" href="#content">Skip to content</a>

            <!-- Get sidebar color option (Appearance -> Customize -> Theme Options) -->
            <header id="masthead" class="site-header light" role="banner">
                <!-- Tab navigation -->
                <ul class="toggle-bar" role="tablist">
                    <!-- Main navigation -->
                    <li id="panel-1" class="current" role="presentation">
                        <a
                            href="#tab-1"
                            role="tab"
                            aria-controls="tab-1"
                            aria-selected="true"
                            class="current nav-toggle"
                            data-tab="tab-1"
                            ><i class="fa fa-bars"></i><span class="screen-reader-text">View menu</span></a
                        >
                    </li>

                    <!-- Featured Posts navigation -->
                    <li id="panel-2" role="presentation">
                        <a href="#tab-2" role="tab" aria-controls="tab-2" aria-selected="false" data-tab="tab-2"
                            ><i class="fa fa-thumb-tack"></i
                            ><span class="screen-reader-text">View featured posts</span></a
                        >
                    </li>

                    <!-- Sidebar widgets navigation -->
                    <li id="panel-3" role="presentation">
                        <a
                            href="#tab-3"
                            role="tab"
                            aria-controls="tab-3"
                            aria-selected="false"
                            class="folder-toggle"
                            data-tab="tab-3"
                            ><i class="fa fa-folder"></i><i class="fa fa-folder-open"></i
                            ><span class="screen-reader-text">View sidebar</span></a
                        >
                    </li>
                </ul>

                <div id="tabs" class="toggle-tabs">
                    <div class="site-header-inside">
                        <!-- Logo, description and main navigation -->
                        <div id="tab-1" class="tab-content current fadeIn">
                            <div class="site-branding">
                                <!-- Get the site branding -->
                                <h1 class="site-title"><a href="blog/" rel="home">WiredPrairie</a></h1>
                                <h2 class="site-description">Yet another tech blog.</h2>
                            </div>

                            <nav id="site-navigation" class="main-navigation" role="navigation">
                                <div class="menu">
                                    <ul>
                                        <li><a href="blog/">Home</a></li>
                                        <li class="page_item page-item-2"><a href="blog/about">About</a></li>
                                        <li class="page_item page-item-28">
                                            <a href="blog/contact">Contact Me</a>
                                        </li>
                                    </ul>
                                </div>
                            </nav>
                            <!-- #site-navigation -->
                        </div>
                        <!-- #tab-1 -->

                        <!-- Featured Posts template (template-featured-posts.php) -->

                        <div id="tab-2" class="widget-area tab-content animated fadeIn">
                            <div class="widget featured-posts-widget">
                                <h2 class="widget-title">Recommendations</h2>

                                <div class="featured-posts">
                                    <div class="featured-post">
                                        <a
                                            class="featured-post-image"
                                            href="blog/archives/2278"
                                            rel="bookmark"
                                            ><img
                                                width="600"
                                                height="400"
                                                src="blog/wpcontent/uploads/2018/07/Photo-Jul-23-7-23-26-PM-600x400.jpg"
                                                class="attachment-featured-post-image size-featured-post-image wp-post-image"
                                                alt=""
                                                loading="lazy"
                                                data-attachment-id="2292"
                                                data-permalink="/index.php/archives/2278/photo-jul-23-7-23-26-pm"
                                                data-orig-file="uploads/2018/07/Photo-Jul-23-7-23-26-PM.jpg"
                                                data-orig-size="4032,3024"
                                                data-comments-opened="1"
                                                data-image-meta='{"aperture":"2.2","credit":"","camera":"iPhone 6s","caption":"","created_timestamp":"1532373806","copyright":"","focal_length":"4.15","iso":"320","shutter_speed":"0.066666666666667","title":"","orientation":"1"}'
                                                data-image-title="Photo Jul 23, 7 23 26 PM"
                                                data-image-description=""
                                                data-image-caption=""
                                                data-medium-file="uploads/2018/07/Photo-Jul-23-7-23-26-PM-300x225.jpg"
                                                data-large-file="uploads/2018/07/Photo-Jul-23-7-23-26-PM-1024x768.jpg"
                                        /></a>
                                        <h3>
                                            <a href="blog/archives/2278" rel="bookmark"
                                                >You don&#8217;t need it, but you might want it any way: Ubiquiti
                                                Unifi</a
                                            >
                                        </h3>

                                        <div class="featured-post-meta">
                                            <div class="featured-post-date">
                                                <i class="fa fa-clock-o"></i>
                                                <span class="posted-on"
                                                    ><a href="blog/archives/2278" rel="bookmark"
                                                        ><time
                                                            class="entry-date published"
                                                            datetime="2018-07-25T20:27:43-05:00"
                                                            >July 25, 2018</time
                                                        ></a
                                                    ></span
                                                ><span class="byline"> by </span>
                                                <span class="author vcard"
                                                    ><a class="url fn n" href="blog/archives/author/aaron"
                                                        >Aaron</a
                                                    ></span
                                                >
                                            </div>
                                        </div>
                                    </div>
                                    <div class="featured-post">
                                        <a
                                            class="featured-post-image"
                                            href="blog/archives/2197"
                                            rel="bookmark"
                                            ><img
                                                width="600"
                                                height="400"
                                                src="blog/wpcontent/uploads/2018/02/2018-02-16-20_23_15-AmazonSmile_-Pure-Green-100-Natural-Latex-Mattress-Topper-Firm-3_-King-Size-600x400.png"
                                                class="attachment-featured-post-image size-featured-post-image wp-post-image"
                                                alt="Mattress-Firm"
                                                loading="lazy"
                                                data-attachment-id="2198"
                                                data-permalink="/index.php/archives/2197/2018-02-16-20_23_15-amazonsmile_-pure-green-100-natural-latex-mattress-topper-firm-3_-king-size"
                                                data-orig-file="uploads/2018/02/2018-02-16-20_23_15-AmazonSmile_-Pure-Green-100-Natural-Latex-Mattress-Topper-Firm-3_-King-Size.png"
                                                data-orig-size="1067,807"
                                                data-comments-opened="1"
                                                data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}'
                                                data-image-title="Pure Green 100% Natural Latex Mattress Topper &#8211; Firm"
                                                data-image-description=""
                                                data-image-caption="&lt;p&gt;Pure Green 100% Natural Latex Mattress Topper &#8211; Firm&lt;/p&gt;
"
                                                data-medium-file="uploads/2018/02/2018-02-16-20_23_15-AmazonSmile_-Pure-Green-100-Natural-Latex-Mattress-Topper-Firm-3_-King-Size-300x227.png"
                                                data-large-file="uploads/2018/02/2018-02-16-20_23_15-AmazonSmile_-Pure-Green-100-Natural-Latex-Mattress-Topper-Firm-3_-King-Size-1024x774.png"
                                        /></a>
                                        <h3>
                                            <a href="blog/archives/2197" rel="bookmark"
                                                >How to make your too soft Tempur-pedic Bed comfortable</a
                                            >
                                        </h3>

                                        <div class="featured-post-meta">
                                            <div class="featured-post-date">
                                                <i class="fa fa-clock-o"></i>
                                                <span class="posted-on"
                                                    ><a href="blog/archives/2197" rel="bookmark"
                                                        ><time
                                                            class="entry-date published"
                                                            datetime="2018-02-17T09:59:38-06:00"
                                                            >February 17, 2018</time
                                                        ><time class="updated" datetime="2018-02-17T12:05:52-06:00"
                                                            >February 17, 2018</time
                                                        ></a
                                                    ></span
                                                ><span class="byline"> by </span>
                                                <span class="author vcard"
                                                    ><a class="url fn n" href="blog/archives/author/aaron"
                                                        >Aaron</a
                                                    ></span
                                                >
                                            </div>
                                        </div>
                                    </div>
                                    <div class="featured-post">
                                        <a
                                            class="featured-post-image"
                                            href="blog/archives/2124"
                                            rel="bookmark"
                                            ><img
                                                width="600"
                                                height="400"
                                                src="blog/wpcontent/uploads/2016/11/TicketToRideBanner-600x400.jpg"
                                                class="attachment-featured-post-image size-featured-post-image wp-post-image"
                                                alt=""
                                                loading="lazy"
                                                data-attachment-id="2138"
                                                data-permalink="/index.php/archives/2124/tickettoridebanner"
                                                data-orig-file="uploads/2016/11/TicketToRideBanner.jpg"
                                                data-orig-size="1920,873"
                                                data-comments-opened="1"
                                                data-image-meta='{"aperture":"2.2","credit":"","camera":"iPhone 6s","caption":"","created_timestamp":"0","copyright":"","focal_length":"4.2","iso":"320","shutter_speed":"0.066666666666667","title":"","orientation":"1"}'
                                                data-image-title="tickettoridebanner"
                                                data-image-description=""
                                                data-image-caption=""
                                                data-medium-file="uploads/2016/11/TicketToRideBanner-300x136.jpg"
                                                data-large-file="uploads/2016/11/TicketToRideBanner-1024x466.jpg"
                                        /></a>
                                        <h3>
                                            <a href="blog/archives/2124" rel="bookmark"
                                                >Alternatives to Monopoly: Some table-top board games you should try</a
                                            >
                                        </h3>

                                        <div class="featured-post-meta">
                                            <div class="featured-post-date">
                                                <i class="fa fa-clock-o"></i>
                                                <span class="posted-on"
                                                    ><a href="blog/archives/2124" rel="bookmark"
                                                        ><time
                                                            class="entry-date published"
                                                            datetime="2016-11-28T07:25:48-06:00"
                                                            >November 28, 2016</time
                                                        ><time class="updated" datetime="2017-04-04T20:19:50-05:00"
                                                            >April 4, 2017</time
                                                        ></a
                                                    ></span
                                                ><span class="byline"> by </span>
                                                <span class="author vcard"
                                                    ><a class="url fn n" href="blog/archives/author/aaron"
                                                        >Aaron</a
                                                    ></span
                                                >
                                            </div>
                                        </div>
                                    </div>
                                    <div class="featured-post">
                                        <h3>
                                            <a href="blog/archives/2119" rel="bookmark"
                                                >Geek gift ideas 2016</a
                                            >
                                        </h3>

                                        <div class="featured-post-meta">
                                            <div class="featured-post-date">
                                                <i class="fa fa-clock-o"></i>
                                                <span class="posted-on"
                                                    ><a href="blog/archives/2119" rel="bookmark"
                                                        ><time
                                                            class="entry-date published"
                                                            datetime="2016-11-27T11:30:00-06:00"
                                                            >November 27, 2016</time
                                                        ><time class="updated" datetime="2017-04-04T20:20:17-05:00"
                                                            >April 4, 2017</time
                                                        ></a
                                                    ></span
                                                ><span class="byline"> by </span>
                                                <span class="author vcard"
                                                    ><a class="url fn n" href="blog/archives/author/aaron"
                                                        >Aaron</a
                                                    ></span
                                                >
                                            </div>
                                        </div>
                                    </div>
                                    <div class="featured-post">
                                        <h3>
                                            <a href="blog/archives/2115" rel="bookmark"
                                                >Changing password requirements in Linux Subsystem for Windows (or Bash
                                                on Ubuntu on Windows)</a
                                            >
                                        </h3>

                                        <div class="featured-post-meta">
                                            <div class="featured-post-date">
                                                <i class="fa fa-clock-o"></i>
                                                <span class="posted-on"
                                                    ><a href="blog/archives/2115" rel="bookmark"
                                                        ><time
                                                            class="entry-date published"
                                                            datetime="2016-11-23T07:47:54-06:00"
                                                            >November 23, 2016</time
                                                        ></a
                                                    ></span
                                                ><span class="byline"> by </span>
                                                <span class="author vcard"
                                                    ><a class="url fn n" href="blog/archives/author/aaron"
                                                        >Aaron</a
                                                    ></span
                                                >
                                            </div>
                                        </div>
                                    </div>
                                    <div class="featured-post">
                                        <a
                                            class="featured-post-image"
                                            href="blog/archives/2096"
                                            rel="bookmark"
                                            ><img
                                                width="600"
                                                height="400"
                                                src="blog/wpcontent/uploads/2016/11/02_ecobee3_family2-600x400.jpg"
                                                class="attachment-featured-post-image size-featured-post-image wp-post-image"
                                                alt=""
                                                loading="lazy"
                                                data-attachment-id="2112"
                                                data-permalink="/index.php/archives/2096/02_ecobee3_family2"
                                                data-orig-file="uploads/2016/11/02_ecobee3_family2.jpg"
                                                data-orig-size="1198,400"
                                                data-comments-opened="1"
                                                data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}'
                                                data-image-title="02_ecobee3_family2"
                                                data-image-description=""
                                                data-image-caption=""
                                                data-medium-file="uploads/2016/11/02_ecobee3_family2-300x100.jpg"
                                                data-large-file="uploads/2016/11/02_ecobee3_family2-1024x342.jpg"
                                        /></a>
                                        <h3>
                                            <a href="blog/archives/2096" rel="bookmark"
                                                >Ecobeeâ€™s ecobee3 Thermostat</a
                                            >
                                        </h3>

                                        <div class="featured-post-meta">
                                            <div class="featured-post-date">
                                                <i class="fa fa-clock-o"></i>
                                                <span class="posted-on"
                                                    ><a href="blog/archives/2096" rel="bookmark"
                                                        ><time
                                                            class="entry-date published"
                                                            datetime="2016-11-19T09:10:36-06:00"
                                                            >November 19, 2016</time
                                                        ><time class="updated" datetime="2016-11-19T09:17:51-06:00"
                                                            >November 19, 2016</time
                                                        ></a
                                                    ></span
                                                ><span class="byline"> by </span>
                                                <span class="author vcard"
                                                    ><a class="url fn n" href="blog/archives/author/aaron"
                                                        >Aaron</a
                                                    ></span
                                                >
                                            </div>
                                        </div>
                                    </div>
                                    <div class="featured-post">
                                        <h3>
                                            <a href="blog/archives/2039" rel="bookmark"
                                                >Made in the USA Camera Bag Manufacturers</a
                                            >
                                        </h3>

                                        <div class="featured-post-meta">
                                            <div class="featured-post-date">
                                                <i class="fa fa-clock-o"></i>
                                                <span class="posted-on"
                                                    ><a href="blog/archives/2039" rel="bookmark"
                                                        ><time
                                                            class="entry-date published"
                                                            datetime="2016-03-21T20:26:43-05:00"
                                                            >March 21, 2016</time
                                                        ><time class="updated" datetime="2016-03-23T09:40:26-05:00"
                                                            >March 23, 2016</time
                                                        ></a
                                                    ></span
                                                ><span class="byline"> by </span>
                                                <span class="author vcard"
                                                    ><a class="url fn n" href="blog/archives/author/aaron"
                                                        >Aaron</a
                                                    ></span
                                                >
                                            </div>
                                        </div>
                                    </div>
                                    <div class="featured-post">
                                        <h3>
                                            <a href="blog/archives/2020" rel="bookmark"
                                                >My Raspberry Pi 2 Model B setup</a
                                            >
                                        </h3>

                                        <div class="featured-post-meta">
                                            <div class="featured-post-date">
                                                <i class="fa fa-clock-o"></i>
                                                <span class="posted-on"
                                                    ><a href="blog/archives/2020" rel="bookmark"
                                                        ><time
                                                            class="entry-date published"
                                                            datetime="2015-03-09T20:48:37-05:00"
                                                            >March 9, 2015</time
                                                        ></a
                                                    ></span
                                                ><span class="byline"> by </span>
                                                <span class="author vcard"
                                                    ><a class="url fn n" href="blog/archives/author/aaron"
                                                        >Aaron</a
                                                    ></span
                                                >
                                            </div>
                                        </div>
                                    </div>
                                    <div class="featured-post">
                                        <h3>
                                            <a href="blog/archives/2011" rel="bookmark"
                                                >Kenu Airframe Portable Car Mount</a
                                            >
                                        </h3>

                                        <div class="featured-post-meta">
                                            <div class="featured-post-date">
                                                <i class="fa fa-clock-o"></i>
                                                <span class="posted-on"
                                                    ><a href="blog/archives/2011" rel="bookmark"
                                                        ><time
                                                            class="entry-date published"
                                                            datetime="2015-01-18T11:21:50-06:00"
                                                            >January 18, 2015</time
                                                        ></a
                                                    ></span
                                                ><span class="byline"> by </span>
                                                <span class="author vcard"
                                                    ><a class="url fn n" href="blog/archives/author/aaron"
                                                        >Aaron</a
                                                    ></span
                                                >
                                            </div>
                                        </div>
                                    </div>
                                    <div class="featured-post">
                                        <h3>
                                            <a href="blog/archives/2006" rel="bookmark"
                                                >Attaching a GoPro Hero with Aero Bars from RedShift</a
                                            >
                                        </h3>

                                        <div class="featured-post-meta">
                                            <div class="featured-post-date">
                                                <i class="fa fa-clock-o"></i>
                                                <span class="posted-on"
                                                    ><a href="blog/archives/2006" rel="bookmark"
                                                        ><time
                                                            class="entry-date published"
                                                            datetime="2014-08-07T20:48:50-05:00"
                                                            >August 7, 2014</time
                                                        ></a
                                                    ></span
                                                ><span class="byline"> by </span>
                                                <span class="author vcard"
                                                    ><a class="url fn n" href="blog/archives/author/aaron"
                                                        >Aaron</a
                                                    ></span
                                                >
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- .featured-posts -->
                            </div>
                            <!-- .featured-posts-widget -->
                        </div>
                        <!-- #tab-2 .widget-area -->

                        <!-- Sidebar widgets -->
                        <div
                            id="tab-3"
                            class="tab-content animated fadeIn"
                            role="tabpanel"
                            aria-labelledby="panel-3"
                            aria-hidden="true"
                        >
                            <div id="secondary" class="widget-area" role="complementary">
                                <aside id="pages-2" class="widget widget_pages">
                                    <h2 class="widget-title">Pages</h2>
                                    <ul>
                                        <li class="page_item page-item-2"><a href="blog/about">About</a></li>
                                        <li class="page_item page-item-28">
                                            <a href="blog/contact">Contact Me</a>
                                        </li>
                                    </ul>
                                </aside>
                                <aside id="archives-2" class="widget widget_archive">
                                    <h2 class="widget-title">Archives</h2>
                                    <ul>
                                        <li><a href="blog/archives/date/2019/10">October 2019</a></li>
                                        <li><a href="blog/archives/date/2018/07">July 2018</a></li>
                                        <li><a href="blog/archives/date/2018/05">May 2018</a></li>
                                        <li><a href="blog/archives/date/2018/04">April 2018</a></li>
                                        <li><a href="blog/archives/date/2018/03">March 2018</a></li>
                                        <li><a href="blog/archives/date/2018/02">February 2018</a></li>
                                        <li><a href="blog/archives/date/2017/04">April 2017</a></li>
                                        <li><a href="blog/archives/date/2017/01">January 2017</a></li>
                                        <li><a href="blog/archives/date/2016/11">November 2016</a></li>
                                        <li><a href="blog/archives/date/2016/10">October 2016</a></li>
                                        <li><a href="blog/archives/date/2016/03">March 2016</a></li>
                                        <li><a href="blog/archives/date/2016/02">February 2016</a></li>
                                        <li><a href="blog/archives/date/2015/03">March 2015</a></li>
                                        <li><a href="blog/archives/date/2015/01">January 2015</a></li>
                                        <li><a href="blog/archives/date/2014/08">August 2014</a></li>
                                        <li><a href="blog/archives/date/2014/05">May 2014</a></li>
                                        <li><a href="blog/archives/date/2014/01">January 2014</a></li>
                                        <li><a href="blog/archives/date/2013/12">December 2013</a></li>
                                        <li><a href="blog/archives/date/2013/10">October 2013</a></li>
                                        <li><a href="blog/archives/date/2013/09">September 2013</a></li>
                                        <li><a href="blog/archives/date/2013/08">August 2013</a></li>
                                        <li><a href="blog/archives/date/2013/07">July 2013</a></li>
                                        <li><a href="blog/archives/date/2013/06">June 2013</a></li>
                                        <li><a href="blog/archives/date/2013/05">May 2013</a></li>
                                        <li><a href="blog/archives/date/2013/03">March 2013</a></li>
                                        <li><a href="blog/archives/date/2013/02">February 2013</a></li>
                                        <li><a href="blog/archives/date/2013/01">January 2013</a></li>
                                        <li><a href="blog/archives/date/2012/12">December 2012</a></li>
                                        <li><a href="blog/archives/date/2012/10">October 2012</a></li>
                                        <li><a href="blog/archives/date/2012/09">September 2012</a></li>
                                        <li><a href="blog/archives/date/2012/08">August 2012</a></li>
                                        <li><a href="blog/archives/date/2012/07">July 2012</a></li>
                                        <li><a href="blog/archives/date/2012/06">June 2012</a></li>
                                        <li><a href="blog/archives/date/2012/05">May 2012</a></li>
                                        <li><a href="blog/archives/date/2012/04">April 2012</a></li>
                                        <li><a href="blog/archives/date/2012/03">March 2012</a></li>
                                        <li><a href="blog/archives/date/2012/02">February 2012</a></li>
                                        <li><a href="blog/archives/date/2012/01">January 2012</a></li>
                                        <li><a href="blog/archives/date/2011/12">December 2011</a></li>
                                        <li><a href="blog/archives/date/2011/11">November 2011</a></li>
                                        <li><a href="blog/archives/date/2011/08">August 2011</a></li>
                                        <li><a href="blog/archives/date/2011/07">July 2011</a></li>
                                        <li><a href="blog/archives/date/2011/06">June 2011</a></li>
                                        <li><a href="blog/archives/date/2011/05">May 2011</a></li>
                                        <li><a href="blog/archives/date/2011/03">March 2011</a></li>
                                        <li><a href="blog/archives/date/2011/02">February 2011</a></li>
                                        <li><a href="blog/archives/date/2011/01">January 2011</a></li>
                                        <li><a href="blog/archives/date/2010/11">November 2010</a></li>
                                        <li><a href="blog/archives/date/2010/10">October 2010</a></li>
                                        <li><a href="blog/archives/date/2010/09">September 2010</a></li>
                                        <li><a href="blog/archives/date/2010/08">August 2010</a></li>
                                        <li><a href="blog/archives/date/2010/07">July 2010</a></li>
                                        <li><a href="blog/archives/date/2010/06">June 2010</a></li>
                                        <li><a href="blog/archives/date/2010/05">May 2010</a></li>
                                        <li><a href="blog/archives/date/2010/04">April 2010</a></li>
                                        <li><a href="blog/archives/date/2010/03">March 2010</a></li>
                                        <li><a href="blog/archives/date/2010/02">February 2010</a></li>
                                        <li><a href="blog/archives/date/2010/01">January 2010</a></li>
                                        <li><a href="blog/archives/date/2009/12">December 2009</a></li>
                                        <li><a href="blog/archives/date/2009/11">November 2009</a></li>
                                        <li><a href="blog/archives/date/2009/10">October 2009</a></li>
                                        <li><a href="blog/archives/date/2009/09">September 2009</a></li>
                                        <li><a href="blog/archives/date/2009/08">August 2009</a></li>
                                        <li><a href="blog/archives/date/2009/07">July 2009</a></li>
                                        <li><a href="blog/archives/date/2009/06">June 2009</a></li>
                                        <li><a href="blog/archives/date/2009/05">May 2009</a></li>
                                        <li><a href="blog/archives/date/2009/04">April 2009</a></li>
                                        <li><a href="blog/archives/date/2009/03">March 2009</a></li>
                                        <li><a href="blog/archives/date/2009/02">February 2009</a></li>
                                        <li><a href="blog/archives/date/2009/01">January 2009</a></li>
                                        <li><a href="blog/archives/date/2008/12">December 2008</a></li>
                                        <li><a href="blog/archives/date/2008/11">November 2008</a></li>
                                        <li><a href="blog/archives/date/2008/10">October 2008</a></li>
                                        <li><a href="blog/archives/date/2008/09">September 2008</a></li>
                                        <li><a href="blog/archives/date/2008/08">August 2008</a></li>
                                        <li><a href="blog/archives/date/2008/07">July 2008</a></li>
                                        <li><a href="blog/archives/date/2008/06">June 2008</a></li>
                                        <li><a href="blog/archives/date/2008/05">May 2008</a></li>
                                        <li><a href="blog/archives/date/2008/04">April 2008</a></li>
                                        <li><a href="blog/archives/date/2008/03">March 2008</a></li>
                                        <li><a href="blog/archives/date/2008/02">February 2008</a></li>
                                    </ul>
                                </aside>
                            </div>
                            <!-- #secondary -->
                        </div>
                        <!-- #tab-3 -->
                    </div>
                    <!-- .site-header-inside -->
                </div>
                <!-- #tabs -->
            </header>
            <!-- #masthead -->

            <div id="content" class="site-content fadeInFast">
                <section id="primary" class="content-area">
                    <main id="main" class="site-main" role="main">
                        <header class="page-header">
                            <h1 class="page-title">Tag / MongoDB</h1>
                        </header>
                        <!-- .page-header -->

                        <!-- If author has a bio, show it. -->

                        <article
                            id="post-1965"
                            class="post post-1965 type-post status-publish format-standard hentry category-general tag-mongodb tag-ruby"
                        >
                            <!-- Grab the featured image -->

                            <header class="entry-header">
                                <div class="entry-date">
                                    <span class="posted-on"
                                        ><a href="blog/archives/1965" rel="bookmark"
                                            ><time class="entry-date published" datetime="2013-10-24T20:39:08-05:00"
                                                >October 24, 2013</time
                                            ><time class="updated" datetime="2013-10-24T20:40:23-05:00"
                                                >October 24, 2013</time
                                            ></a
                                        ></span
                                    ><span class="byline"> by </span>
                                    <span class="author vcard"
                                        ><a class="url fn n" href="blog/archives/author/aaron"
                                            >Aaron</a
                                        ></span
                                    >
                                </div>
                                <!-- .entry-meta -->

                                <h1 class="entry-title">
                                    <a href="blog/archives/1965" rel="bookmark"
                                        >Simple example of using MongoMapper with Ruby</a
                                    >
                                </h1>
                            </header>
                            <!-- .entry-header -->

                            <div class="entry-meta">
                                <ul class="meta-list">
                                    <li class="meta-cat">
                                        <a href="blog/archives/category/general" rel="category tag"
                                            >General</a
                                        >
                                    </li>
                                    <li class="meta-tag">
                                        <a href="blog/archives/tag/mongodb" rel="tag">MongoDB</a>,
                                        <a href="blog/archives/tag/ruby" rel="tag">Ruby</a>
                                    </li>
                                </ul>
                            </div>
                            <div class="entry-content">
                                <p>
                                    The <a href="http://mongomapper.com/" target="_blank">MongoMapper</a> web site is
                                    really lacking on even simple examples, especially those that donâ€™t use Rails. So,
                                    hereâ€™s a simple example that might help someone.
                                </p>
                                <p>From the Gemfile:</p>
                                <div id="codeSnippetWrapper">
                                    <pre
                                        id="codeSnippet"
                                        style="border-top-style: none; overflow: visible; font-size: 8pt; font-family: &#39;Courier New&#39;, courier, monospace; width: 100%; border-bottom-style: none; color: black; padding-bottom: 0px; direction: ltr; text-align: left; padding-top: 0px; border-right-style: none; padding-left: 0px; margin: 0em; border-left-style: none; line-height: 12pt; padding-right: 0px; background-color: #f4f4f4"
                                    >source <span style="color: #006080">'https://rubygems.org'</span><br><br>gem <span style="color: #006080">'mongo_mapper'</span><br></pre>
                                    <p></p>
                                </div>
                                <p>And then the application:</p>
                                <div id="codeSnippetWrapper">
                                    <pre
                                        id="codeSnippet"
                                        style="border-top-style: none; overflow: visible; font-size: 8pt; font-family: &#39;Courier New&#39;, courier, monospace; width: 100%; border-bottom-style: none; color: black; padding-bottom: 0px; direction: ltr; text-align: left; padding-top: 0px; border-right-style: none; padding-left: 0px; margin: 0em; border-left-style: none; line-height: 12pt; padding-right: 0px; background-color: #f4f4f4"
                                    >require <span style="color: #006080">'mongo_mapper'</span><br><br><br># jam it <span style="color: #0000ff">into</span> the <span style="color: #0000ff">database</span> &quot;mm&quot;<font color="#9e7c7c"><br></font>MongoMapper.<span style="color: #0000ff">database</span> = &quot;mm&quot;<br><br><span style="color: #0000ff">class</span> App<br><br>  def create_user<br>    <span style="color: #0000ff">user</span> = <span style="color: #0000ff">User</span>.<span style="color: #0000ff">new</span>(:name =&gt; <span style="color: #006080">'Johnny'</span>)<br>    puts &quot;<span style="color: #0000ff">user</span> created&quot;<br>    <span style="color: #0000ff">user</span>.<span style="color: #0000ff">save</span>!<br>  <span style="color: #0000ff">end</span><br><br>  def find_user<br>    query = <span style="color: #0000ff">User</span>.<span style="color: #0000ff">where</span>(:name =&gt; <span style="color: #006080">'Johnny'</span>)<br>    <span style="color: #0000ff">user</span> = query.<span style="color: #0000ff">first</span>  # just the <span style="color: #0000ff">first</span><br>    <span style="color: #0000ff">if</span> <span style="color: #0000ff">not</span> <span style="color: #0000ff">user</span>.nil?<br>      puts <span style="color: #0000ff">user</span>.id<br>    <span style="color: #0000ff">end</span><br>  <span style="color: #0000ff">end</span><br><br>  def delete_user<br>    query = <span style="color: #0000ff">User</span>.<span style="color: #0000ff">where</span>(:name =&gt; <span style="color: #006080">'Johnny'</span>)<br>    <span style="color: #0000ff">user</span> = query.<span style="color: #0000ff">first</span>  # just the <span style="color: #0000ff">first</span><br><br>    <span style="color: #0000ff">user</span>.<span style="color: #0000ff">destroy</span><br>  <span style="color: #0000ff">end</span><br><span style="color: #0000ff">end</span><br><br><br><span style="color: #0000ff">class</span> <span style="color: #0000ff">User</span><br>  <span style="color: #0000ff">include</span> MongoMapper::Document<br>  <span style="color: #0000ff">key</span> :name,        String<br>  timestamps!<br><span style="color: #0000ff">end</span><br><br>app = App.<span style="color: #0000ff">new</span>()<br>app.create_user<br>app.find_user<br>app.delete_user</pre>
                                    <p></p>
                                </div>
                                <p>The code does a few things:</p>
                                <ol>
                                    <li>Creates a new user with a single field called <strong>name.</strong></li>
                                    <li>Finds the user using the <strong>where</strong> function</li>
                                    <li>Removes (destroys/deletes) the user</li>
                                </ol>
                                <p>
                                    The key things to note are that the <strong>where </strong>function returns a query
                                    and not the actual results. The results are fetched on demand. This is very similar
                                    to the extension methods and LINQ in .NET as those functions build a query that
                                    executed only when the results are first requested.
                                </p>
                                <p>
                                    The same thing is true of MongoMapper in this case. The results are not returned
                                    until the <strong>first</strong> function is called. Alternatively,
                                    <strong>all</strong> or <strong>last </strong>could have been used.
                                    <strong>all</strong> of course returning a list of results that could be iterated in
                                    a loop.
                                </p>
                                <p>
                                    If there were no results, the result of calling <strong>first</strong> in this
                                    example would be that the <strong>user</strong> variable would be
                                    <strong>nil. </strong>
                                </p>
                                <p>
                                    <em
                                        >The <strong>delete_user </strong>function above has absolutely no error
                                        checking.
                                    </em>
                                </p>
                            </div>
                            <!-- .entry-content -->
                        </article>
                        <!-- #post-## -->

                        <div class="code-block code-block-1" style="margin: 8px 0; clear: both">
                            <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
                            <ins
                                class="adsbygoogle"
                                style="display: block"
                                data-ad-format="fluid"
                                data-ad-layout-key="-fg+5r+6l-ft+4e"
                                data-ad-client="ca-pub-2328055154157951"
                                data-ad-slot="9395646477"
                            ></ins>
                            <script>
                                (adsbygoogle = window.adsbygoogle || []).push({});
                            </script>
                        </div>

                        <article
                            id="post-1928"
                            class="post post-1928 type-post status-publish format-standard hentry category-coding tag-mongodb tag-mongoose"
                        >
                            <!-- Grab the featured image -->

                            <header class="entry-header">
                                <div class="entry-date">
                                    <span class="posted-on"
                                        ><a href="blog/archives/1928" rel="bookmark"
                                            ><time class="entry-date published" datetime="2013-08-26T07:44:10-05:00"
                                                >August 26, 2013</time
                                            ><time class="updated" datetime="2022-06-29T10:26:05-05:00"
                                                >June 29, 2022</time
                                            ></a
                                        ></span
                                    ><span class="byline"> by </span>
                                    <span class="author vcard"
                                        ><a class="url fn n" href="blog/archives/author/aaron"
                                            >Aaron</a
                                        ></span
                                    >
                                </div>
                                <!-- .entry-meta -->

                                <h1 class="entry-title">
                                    <a href="blog/archives/1928" rel="bookmark"
                                        >Mongoose plugin runs for every new Schema</a
                                    >
                                </h1>
                            </header>
                            <!-- .entry-header -->

                            <div class="entry-meta">
                                <ul class="meta-list">
                                    <li class="meta-cat">
                                        <a href="blog/archives/category/coding" rel="category tag">Coding</a>
                                    </li>
                                    <li class="meta-tag">
                                        <a href="blog/archives/tag/mongodb" rel="tag">MongoDB</a>,
                                        <a href="blog/archives/tag/mongoose" rel="tag">Mongoose</a>
                                    </li>
                                </ul>
                            </div>
                            <div class="entry-content">
                                <p>
                                    If you want to consistently apply changes to every
                                    <a href="http://mongoosejs.com/docs/guide.html" target="_blank" rel="noopener"
                                        >Schema</a
                                    >
                                    in
                                    <a href="http://mongoosejs.com/index.html" target="_blank" rel="noopener"
                                        >Mongoose</a
                                    >, itâ€™s simple. Below is an example.
                                </p>

                                <pre
                                    class="wp-block-preformatted"
                                ><span class="kwrd">var</span> mongoose = require(<span class="str">'mongoose'</span>);

<span class="kwrd">var</span> checkForHexRegExp = <span class="kwrd">new</span> RegExp(<span class="str">"^[0-9a-fA-F]{24}</span>");
mongoose.plugin(<span class="kwrd">function</span>(schema, opts) { 
    schema.statics.isObjectId = <span class="kwrd">function</span>(id) { 
        <span class="kwrd">if</span>(id) { 
            <span class="kwrd">return</span> checkForHexRegExp.test(id); 
        } 
        <span class="kwrd">return</span> <span class="kwrd">false</span>; 
    }; 
}); 
<span class="kwrd">var</span> AnimalSchema = mongoose.Schema({ name: String }); 
<span class="kwrd">var</span> Animal = mongoose.model(<span class="str">"Animal"</span>, AnimalSchema); <span class="kwrd">if</span>(Animal.isObjectId(<span class="str">"521b4891039857e07aae695a"</span>)) { 
    <span class="kwrd">var</span> animal = <span class="kwrd">new</span> Animal(); <span class="rem">// something more interesting here ...</span> 
}</pre>

                                <p>
                                    The code above uses the <strong>plugin</strong> function on the global mongoose
                                    object to add a new plugin. When you add a plugin using that technique, it runs for
                                    every schema that is constructed.
                                </p>

                                <p>
                                    So, in this case, Iâ€™ve added a static function to every Schema called
                                    <strong>isObjectId</strong> which uses a simple regular expression (<a
                                        href="https://github.com/mongodb/js-bson/blob/master/lib/bson/objectid.js#L16"
                                        target="_blank"
                                        rel="noopener"
                                        >liberally borrowed</a
                                    >
                                    straight from the bson ObjectId source code) to test whether a string looks like a
                                    valid ObjectId (in fact, a 24 character HEX string).
                                </p>

                                <p>
                                    Now, as new models are created (<strong>mongoose.model)</strong>, the Schema is
                                    first passed to any defined plugins. The plugin adds the new function
                                    <strong>isObjectId</strong>. As you can see, the new <strong>Model</strong> has a
                                    static method called <strong>isObjectId</strong>.
                                </p>

                                <p>
                                    The plugin will not affect any Schemas/Models that were defined before the plugin
                                    was added.
                                </p>

                                <p>
                                    Using this technique, you could add standardized fields, indexes, etc. without
                                    repeating the same code to all Schemas. Of course, you can also use the
                                    <strong>plugin</strong> method defined on a Schema to selectively add functionality.
                                </p>

                                <pre
                                    class="wp-block-preformatted"
                                ><span class="kwrd">var</span> isObjectIdPlugin = <span class="kwrd">function</span>(schema, opts) {
    schema.statics.isObjectId = <span class="kwrd">function</span>(id) {
        <span class="kwrd">if</span>(id) {
            <span class="kwrd">return</span> checkForHexRegExp.test(id);
        }
        <span class="kwrd">return</span> <span class="kwrd">false</span>;
    };
};


<span class="kwrd">var</span> AnimalSchema = mongoose.Schema({
    name: String
});

AnimalSchema.plugin(isObjectIdPlugin);

<span class="kwrd">var</span> Animal = mongoose.model(<span class="str">"Animal"</span>, AnimalSchema);

<span class="kwrd">if</span>(Animal.isObjectId(<span class="str">"521b4891039857e07aae695a"</span>)) {
    <span class="kwrd">var</span> animal = <span class="kwrd">new</span> Animal();
    <span class="rem">// something more interesting here ...</span>
}</pre>

                                <p></p>

                                <p>
                                    Above, the code applies the plugin to only the AnimalSchema using the
                                    <strong>plugin</strong> method.
                                </p>

                                <p>
                                    <em
                                        >Of course, adding the same method statically may not be very useful â€“ instead
                                        it probably belongs somewhere in a utility class (and really itâ€™s too bad itâ€™s
                                        not just exposed directly by the BSON ObjectId class).</em
                                    >
                                </p>
                            </div>
                            <!-- .entry-content -->
                        </article>
                        <!-- #post-## -->

                        <div class="code-block code-block-1" style="margin: 8px 0; clear: both">
                            <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
                            <ins
                                class="adsbygoogle"
                                style="display: block"
                                data-ad-format="fluid"
                                data-ad-layout-key="-fg+5r+6l-ft+4e"
                                data-ad-client="ca-pub-2328055154157951"
                                data-ad-slot="9395646477"
                            ></ins>
                            <script>
                                (adsbygoogle = window.adsbygoogle || []).push({});
                            </script>
                        </div>

                        <article
                            id="post-1895"
                            class="post post-1895 type-post status-publish format-standard hentry category-coding tag-mongodb"
                        >
                            <!-- Grab the featured image -->

                            <header class="entry-header">
                                <div class="entry-date">
                                    <span class="posted-on"
                                        ><a href="blog/archives/1895" rel="bookmark"
                                            ><time class="entry-date published" datetime="2013-07-14T10:32:29-05:00"
                                                >July 14, 2013</time
                                            ><time class="updated" datetime="2022-06-29T10:35:18-05:00"
                                                >June 29, 2022</time
                                            ></a
                                        ></span
                                    ><span class="byline"> by </span>
                                    <span class="author vcard"
                                        ><a class="url fn n" href="blog/archives/author/aaron"
                                            >Aaron</a
                                        ></span
                                    >
                                </div>
                                <!-- .entry-meta -->

                                <h1 class="entry-title">
                                    <a href="blog/archives/1895" rel="bookmark"
                                        >Using $inc to increment a field in a sub-document in an array and a field in
                                        main document</a
                                    >
                                </h1>
                            </header>
                            <!-- .entry-header -->

                            <div class="entry-meta">
                                <ul class="meta-list">
                                    <li class="meta-cat">
                                        <a href="blog/archives/category/coding" rel="category tag">Coding</a>
                                    </li>
                                    <li class="meta-tag">
                                        <a href="blog/archives/tag/mongodb" rel="tag">MongoDB</a>
                                    </li>
                                </ul>
                            </div>
                            <div class="entry-content">
                                <p>
                                    (Blog post inspired by
                                    <a
                                        href="http://stackoverflow.com/questions/17639651/mongodb-aggregation-framework"
                                        target="_blank"
                                        rel="noopener"
                                        >question I answered</a
                                    >
                                    on StackOverflow)
                                </p>
                                <p>Lets say you have a schema in MongoDB that looks something like this:</p>
                                <pre class="csharpcode">{
  <span class="str">'_id'</span> : <span class="str">'star_wars'</span>,
  <span class="str">'count'</span> : 1234,
  <span class="str">'spellings'</span> : [ 
    { spelling: <span class="str">'Star wars'</span>, total: 10}, 
    { spelling: <span class="str">'Star Wars'</span>, total : 15}, 
    { spelling: <span class="str">'sTaR WaRs'</span>, total : 5} ]
}</pre>
                                <p>
                                    Atomically, youâ€™d like to update two fields at one time, the total for a particular
                                    spelling which is in a sub document in an array, and the overall count field.
                                </p>
                                <p>
                                    The way to handle this is to take advantage of the
                                    <a
                                        href="http://docs.mongodb.org/manual/reference/operator/positional/"
                                        target="_blank"
                                        rel="noopener"
                                        >positional array operator</a
                                    >
                                    and the
                                    <strong
                                        ><a
                                            href="http://docs.mongodb.org/manual/reference/operator/inc/"
                                            target="_blank"
                                            rel="noopener"
                                            >$inc</a
                                        ></strong
                                    >
                                    operator.
                                </p>
                                <p>Starting with just updating the count, thatâ€™s easy:</p>
                                <pre class="csharpcode">db.movies.update( 
    {_id: <span class="str">"star_wars"</span>}, 
    { $inc : { <span class="str">'count'</span> : 1 }}
)</pre>
                                <p>
                                    The query matches on the document with the <strong>_id</strong> of
                                    <strong>star_wars</strong>, and increments the <strong>count </strong>by 1.
                                </p>
                                <p>
                                    The positional operator is where the mongo-magic comes into play here. If you wanted
                                    to just update a single sub-document in the array, add it to the query. First, weâ€™ll
                                    try finding the right document:
                                </p>
                                <pre class="csharpcode">db.movies.find( {
    _id: <span class="str">"star_wars"</span>, 
    <span class="str">'spellings.spelling'</span> : <span class="str">"Star Wars"</span> }
)</pre>
                                <p>
                                    That matches the right document, but also returns all of the elements of the array.
                                </p>
                                <p>
                                    But, wait, thereâ€™s more! When you match on an element/document of an array, the
                                    position of the match is remembered and can be used in the update phase. You do that
                                    using the positional operator. Using the document above, youâ€™ll use this:
                                    <strong>spellings.$.total</strong>. If you knew the specific index into the array,
                                    the <strong>$</strong> could have been replaced with the zero-based index number
                                    (like a <strong>1</strong> for example in this case:
                                    <strong>spellings.1.total</strong>).
                                </p>
                                <p>
                                    Putting it all together then results in a slick and simple way of incrementing
                                    multiple fields in a document.
                                </p>
                                <pre class="csharpcode">db.movies.update( 
    {_id: <span class="str">"star_wars"</span>,
     <span class="str">'spellings.spelling'</span> : <span class="str">"Star Wars"</span> },
    { $inc : 
        { <span class="str">'spellings.$.total'</span> : 1, 
        <span class="str">'count'</span> : 1 }})</pre>
                                <p>Results:</p>
                                <pre class="csharpcode">{
  <span class="str">'_id'</span> : <span class="str">'star_wars'</span>,
  <span class="str">'count'</span> : 1235,
  <span class="str">'spellings'</span> : [ 
    { spelling: <span class="str">'Star wars'</span>, total: 10}, 
    { spelling: <span class="str">'Star Wars'</span>, total : 16}, 
    { spelling: <span class="str">'sTaR WaRs'</span>, total : 5} ]
}</pre>
                            </div>
                            <!-- .entry-content -->
                        </article>
                        <!-- #post-## -->

                        <div class="code-block code-block-1" style="margin: 8px 0; clear: both">
                            <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
                            <ins
                                class="adsbygoogle"
                                style="display: block"
                                data-ad-format="fluid"
                                data-ad-layout-key="-fg+5r+6l-ft+4e"
                                data-ad-client="ca-pub-2328055154157951"
                                data-ad-slot="9395646477"
                            ></ins>
                            <script>
                                (adsbygoogle = window.adsbygoogle || []).push({});
                            </script>
                        </div>

                        <article
                            id="post-1857"
                            class="post post-1857 type-post status-publish format-standard hentry category-coding tag-mongodb"
                        >
                            <!-- Grab the featured image -->

                            <header class="entry-header">
                                <div class="entry-date">
                                    <span class="posted-on"
                                        ><a href="blog/archives/1857" rel="bookmark"
                                            ><time class="entry-date published" datetime="2013-03-10T13:45:41-05:00"
                                                >March 10, 2013</time
                                            ><time class="updated" datetime="2013-03-10T13:45:44-05:00"
                                                >March 10, 2013</time
                                            ></a
                                        ></span
                                    ><span class="byline"> by </span>
                                    <span class="author vcard"
                                        ><a class="url fn n" href="blog/archives/author/aaron"
                                            >Aaron</a
                                        ></span
                                    >
                                </div>
                                <!-- .entry-meta -->

                                <h1 class="entry-title">
                                    <a href="blog/archives/1857" rel="bookmark"
                                        >Finding duplicates in MongoDB via the shell</a
                                    >
                                </h1>
                            </header>
                            <!-- .entry-header -->

                            <div class="entry-meta">
                                <ul class="meta-list">
                                    <li class="meta-cat">
                                        <a href="blog/archives/category/coding" rel="category tag">Coding</a>
                                    </li>
                                    <li class="meta-tag">
                                        <a href="blog/archives/tag/mongodb" rel="tag">MongoDB</a>
                                    </li>
                                </ul>
                            </div>
                            <div class="entry-content">
                                <p>
                                    I thought this was an interesting question to answer on StackOverflow (summarized
                                    here):
                                </p>
                                <blockquote>
                                    <p>
                                        Iâ€™m trying to create an index, but an error is returned that duplicates exist
                                        for the field I want to index. What should I do?
                                    </p>
                                </blockquote>
                                <p>
                                    I answered with
                                    <a href="http://stackoverflow.com/a/15323839/95190">one</a> possibility.
                                </p>
                                <p>
                                    The summary is that you can use the power of MongoDBâ€™s
                                    <a href="http://docs.mongodb.org/manual/applications/aggregation/">aggregation</a>
                                    framework to search and return the duplicates. Itâ€™s really quite slick.
                                </p>
                                <p>
                                    For example, in the question, <strong>Wall </strong>documents had a field called
                                    <strong>event_time</strong>. Hereâ€™s one approach:
                                </p>
                                <pre><code>db.Wall.aggregate([
       {$group : { _id: &quot;$event_time&quot; ,  count : { $sum: 1}}},
       {$match : { count : { $gt : 1 } }} ])</code></pre>
                                <p>
                                    The trick is to use the $group pipeline operator to select and count each unique
                                    event_time. Then, match on only those groups that contained more than one match.
                                </p>
                                <p>
                                    While itâ€™s not necessarily as readable as the equivalent SQL statement potentially,
                                    itâ€™s still easy to read. The only really odd thing is the mapping of the
                                    <strong>event_time</strong> into the <strong>_id</strong>. As all documents pass
                                    through the pipeline, the <strong>event_time</strong> is used as the new aggregate
                                    document key. The $ sign is used as the field reference to a property of the
                                    document in the pipeline (a <strong>Wall</strong> document). Remember that the
                                    <strong>_id</strong> field of a MongoDB document must be unique (and this is how the
                                    $group pipeline operator does its magic).
                                </p>
                                <p>So, if the following <strong>event_time</strong>s were in the documents:</p>
                                <table cellspacing="0" cellpadding="2" width="400" border="1">
                                    <tbody>
                                        <tr>
                                            <td valign="top" width="400"><strong>event_time</strong></td>
                                        </tr>
                                        <tr>
                                            <td valign="top" width="400">4:00am</td>
                                        </tr>
                                        <tr>
                                            <td valign="top" width="400">5:00am</td>
                                        </tr>
                                        <tr>
                                            <td valign="top" width="400">4:00am</td>
                                        </tr>
                                        <tr>
                                            <td valign="top" width="400">6:00pm</td>
                                        </tr>
                                        <tr>
                                            <td valign="top" width="400">7:00a</td>
                                        </tr>
                                    </tbody>
                                </table>
                                <p>It would results in a aggregate set of documents:</p>
                                <table cellspacing="0" cellpadding="2" width="400" border="1">
                                    <tbody>
                                        <tr>
                                            <td valign="top" width="200"><strong>_id</strong></td>
                                            <td valign="top" width="200"><strong>count</strong></td>
                                        </tr>
                                        <tr>
                                            <td valign="top" width="200">4:00am</td>
                                            <td valign="top" width="200">2</td>
                                        </tr>
                                        <tr>
                                            <td valign="top" width="200">5:00am</td>
                                            <td valign="top" width="200">1</td>
                                        </tr>
                                        <tr>
                                            <td valign="top" width="200">6:00pm</td>
                                            <td valign="top" width="200">1</td>
                                        </tr>
                                        <tr>
                                            <td valign="top" width="200">7:00am</td>
                                            <td valign="top" width="200">1</td>
                                        </tr>
                                    </tbody>
                                </table>
                                <p>
                                    Notice how the _id is the <strong>event_time. </strong>The aggregate results would
                                    look like this:
                                </p>
                                <pre class="csharpcode">{
        <span class="str">&quot;result&quot;</span> : [
                {
                        <span class="str">&quot;_id&quot;</span> : <span class="str">&quot;4:00am&quot;</span>,
                        <span class="str">&quot;count&quot;</span> : 2
                }
        ],
        <span class="str">&quot;ok&quot;</span> : 1
}</pre>
                                <style type="text/css">
                                    .csharpcode,
                                    .csharpcode pre {
                                        font-size: small;
                                        color: black;
                                        font-family: consolas, "Courier New", courier, monospace;
                                        background-color: #ffffff;
                                        /*white-space: pre;*/
                                    }
                                    .csharpcode pre {
                                        margin: 0em;
                                    }
                                    .csharpcode .rem {
                                        color: #008000;
                                    }
                                    .csharpcode .kwrd {
                                        color: #0000ff;
                                    }
                                    .csharpcode .str {
                                        color: #006080;
                                    }
                                    .csharpcode .op {
                                        color: #0000c0;
                                    }
                                    .csharpcode .preproc {
                                        color: #cc6633;
                                    }
                                    .csharpcode .asp {
                                        background-color: #ffff00;
                                    }
                                    .csharpcode .html {
                                        color: #800000;
                                    }
                                    .csharpcode .attr {
                                        color: #ff0000;
                                    }
                                    .csharpcode .alt {
                                        background-color: #f4f4f4;
                                        width: 100%;
                                        margin: 0em;
                                    }
                                    .csharpcode .lnum {
                                        color: #606060;
                                    }
                                </style>
                            </div>
                            <!-- .entry-content -->
                        </article>
                        <!-- #post-## -->

                        <div class="code-block code-block-1" style="margin: 8px 0; clear: both">
                            <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
                            <ins
                                class="adsbygoogle"
                                style="display: block"
                                data-ad-format="fluid"
                                data-ad-layout-key="-fg+5r+6l-ft+4e"
                                data-ad-client="ca-pub-2328055154157951"
                                data-ad-slot="9395646477"
                            ></ins>
                            <script>
                                (adsbygoogle = window.adsbygoogle || []).push({});
                            </script>
                        </div>

                        <article
                            id="post-1835"
                            class="post post-1835 type-post status-publish format-standard hentry category-coding tag-c tag-linq tag-mongodb"
                        >
                            <!-- Grab the featured image -->

                            <header class="entry-header">
                                <div class="entry-date">
                                    <span class="posted-on"
                                        ><a href="blog/archives/1835" rel="bookmark"
                                            ><time class="entry-date published" datetime="2013-01-26T16:56:00-06:00"
                                                >January 26, 2013</time
                                            ><time class="updated" datetime="2013-01-26T14:39:01-06:00"
                                                >January 26, 2013</time
                                            ></a
                                        ></span
                                    ><span class="byline"> by </span>
                                    <span class="author vcard"
                                        ><a class="url fn n" href="blog/archives/author/aaron"
                                            >Aaron</a
                                        ></span
                                    >
                                </div>
                                <!-- .entry-meta -->

                                <h1 class="entry-title">
                                    <a href="blog/archives/1835" rel="bookmark"
                                        >How to rewrite a MongoDB C# LINQ with a Projection Requirement using a
                                        MongoCursor</a
                                    >
                                </h1>
                            </header>
                            <!-- .entry-header -->

                            <div class="entry-meta">
                                <ul class="meta-list">
                                    <li class="meta-cat">
                                        <a href="blog/archives/category/coding" rel="category tag">Coding</a>
                                    </li>
                                    <li class="meta-tag">
                                        <a href="blog/archives/tag/c" rel="tag">C#</a>,
                                        <a href="blog/archives/tag/linq" rel="tag">LINQ</a>,
                                        <a href="blog/archives/tag/mongodb" rel="tag">MongoDB</a>
                                    </li>
                                </ul>
                            </div>
                            <div class="entry-content">
                                <p align="left">
                                    The LINQ Provider for MongoDB does not
                                    <a href="https://jira.mongodb.org/browse/CSHARP-456">currently</a> take into account
                                    data projections efficiently when returning data. This could mean that youâ€™re
                                    unnecessarily returning more data from the database than is needed.
                                </p>
                                <p>
                                    So, Iâ€™m going to show you the pattern I applied as a replacement for the LINQ
                                    queries when I need to use a projection.
                                </p>
                                <p>Given the following simple LINQ statement:</p>
                                <pre class="csharpcode">var query = 
    (from r <span class="kwrd">in</span> DataLayer.Database
         .GetCollection&lt;Research&gt;()
         .AsQueryable&lt;Research&gt;()
        <span class="kwrd">where</span> !r.Deleted
        select <span class="kwrd">new</span>
        {
            Id = r.Id,
            Title = r.Title,
            Created = r.Created
        }).Skip(PageSize * page).Take(PageSize);</pre>
                                <p>
                                    <style type="text/css">
                                        .csharpcode,
                                        .csharpcode pre {
                                            font-size: small;
                                            color: black;
                                            font-family: consolas, "Courier New", courier, monospace;
                                            background-color: #ffffff;
                                            /*white-space: pre;*/
                                        }
                                        .csharpcode pre {
                                            margin: 0em;
                                        }
                                        .csharpcode .rem {
                                            color: #008000;
                                        }
                                        .csharpcode .kwrd {
                                            color: #0000ff;
                                        }
                                        .csharpcode .str {
                                            color: #006080;
                                        }
                                        .csharpcode .op {
                                            color: #0000c0;
                                        }
                                        .csharpcode .preproc {
                                            color: #cc6633;
                                        }
                                        .csharpcode .asp {
                                            background-color: #ffff00;
                                        }
                                        .csharpcode .html {
                                            color: #800000;
                                        }
                                        .csharpcode .attr {
                                            color: #ff0000;
                                        }
                                        .csharpcode .alt {
                                            background-color: #f4f4f4;
                                            width: 100%;
                                            margin: 0em;
                                        }
                                        .csharpcode .lnum {
                                            color: #606060;
                                        }
                                    </style>
                                </p>
                                <p>it can be converted to a MongoCursor style search like this:</p>
                                <pre class="csharpcode">var cursor = DataLayer.Database.GetCollection&lt;Research&gt;()
    .FindAs&lt;Research&gt;(Query&lt;Research&gt;.NE(r =&gt; r.Deleted, <span class="kwrd">true</span>))
        .SetFields(
            Fields&lt;Research&gt;.Include(
                r =&gt; r.Id, 
                r =&gt; r.Title, 
                r =&gt; r.Created))
        .SetLimit(PageSize)
        .SetSkip(PageSize * page);           </pre>
                                <p>
                                    <style type="text/css">
                                        .csharpcode,
                                        .csharpcode pre {
                                            font-size: small;
                                            color: black;
                                            font-family: consolas, "Courier New", courier, monospace;
                                            background-color: #ffffff;
                                            /*white-space: pre;*/
                                        }
                                        .csharpcode pre {
                                            margin: 0em;
                                        }
                                        .csharpcode .rem {
                                            color: #008000;
                                        }
                                        .csharpcode .kwrd {
                                            color: #0000ff;
                                        }
                                        .csharpcode .str {
                                            color: #006080;
                                        }
                                        .csharpcode .op {
                                            color: #0000c0;
                                        }
                                        .csharpcode .preproc {
                                            color: #cc6633;
                                        }
                                        .csharpcode .asp {
                                            background-color: #ffff00;
                                        }
                                        .csharpcode .html {
                                            color: #800000;
                                        }
                                        .csharpcode .attr {
                                            color: #ff0000;
                                        }
                                        .csharpcode .alt {
                                            background-color: #f4f4f4;
                                            width: 100%;
                                            margin: 0em;
                                        }
                                        .csharpcode .lnum {
                                            color: #606060;
                                        }
                                    </style>
                                </p>
                                <p>
                                    Iâ€™ve attempted to format it in a similar way mostly for my own sanity. As you see,
                                    both queries first get access to the database collection. But, instead of using
                                    <strong>AsQueryable&lt;T&gt;</strong>, youâ€™ll use the
                                    <strong>FindAs&lt;T&gt;</strong> method. The query is more verbose in the second
                                    example, although not overly so. I chose to keep it strongly typed by using the
                                    generic version <strong>Query&lt;Research&gt;</strong>. By doing so, it meant that I
                                    could use an Expression to set the field/property that was being queried, rather
                                    than rely on a string (I could have just passed â€œDeletedâ€ as a string in the code).
                                </p>
                                <p>
                                    By strongly typing the parameters in this way, it meant that the compile process can
                                    catch things like type mismatches (verifying that the value being compared is a
                                    Boolean for example as is the Deleted property).
                                </p>
                                <p>
                                    Secondly, and this addresses the requirement of a
                                    <a href="http://docs.mongodb.org/manual/core/read-operations/#result-projections"
                                        >result projection</a
                                    >, Iâ€™ve included just those fields that are required by the UI rather than all of
                                    the fields in the document. One of the fields is potentially quite long (up to 1MB
                                    of text), and in this case, unnecessary in a summary list display in my web
                                    application. Here, I used the <strong>SetFields </strong>method of the MongoCursor.
                                </p>
                                <p>
                                    The C# driver includes a static class called <strong>Fields</strong> (in a generic
                                    and non-generic form) which can be used to express the set of fields to be
                                    included/excluded. Iâ€™ll point out that there is an option to just pass in a list of
                                    strings to <strong>SetFields</strong>, but itâ€™s not strongly typed. So again, no
                                    compile-time checking that Iâ€™ve got the property names correct. Iâ€™m going for safety
                                    here, so I chose the strongly-typed generic implementation of
                                    <strong>Fields&lt;Research&gt;</strong>. Then, using the
                                    <strong>Expression</strong> syntax again, Iâ€™ve selected the fields I needed as a
                                    parameter list.
                                </p>
                                <p>
                                    Finally, I added some code to limit the result size and set the skip equivalent to
                                    the original LINQ query.
                                </p>
                                <p>
                                    There are a number of other Query methods that you can use to build more complex
                                    operations.
                                </p>
                                <p>For example:</p>
                                <pre class="csharpcode">var q = Query.And(
    Query&lt;Research&gt;.Exists(r =&gt; r.Title), 
    Query&lt;Research&gt;.Matches(
        r =&gt; r.Title, BsonRegularExpression.Create(<span class="kwrd">new</span> Regex(<span class="str">&quot;^R&quot;</span>))));</pre>
                                <p>
                                    <style type="text/css">
                                        .csharpcode,
                                        .csharpcode pre {
                                            font-size: small;
                                            color: black;
                                            font-family: consolas, "Courier New", courier, monospace;
                                            background-color: #ffffff;
                                            /*white-space: pre;*/
                                        }
                                        .csharpcode pre {
                                            margin: 0em;
                                        }
                                        .csharpcode .rem {
                                            color: #008000;
                                        }
                                        .csharpcode .kwrd {
                                            color: #0000ff;
                                        }
                                        .csharpcode .str {
                                            color: #006080;
                                        }
                                        .csharpcode .op {
                                            color: #0000c0;
                                        }
                                        .csharpcode .preproc {
                                            color: #cc6633;
                                        }
                                        .csharpcode .asp {
                                            background-color: #ffff00;
                                        }
                                        .csharpcode .html {
                                            color: #800000;
                                        }
                                        .csharpcode .attr {
                                            color: #ff0000;
                                        }
                                        .csharpcode .alt {
                                            background-color: #f4f4f4;
                                            width: 100%;
                                            margin: 0em;
                                        }
                                        .csharpcode .lnum {
                                            color: #606060;
                                        }
                                    </style>
                                </p>
                                <p>The above maps to the following MongoDB query:</p>
                                <pre
                                    class="csharpcode"
                                >{ <span class="str">&quot;$and&quot;</span> : [{ <span class="str">&quot;Title&quot;</span> : { <span class="str">&quot;$exists&quot;</span> : <span class="kwrd">true</span> } }, { <span class="str">&quot;Title&quot;</span> : /^R/ }] }</pre>
                                <p>Title field exists and the Title field starts with an uppercase â€œRâ€.</p>
                                <p>
                                    While the Query style syntax is more verbose than the equivalent LINQ statement, the
                                    result still is expressive and very readable and maintainable.
                                </p>
                                <p>
                                    FYI: If thereâ€™s an index on Title, then the /^R/ syntax returns the results the most
                                    <a href="http://docs.mongodb.org/manual/reference/operator/regex/#_S_regex"
                                        >efficiently</a
                                    >
                                    in MongoDB (as it stops searching after the first character).
                                </p>
                            </div>
                            <!-- .entry-content -->
                        </article>
                        <!-- #post-## -->

                        <nav class="navigation paging-navigation" role="navigation">
                            <h1 class="screen-reader-text">Posts navigation</h1>
                            <div class="nav-links">
                                <div class="nav-previous">
                                    <a href="blog/archives/tag/mongodb/page/2" class="button"
                                        ><span class="meta-nav"
                                            ><i class="fa fa-arrow-circle-o-left"></i> Older posts</span
                                        ></a
                                    >
                                </div>
                            </div>
                            <!-- .nav-links -->
                        </nav>
                        <!-- .navigation -->
                    </main>
                    <!-- #main -->
                </section>
                <!-- #primary -->
            </div>
            <!-- #content -->

            <footer id="colophon" class="site-footer" role="contentinfo">
                <div class="site-info">
                    <a class="powered-by" href="http://wordpress.org/">Proudly powered by WordPress</a>
                    <span class="sep"> | </span>
                    Theme: editor by <a href="https://array.is/">Array</a>
                </div>
                <!-- .site-info -->
            </footer>
            <!-- #colophon -->
        </div>
        <!-- #page -->

        <script
            type="text/javascript"
            src="blog/wpcontent/themes/editor/js/jquery.fitvids.js"
            id="fitvids-js"
        ></script>
        <script
            type="text/javascript"
            src="blog/wpcontent/themes/editor/js/editor.js"
            id="editor-js-js"
        ></script>
        <script src="https://stats.wp.com/e-202226.js" defer></script>
        <script>
            _stq = window._stq || [];
            _stq.push([
                "view",
                { v: "ext", j: "1:11.0", blog: "193486638", post: "0", tz: "-5", srv: "www.wiredprairie.us" },
            ]);
            _stq.push(["clickTrackerInit", "193486638", "0"]);
        </script>
    </body>
</html>
