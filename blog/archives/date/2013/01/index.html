<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="UTF-8" /><base href="https://wiredprairie.github.io/wiredprairie.us-website/">
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="profile" href="http://gmpg.org/xfn/11" />
        <link rel="pingback" href="blog/xmlrpc.php" />

        <title>January 2013 &#8211; WiredPrairie</title>
        <meta name="robots" content="max-image-preview:large" />
        <link rel="dns-prefetch" href="//secure.gravatar.com" />
        <link rel="dns-prefetch" href="//www.wiredprairie.us" />
        <link rel="dns-prefetch" href="//fonts.googleapis.com" />



        <style type="text/css">
            img.wp-smiley,
            img.emoji {
                display: inline !important;
                border: none !important;
                box-shadow: none !important;
                height: 1em !important;
                width: 1em !important;
                margin: 0 0.07em !important;
                vertical-align: -0.1em !important;
                background: none !important;
                padding: 0 !important;
            }
        </style>
        <link
            rel="stylesheet"
            id="wp-block-library-css"
            href="css/style.min.css"
            type="text/css"
            media="all"
        />
        <style id="wp-block-library-inline-css" type="text/css">
            .has-text-align-justify {
                text-align: justify;
            }
        </style>
        <link
            rel="stylesheet"
            id="mediaelement-css"
            href="blog/scripts/js/mediaelement/mediaelementplayer-legacy.min.css"
            type="text/css"
            media="all"
        />
        <link
            rel="stylesheet"
            id="wp-mediaelement-css"
            href="blog/scripts/js/mediaelement/wp-mediaelement.min.css"
            type="text/css"
            media="all"
        />
        <style id="global-styles-inline-css" type="text/css">
            body {
                --wp--preset--color--black: #000000;
                --wp--preset--color--cyan-bluish-gray: #abb8c3;
                --wp--preset--color--white: #ffffff;
                --wp--preset--color--pale-pink: #f78da7;
                --wp--preset--color--vivid-red: #cf2e2e;
                --wp--preset--color--luminous-vivid-orange: #ff6900;
                --wp--preset--color--luminous-vivid-amber: #fcb900;
                --wp--preset--color--light-green-cyan: #7bdcb5;
                --wp--preset--color--vivid-green-cyan: #00d084;
                --wp--preset--color--pale-cyan-blue: #8ed1fc;
                --wp--preset--color--vivid-cyan-blue: #0693e3;
                --wp--preset--color--vivid-purple: #9b51e0;
                --wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(
                    135deg,
                    rgba(6, 147, 227, 1) 0%,
                    rgb(155, 81, 224) 100%
                );
                --wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(
                    135deg,
                    rgb(122, 220, 180) 0%,
                    rgb(0, 208, 130) 100%
                );
                --wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(
                    135deg,
                    rgba(252, 185, 0, 1) 0%,
                    rgba(255, 105, 0, 1) 100%
                );
                --wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(
                    135deg,
                    rgba(255, 105, 0, 1) 0%,
                    rgb(207, 46, 46) 100%
                );
                --wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(
                    135deg,
                    rgb(238, 238, 238) 0%,
                    rgb(169, 184, 195) 100%
                );
                --wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(
                    135deg,
                    rgb(74, 234, 220) 0%,
                    rgb(151, 120, 209) 20%,
                    rgb(207, 42, 186) 40%,
                    rgb(238, 44, 130) 60%,
                    rgb(251, 105, 98) 80%,
                    rgb(254, 248, 76) 100%
                );
                --wp--preset--gradient--blush-light-purple: linear-gradient(
                    135deg,
                    rgb(255, 206, 236) 0%,
                    rgb(152, 150, 240) 100%
                );
                --wp--preset--gradient--blush-bordeaux: linear-gradient(
                    135deg,
                    rgb(254, 205, 165) 0%,
                    rgb(254, 45, 45) 50%,
                    rgb(107, 0, 62) 100%
                );
                --wp--preset--gradient--luminous-dusk: linear-gradient(
                    135deg,
                    rgb(255, 203, 112) 0%,
                    rgb(199, 81, 192) 50%,
                    rgb(65, 88, 208) 100%
                );
                --wp--preset--gradient--pale-ocean: linear-gradient(
                    135deg,
                    rgb(255, 245, 203) 0%,
                    rgb(182, 227, 212) 50%,
                    rgb(51, 167, 181) 100%
                );
                --wp--preset--gradient--electric-grass: linear-gradient(
                    135deg,
                    rgb(202, 248, 128) 0%,
                    rgb(113, 206, 126) 100%
                );
                --wp--preset--gradient--midnight: linear-gradient(135deg, rgb(2, 3, 129) 0%, rgb(40, 116, 252) 100%);
                --wp--preset--duotone--dark-grayscale: url("#wp-duotone-dark-grayscale");
                --wp--preset--duotone--grayscale: url("#wp-duotone-grayscale");
                --wp--preset--duotone--purple-yellow: url("#wp-duotone-purple-yellow");
                --wp--preset--duotone--blue-red: url("#wp-duotone-blue-red");
                --wp--preset--duotone--midnight: url("#wp-duotone-midnight");
                --wp--preset--duotone--magenta-yellow: url("#wp-duotone-magenta-yellow");
                --wp--preset--duotone--purple-green: url("#wp-duotone-purple-green");
                --wp--preset--duotone--blue-orange: url("#wp-duotone-blue-orange");
                --wp--preset--font-size--small: 13px;
                --wp--preset--font-size--medium: 20px;
                --wp--preset--font-size--large: 36px;
                --wp--preset--font-size--x-large: 42px;
            }
            .has-black-color {
                color: var(--wp--preset--color--black) !important;
            }
            .has-cyan-bluish-gray-color {
                color: var(--wp--preset--color--cyan-bluish-gray) !important;
            }
            .has-white-color {
                color: var(--wp--preset--color--white) !important;
            }
            .has-pale-pink-color {
                color: var(--wp--preset--color--pale-pink) !important;
            }
            .has-vivid-red-color {
                color: var(--wp--preset--color--vivid-red) !important;
            }
            .has-luminous-vivid-orange-color {
                color: var(--wp--preset--color--luminous-vivid-orange) !important;
            }
            .has-luminous-vivid-amber-color {
                color: var(--wp--preset--color--luminous-vivid-amber) !important;
            }
            .has-light-green-cyan-color {
                color: var(--wp--preset--color--light-green-cyan) !important;
            }
            .has-vivid-green-cyan-color {
                color: var(--wp--preset--color--vivid-green-cyan) !important;
            }
            .has-pale-cyan-blue-color {
                color: var(--wp--preset--color--pale-cyan-blue) !important;
            }
            .has-vivid-cyan-blue-color {
                color: var(--wp--preset--color--vivid-cyan-blue) !important;
            }
            .has-vivid-purple-color {
                color: var(--wp--preset--color--vivid-purple) !important;
            }
            .has-black-background-color {
                background-color: var(--wp--preset--color--black) !important;
            }
            .has-cyan-bluish-gray-background-color {
                background-color: var(--wp--preset--color--cyan-bluish-gray) !important;
            }
            .has-white-background-color {
                background-color: var(--wp--preset--color--white) !important;
            }
            .has-pale-pink-background-color {
                background-color: var(--wp--preset--color--pale-pink) !important;
            }
            .has-vivid-red-background-color {
                background-color: var(--wp--preset--color--vivid-red) !important;
            }
            .has-luminous-vivid-orange-background-color {
                background-color: var(--wp--preset--color--luminous-vivid-orange) !important;
            }
            .has-luminous-vivid-amber-background-color {
                background-color: var(--wp--preset--color--luminous-vivid-amber) !important;
            }
            .has-light-green-cyan-background-color {
                background-color: var(--wp--preset--color--light-green-cyan) !important;
            }
            .has-vivid-green-cyan-background-color {
                background-color: var(--wp--preset--color--vivid-green-cyan) !important;
            }
            .has-pale-cyan-blue-background-color {
                background-color: var(--wp--preset--color--pale-cyan-blue) !important;
            }
            .has-vivid-cyan-blue-background-color {
                background-color: var(--wp--preset--color--vivid-cyan-blue) !important;
            }
            .has-vivid-purple-background-color {
                background-color: var(--wp--preset--color--vivid-purple) !important;
            }
            .has-black-border-color {
                border-color: var(--wp--preset--color--black) !important;
            }
            .has-cyan-bluish-gray-border-color {
                border-color: var(--wp--preset--color--cyan-bluish-gray) !important;
            }
            .has-white-border-color {
                border-color: var(--wp--preset--color--white) !important;
            }
            .has-pale-pink-border-color {
                border-color: var(--wp--preset--color--pale-pink) !important;
            }
            .has-vivid-red-border-color {
                border-color: var(--wp--preset--color--vivid-red) !important;
            }
            .has-luminous-vivid-orange-border-color {
                border-color: var(--wp--preset--color--luminous-vivid-orange) !important;
            }
            .has-luminous-vivid-amber-border-color {
                border-color: var(--wp--preset--color--luminous-vivid-amber) !important;
            }
            .has-light-green-cyan-border-color {
                border-color: var(--wp--preset--color--light-green-cyan) !important;
            }
            .has-vivid-green-cyan-border-color {
                border-color: var(--wp--preset--color--vivid-green-cyan) !important;
            }
            .has-pale-cyan-blue-border-color {
                border-color: var(--wp--preset--color--pale-cyan-blue) !important;
            }
            .has-vivid-cyan-blue-border-color {
                border-color: var(--wp--preset--color--vivid-cyan-blue) !important;
            }
            .has-vivid-purple-border-color {
                border-color: var(--wp--preset--color--vivid-purple) !important;
            }
            .has-vivid-cyan-blue-to-vivid-purple-gradient-background {
                background: var(--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple) !important;
            }
            .has-light-green-cyan-to-vivid-green-cyan-gradient-background {
                background: var(--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan) !important;
            }
            .has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background {
                background: var(--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange) !important;
            }
            .has-luminous-vivid-orange-to-vivid-red-gradient-background {
                background: var(--wp--preset--gradient--luminous-vivid-orange-to-vivid-red) !important;
            }
            .has-very-light-gray-to-cyan-bluish-gray-gradient-background {
                background: var(--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray) !important;
            }
            .has-cool-to-warm-spectrum-gradient-background {
                background: var(--wp--preset--gradient--cool-to-warm-spectrum) !important;
            }
            .has-blush-light-purple-gradient-background {
                background: var(--wp--preset--gradient--blush-light-purple) !important;
            }
            .has-blush-bordeaux-gradient-background {
                background: var(--wp--preset--gradient--blush-bordeaux) !important;
            }
            .has-luminous-dusk-gradient-background {
                background: var(--wp--preset--gradient--luminous-dusk) !important;
            }
            .has-pale-ocean-gradient-background {
                background: var(--wp--preset--gradient--pale-ocean) !important;
            }
            .has-electric-grass-gradient-background {
                background: var(--wp--preset--gradient--electric-grass) !important;
            }
            .has-midnight-gradient-background {
                background: var(--wp--preset--gradient--midnight) !important;
            }
            .has-small-font-size {
                font-size: var(--wp--preset--font-size--small) !important;
            }
            .has-medium-font-size {
                font-size: var(--wp--preset--font-size--medium) !important;
            }
            .has-large-font-size {
                font-size: var(--wp--preset--font-size--large) !important;
            }
            .has-x-large-font-size {
                font-size: var(--wp--preset--font-size--x-large) !important;
            }
        </style>
        <link
            rel="stylesheet"
            id="editor-style-css"
            href="blog/wpcontent/themes/editor/style.css"
            type="text/css"
            media="all"
        />
        <link
            rel="stylesheet"
            id="editor-font-awesome-css-css"
            href="blog/wpcontent/themes/editor/inc/fontawesome/font-awesome.css"
            type="text/css"
            media="screen"
        />
        <!--[if IE]>
            <link
                rel="stylesheet"
                id="ie7-style-css"
                href="themes/editor/inc/styles/ie.css"
                type="text/css"
                media="all"
            />
        <![endif]-->
        <link
            rel="stylesheet"
            id="editor-fonts-css"
            href="//fonts.googleapis.com/css?family=Source+Sans+Pro%3A400%2C600%2C700%2C400italic%2C600italic%2C700italic%7CRoboto+Condensed%3A300%2C400%2C700%2C300italic%2C400italic%2C700italic&#038;subset=latin%2Clatin-ext"
            type="text/css"
            media="all"
        />

        <script
            type="text/javascript"
            src="blog/scripts/js/jquery/jquery.min.js"
            id="jquery-core-js"
        ></script>
        <script
            type="text/javascript"
            src="blog/scripts/js/jquery/jquery-migrate.min.js"
            id="jquery-migrate-js"
        ></script>
        <link rel="https://api.w.org/" href="blog/wpjson/" />
        <link rel="EditURI" type="application/rsd+xml" title="RSD" href="blog/xmlrpc.php?rsd" />
        <link rel="wlwmanifest" type="application/wlwmanifest+xml" href="blog/scripts/wlwmanifest.xml" />
        <meta name="generator" content="WordPress 6.0" />
        <link
            rel="stylesheet"
            type="text/css"
            href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.css"
        />
        <script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.js"></script>
        <script>
            window.addEventListener("load", function () {
                window.cookieconsent.initialise({
                    palette: {
                        popup: {
                            background: "#000",
                        },
                        button: {
                            background: "#f1d600",
                        },
                    },
                });
            });
        </script>
        <style>
            img#wpstats {
                display: none;
            }
        </style>

        <!-- Jetpack Open Graph Tags -->
        <meta property="og:type" content="website" />
        <meta property="og:title" content="January 2013 &#8211; WiredPrairie" />
        <meta property="og:site_name" content="WiredPrairie" />
        <meta property="og:image" content="https://s0.wp.com/i/blank.jpg" />
        <meta property="og:image:alt" content="" />
        <meta property="og:locale" content="en_US" />

        <!-- End Jetpack Open Graph Tags -->
    </head>

    <body class="archive date group-blog">
        <div id="page" class="hfeed site container">
            <a class="skip-link screen-reader-text" href="#content">Skip to content</a>

            <!-- Get sidebar color option (Appearance -> Customize -> Theme Options) -->
            <header id="masthead" class="site-header light" role="banner">
                <!-- Tab navigation -->
                <ul class="toggle-bar" role="tablist">
                    <!-- Main navigation -->
                    <li id="panel-1" class="current" role="presentation">
                        <a
                            href="#tab-1"
                            role="tab"
                            aria-controls="tab-1"
                            aria-selected="true"
                            class="current nav-toggle"
                            data-tab="tab-1"
                            ><i class="fa fa-bars"></i><span class="screen-reader-text">View menu</span></a
                        >
                    </li>

                    <!-- Featured Posts navigation -->
                    <li id="panel-2" role="presentation">
                        <a href="#tab-2" role="tab" aria-controls="tab-2" aria-selected="false" data-tab="tab-2"
                            ><i class="fa fa-thumb-tack"></i
                            ><span class="screen-reader-text">View featured posts</span></a
                        >
                    </li>

                    <!-- Sidebar widgets navigation -->
                    <li id="panel-3" role="presentation">
                        <a
                            href="#tab-3"
                            role="tab"
                            aria-controls="tab-3"
                            aria-selected="false"
                            class="folder-toggle"
                            data-tab="tab-3"
                            ><i class="fa fa-folder"></i><i class="fa fa-folder-open"></i
                            ><span class="screen-reader-text">View sidebar</span></a
                        >
                    </li>
                </ul>

                <div id="tabs" class="toggle-tabs">
                    <div class="site-header-inside">
                        <!-- Logo, description and main navigation -->
                        <div id="tab-1" class="tab-content current fadeIn">
                            <div class="site-branding">
                                <!-- Get the site branding -->
                                <h1 class="site-title"><a href="blog/" rel="home">WiredPrairie</a></h1>
                                <h2 class="site-description">Yet another tech blog.</h2>
                            </div>

                            <nav id="site-navigation" class="main-navigation" role="navigation">
                                <div class="menu">
                                    <ul>
                                        <li><a href="blog/">Home</a></li>
                                        <li class="page_item page-item-2"><a href="blog/about">About</a></li>
                                        <li class="page_item page-item-28">
                                            <a href="blog/contact">Contact Me</a>
                                        </li>
                                    </ul>
                                </div>
                            </nav>
                            <!-- #site-navigation -->
                        </div>
                        <!-- #tab-1 -->

                        <!-- Featured Posts template (template-featured-posts.php) -->

                        <div id="tab-2" class="widget-area tab-content animated fadeIn">
                            <div class="widget featured-posts-widget">
                                <h2 class="widget-title">Recommendations</h2>

                                <div class="featured-posts">
                                    <div class="featured-post">
                                        <a
                                            class="featured-post-image"
                                            href="blog/archives/2278"
                                            rel="bookmark"
                                            ><img
                                                width="600"
                                                height="400"
                                                src="blog/wpcontent/uploads/2018/07/Photo-Jul-23-7-23-26-PM-600x400.jpg"
                                                class="attachment-featured-post-image size-featured-post-image wp-post-image"
                                                alt=""
                                                loading="lazy"
                                                data-attachment-id="2292"
                                                data-permalink="/index.php/archives/2278/photo-jul-23-7-23-26-pm"
                                                data-orig-file="uploads/2018/07/Photo-Jul-23-7-23-26-PM.jpg"
                                                data-orig-size="4032,3024"
                                                data-comments-opened="1"
                                                data-image-meta='{"aperture":"2.2","credit":"","camera":"iPhone 6s","caption":"","created_timestamp":"1532373806","copyright":"","focal_length":"4.15","iso":"320","shutter_speed":"0.066666666666667","title":"","orientation":"1"}'
                                                data-image-title="Photo Jul 23, 7 23 26 PM"
                                                data-image-description=""
                                                data-image-caption=""
                                                data-medium-file="uploads/2018/07/Photo-Jul-23-7-23-26-PM-300x225.jpg"
                                                data-large-file="uploads/2018/07/Photo-Jul-23-7-23-26-PM-1024x768.jpg"
                                        /></a>
                                        <h3>
                                            <a href="blog/archives/2278" rel="bookmark"
                                                >You don&#8217;t need it, but you might want it any way: Ubiquiti
                                                Unifi</a
                                            >
                                        </h3>

                                        <div class="featured-post-meta">
                                            <div class="featured-post-date">
                                                <i class="fa fa-clock-o"></i>
                                                <span class="posted-on"
                                                    ><a href="blog/archives/2278" rel="bookmark"
                                                        ><time
                                                            class="entry-date published"
                                                            datetime="2018-07-25T20:27:43-05:00"
                                                            >July 25, 2018</time
                                                        ></a
                                                    ></span
                                                ><span class="byline"> by </span>
                                                <span class="author vcard"
                                                    ><a class="url fn n" href="blog/archives/author/aaron"
                                                        >Aaron</a
                                                    ></span
                                                >
                                            </div>
                                        </div>
                                    </div>
                                    <div class="featured-post">
                                        <a
                                            class="featured-post-image"
                                            href="blog/archives/2197"
                                            rel="bookmark"
                                            ><img
                                                width="600"
                                                height="400"
                                                src="blog/wpcontent/uploads/2018/02/2018-02-16-20_23_15-AmazonSmile_-Pure-Green-100-Natural-Latex-Mattress-Topper-Firm-3_-King-Size-600x400.png"
                                                class="attachment-featured-post-image size-featured-post-image wp-post-image"
                                                alt="Mattress-Firm"
                                                loading="lazy"
                                                data-attachment-id="2198"
                                                data-permalink="/index.php/archives/2197/2018-02-16-20_23_15-amazonsmile_-pure-green-100-natural-latex-mattress-topper-firm-3_-king-size"
                                                data-orig-file="uploads/2018/02/2018-02-16-20_23_15-AmazonSmile_-Pure-Green-100-Natural-Latex-Mattress-Topper-Firm-3_-King-Size.png"
                                                data-orig-size="1067,807"
                                                data-comments-opened="1"
                                                data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}'
                                                data-image-title="Pure Green 100% Natural Latex Mattress Topper &#8211; Firm"
                                                data-image-description=""
                                                data-image-caption="&lt;p&gt;Pure Green 100% Natural Latex Mattress Topper &#8211; Firm&lt;/p&gt;
"
                                                data-medium-file="uploads/2018/02/2018-02-16-20_23_15-AmazonSmile_-Pure-Green-100-Natural-Latex-Mattress-Topper-Firm-3_-King-Size-300x227.png"
                                                data-large-file="uploads/2018/02/2018-02-16-20_23_15-AmazonSmile_-Pure-Green-100-Natural-Latex-Mattress-Topper-Firm-3_-King-Size-1024x774.png"
                                        /></a>
                                        <h3>
                                            <a href="blog/archives/2197" rel="bookmark"
                                                >How to make your too soft Tempur-pedic Bed comfortable</a
                                            >
                                        </h3>

                                        <div class="featured-post-meta">
                                            <div class="featured-post-date">
                                                <i class="fa fa-clock-o"></i>
                                                <span class="posted-on"
                                                    ><a href="blog/archives/2197" rel="bookmark"
                                                        ><time
                                                            class="entry-date published"
                                                            datetime="2018-02-17T09:59:38-06:00"
                                                            >February 17, 2018</time
                                                        ><time class="updated" datetime="2018-02-17T12:05:52-06:00"
                                                            >February 17, 2018</time
                                                        ></a
                                                    ></span
                                                ><span class="byline"> by </span>
                                                <span class="author vcard"
                                                    ><a class="url fn n" href="blog/archives/author/aaron"
                                                        >Aaron</a
                                                    ></span
                                                >
                                            </div>
                                        </div>
                                    </div>
                                    <div class="featured-post">
                                        <a
                                            class="featured-post-image"
                                            href="blog/archives/2124"
                                            rel="bookmark"
                                            ><img
                                                width="600"
                                                height="400"
                                                src="blog/wpcontent/uploads/2016/11/TicketToRideBanner-600x400.jpg"
                                                class="attachment-featured-post-image size-featured-post-image wp-post-image"
                                                alt=""
                                                loading="lazy"
                                                data-attachment-id="2138"
                                                data-permalink="/index.php/archives/2124/tickettoridebanner"
                                                data-orig-file="uploads/2016/11/TicketToRideBanner.jpg"
                                                data-orig-size="1920,873"
                                                data-comments-opened="1"
                                                data-image-meta='{"aperture":"2.2","credit":"","camera":"iPhone 6s","caption":"","created_timestamp":"0","copyright":"","focal_length":"4.2","iso":"320","shutter_speed":"0.066666666666667","title":"","orientation":"1"}'
                                                data-image-title="tickettoridebanner"
                                                data-image-description=""
                                                data-image-caption=""
                                                data-medium-file="uploads/2016/11/TicketToRideBanner-300x136.jpg"
                                                data-large-file="uploads/2016/11/TicketToRideBanner-1024x466.jpg"
                                        /></a>
                                        <h3>
                                            <a href="blog/archives/2124" rel="bookmark"
                                                >Alternatives to Monopoly: Some table-top board games you should try</a
                                            >
                                        </h3>

                                        <div class="featured-post-meta">
                                            <div class="featured-post-date">
                                                <i class="fa fa-clock-o"></i>
                                                <span class="posted-on"
                                                    ><a href="blog/archives/2124" rel="bookmark"
                                                        ><time
                                                            class="entry-date published"
                                                            datetime="2016-11-28T07:25:48-06:00"
                                                            >November 28, 2016</time
                                                        ><time class="updated" datetime="2017-04-04T20:19:50-05:00"
                                                            >April 4, 2017</time
                                                        ></a
                                                    ></span
                                                ><span class="byline"> by </span>
                                                <span class="author vcard"
                                                    ><a class="url fn n" href="blog/archives/author/aaron"
                                                        >Aaron</a
                                                    ></span
                                                >
                                            </div>
                                        </div>
                                    </div>
                                    <div class="featured-post">
                                        <h3>
                                            <a href="blog/archives/2119" rel="bookmark"
                                                >Geek gift ideas 2016</a
                                            >
                                        </h3>

                                        <div class="featured-post-meta">
                                            <div class="featured-post-date">
                                                <i class="fa fa-clock-o"></i>
                                                <span class="posted-on"
                                                    ><a href="blog/archives/2119" rel="bookmark"
                                                        ><time
                                                            class="entry-date published"
                                                            datetime="2016-11-27T11:30:00-06:00"
                                                            >November 27, 2016</time
                                                        ><time class="updated" datetime="2017-04-04T20:20:17-05:00"
                                                            >April 4, 2017</time
                                                        ></a
                                                    ></span
                                                ><span class="byline"> by </span>
                                                <span class="author vcard"
                                                    ><a class="url fn n" href="blog/archives/author/aaron"
                                                        >Aaron</a
                                                    ></span
                                                >
                                            </div>
                                        </div>
                                    </div>
                                    <div class="featured-post">
                                        <h3>
                                            <a href="blog/archives/2115" rel="bookmark"
                                                >Changing password requirements in Linux Subsystem for Windows (or Bash
                                                on Ubuntu on Windows)</a
                                            >
                                        </h3>

                                        <div class="featured-post-meta">
                                            <div class="featured-post-date">
                                                <i class="fa fa-clock-o"></i>
                                                <span class="posted-on"
                                                    ><a href="blog/archives/2115" rel="bookmark"
                                                        ><time
                                                            class="entry-date published"
                                                            datetime="2016-11-23T07:47:54-06:00"
                                                            >November 23, 2016</time
                                                        ></a
                                                    ></span
                                                ><span class="byline"> by </span>
                                                <span class="author vcard"
                                                    ><a class="url fn n" href="blog/archives/author/aaron"
                                                        >Aaron</a
                                                    ></span
                                                >
                                            </div>
                                        </div>
                                    </div>
                                    <div class="featured-post">
                                        <a
                                            class="featured-post-image"
                                            href="blog/archives/2096"
                                            rel="bookmark"
                                            ><img
                                                width="600"
                                                height="400"
                                                src="blog/wpcontent/uploads/2016/11/02_ecobee3_family2-600x400.jpg"
                                                class="attachment-featured-post-image size-featured-post-image wp-post-image"
                                                alt=""
                                                loading="lazy"
                                                data-attachment-id="2112"
                                                data-permalink="/index.php/archives/2096/02_ecobee3_family2"
                                                data-orig-file="uploads/2016/11/02_ecobee3_family2.jpg"
                                                data-orig-size="1198,400"
                                                data-comments-opened="1"
                                                data-image-meta='{"aperture":"0","credit":"","camera":"","caption":"","created_timestamp":"0","copyright":"","focal_length":"0","iso":"0","shutter_speed":"0","title":"","orientation":"0"}'
                                                data-image-title="02_ecobee3_family2"
                                                data-image-description=""
                                                data-image-caption=""
                                                data-medium-file="uploads/2016/11/02_ecobee3_family2-300x100.jpg"
                                                data-large-file="uploads/2016/11/02_ecobee3_family2-1024x342.jpg"
                                        /></a>
                                        <h3>
                                            <a href="blog/archives/2096" rel="bookmark"
                                                >Ecobeeâ€™s ecobee3 Thermostat</a
                                            >
                                        </h3>

                                        <div class="featured-post-meta">
                                            <div class="featured-post-date">
                                                <i class="fa fa-clock-o"></i>
                                                <span class="posted-on"
                                                    ><a href="blog/archives/2096" rel="bookmark"
                                                        ><time
                                                            class="entry-date published"
                                                            datetime="2016-11-19T09:10:36-06:00"
                                                            >November 19, 2016</time
                                                        ><time class="updated" datetime="2016-11-19T09:17:51-06:00"
                                                            >November 19, 2016</time
                                                        ></a
                                                    ></span
                                                ><span class="byline"> by </span>
                                                <span class="author vcard"
                                                    ><a class="url fn n" href="blog/archives/author/aaron"
                                                        >Aaron</a
                                                    ></span
                                                >
                                            </div>
                                        </div>
                                    </div>
                                    <div class="featured-post">
                                        <h3>
                                            <a href="blog/archives/2039" rel="bookmark"
                                                >Made in the USA Camera Bag Manufacturers</a
                                            >
                                        </h3>

                                        <div class="featured-post-meta">
                                            <div class="featured-post-date">
                                                <i class="fa fa-clock-o"></i>
                                                <span class="posted-on"
                                                    ><a href="blog/archives/2039" rel="bookmark"
                                                        ><time
                                                            class="entry-date published"
                                                            datetime="2016-03-21T20:26:43-05:00"
                                                            >March 21, 2016</time
                                                        ><time class="updated" datetime="2016-03-23T09:40:26-05:00"
                                                            >March 23, 2016</time
                                                        ></a
                                                    ></span
                                                ><span class="byline"> by </span>
                                                <span class="author vcard"
                                                    ><a class="url fn n" href="blog/archives/author/aaron"
                                                        >Aaron</a
                                                    ></span
                                                >
                                            </div>
                                        </div>
                                    </div>
                                    <div class="featured-post">
                                        <h3>
                                            <a href="blog/archives/2020" rel="bookmark"
                                                >My Raspberry Pi 2 Model B setup</a
                                            >
                                        </h3>

                                        <div class="featured-post-meta">
                                            <div class="featured-post-date">
                                                <i class="fa fa-clock-o"></i>
                                                <span class="posted-on"
                                                    ><a href="blog/archives/2020" rel="bookmark"
                                                        ><time
                                                            class="entry-date published"
                                                            datetime="2015-03-09T20:48:37-05:00"
                                                            >March 9, 2015</time
                                                        ></a
                                                    ></span
                                                ><span class="byline"> by </span>
                                                <span class="author vcard"
                                                    ><a class="url fn n" href="blog/archives/author/aaron"
                                                        >Aaron</a
                                                    ></span
                                                >
                                            </div>
                                        </div>
                                    </div>
                                    <div class="featured-post">
                                        <h3>
                                            <a href="blog/archives/2011" rel="bookmark"
                                                >Kenu Airframe Portable Car Mount</a
                                            >
                                        </h3>

                                        <div class="featured-post-meta">
                                            <div class="featured-post-date">
                                                <i class="fa fa-clock-o"></i>
                                                <span class="posted-on"
                                                    ><a href="blog/archives/2011" rel="bookmark"
                                                        ><time
                                                            class="entry-date published"
                                                            datetime="2015-01-18T11:21:50-06:00"
                                                            >January 18, 2015</time
                                                        ></a
                                                    ></span
                                                ><span class="byline"> by </span>
                                                <span class="author vcard"
                                                    ><a class="url fn n" href="blog/archives/author/aaron"
                                                        >Aaron</a
                                                    ></span
                                                >
                                            </div>
                                        </div>
                                    </div>
                                    <div class="featured-post">
                                        <h3>
                                            <a href="blog/archives/2006" rel="bookmark"
                                                >Attaching a GoPro Hero with Aero Bars from RedShift</a
                                            >
                                        </h3>

                                        <div class="featured-post-meta">
                                            <div class="featured-post-date">
                                                <i class="fa fa-clock-o"></i>
                                                <span class="posted-on"
                                                    ><a href="blog/archives/2006" rel="bookmark"
                                                        ><time
                                                            class="entry-date published"
                                                            datetime="2014-08-07T20:48:50-05:00"
                                                            >August 7, 2014</time
                                                        ></a
                                                    ></span
                                                ><span class="byline"> by </span>
                                                <span class="author vcard"
                                                    ><a class="url fn n" href="blog/archives/author/aaron"
                                                        >Aaron</a
                                                    ></span
                                                >
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- .featured-posts -->
                            </div>
                            <!-- .featured-posts-widget -->
                        </div>
                        <!-- #tab-2 .widget-area -->

                        <!-- Sidebar widgets -->
                        <div
                            id="tab-3"
                            class="tab-content animated fadeIn"
                            role="tabpanel"
                            aria-labelledby="panel-3"
                            aria-hidden="true"
                        >
                            <div id="secondary" class="widget-area" role="complementary">
                                <aside id="pages-2" class="widget widget_pages">
                                    <h2 class="widget-title">Pages</h2>
                                    <ul>
                                        <li class="page_item page-item-2"><a href="blog/about">About</a></li>
                                        <li class="page_item page-item-28">
                                            <a href="blog/contact">Contact Me</a>
                                        </li>
                                    </ul>
                                </aside>
                                <aside id="archives-2" class="widget widget_archive">
                                    <h2 class="widget-title">Archives</h2>
                                    <ul>
                                        <li><a href="blog/archives/date/2019/10">October 2019</a></li>
                                        <li><a href="blog/archives/date/2018/07">July 2018</a></li>
                                        <li><a href="blog/archives/date/2018/05">May 2018</a></li>
                                        <li><a href="blog/archives/date/2018/04">April 2018</a></li>
                                        <li><a href="blog/archives/date/2018/03">March 2018</a></li>
                                        <li><a href="blog/archives/date/2018/02">February 2018</a></li>
                                        <li><a href="blog/archives/date/2017/04">April 2017</a></li>
                                        <li><a href="blog/archives/date/2017/01">January 2017</a></li>
                                        <li><a href="blog/archives/date/2016/11">November 2016</a></li>
                                        <li><a href="blog/archives/date/2016/10">October 2016</a></li>
                                        <li><a href="blog/archives/date/2016/03">March 2016</a></li>
                                        <li><a href="blog/archives/date/2016/02">February 2016</a></li>
                                        <li><a href="blog/archives/date/2015/03">March 2015</a></li>
                                        <li><a href="blog/archives/date/2015/01">January 2015</a></li>
                                        <li><a href="blog/archives/date/2014/08">August 2014</a></li>
                                        <li><a href="blog/archives/date/2014/05">May 2014</a></li>
                                        <li><a href="blog/archives/date/2014/01">January 2014</a></li>
                                        <li><a href="blog/archives/date/2013/12">December 2013</a></li>
                                        <li><a href="blog/archives/date/2013/10">October 2013</a></li>
                                        <li><a href="blog/archives/date/2013/09">September 2013</a></li>
                                        <li><a href="blog/archives/date/2013/08">August 2013</a></li>
                                        <li><a href="blog/archives/date/2013/07">July 2013</a></li>
                                        <li><a href="blog/archives/date/2013/06">June 2013</a></li>
                                        <li><a href="blog/archives/date/2013/05">May 2013</a></li>
                                        <li><a href="blog/archives/date/2013/03">March 2013</a></li>
                                        <li><a href="blog/archives/date/2013/02">February 2013</a></li>
                                        <li>
                                            <a href="blog/archives/date/2013/01" aria-current="page"
                                                >January 2013</a
                                            >
                                        </li>
                                        <li><a href="blog/archives/date/2012/12">December 2012</a></li>
                                        <li><a href="blog/archives/date/2012/10">October 2012</a></li>
                                        <li><a href="blog/archives/date/2012/09">September 2012</a></li>
                                        <li><a href="blog/archives/date/2012/08">August 2012</a></li>
                                        <li><a href="blog/archives/date/2012/07">July 2012</a></li>
                                        <li><a href="blog/archives/date/2012/06">June 2012</a></li>
                                        <li><a href="blog/archives/date/2012/05">May 2012</a></li>
                                        <li><a href="blog/archives/date/2012/04">April 2012</a></li>
                                        <li><a href="blog/archives/date/2012/03">March 2012</a></li>
                                        <li><a href="blog/archives/date/2012/02">February 2012</a></li>
                                        <li><a href="blog/archives/date/2012/01">January 2012</a></li>
                                        <li><a href="blog/archives/date/2011/12">December 2011</a></li>
                                        <li><a href="blog/archives/date/2011/11">November 2011</a></li>
                                        <li><a href="blog/archives/date/2011/08">August 2011</a></li>
                                        <li><a href="blog/archives/date/2011/07">July 2011</a></li>
                                        <li><a href="blog/archives/date/2011/06">June 2011</a></li>
                                        <li><a href="blog/archives/date/2011/05">May 2011</a></li>
                                        <li><a href="blog/archives/date/2011/03">March 2011</a></li>
                                        <li><a href="blog/archives/date/2011/02">February 2011</a></li>
                                        <li><a href="blog/archives/date/2011/01">January 2011</a></li>
                                        <li><a href="blog/archives/date/2010/11">November 2010</a></li>
                                        <li><a href="blog/archives/date/2010/10">October 2010</a></li>
                                        <li><a href="blog/archives/date/2010/09">September 2010</a></li>
                                        <li><a href="blog/archives/date/2010/08">August 2010</a></li>
                                        <li><a href="blog/archives/date/2010/07">July 2010</a></li>
                                        <li><a href="blog/archives/date/2010/06">June 2010</a></li>
                                        <li><a href="blog/archives/date/2010/05">May 2010</a></li>
                                        <li><a href="blog/archives/date/2010/04">April 2010</a></li>
                                        <li><a href="blog/archives/date/2010/03">March 2010</a></li>
                                        <li><a href="blog/archives/date/2010/02">February 2010</a></li>
                                        <li><a href="blog/archives/date/2010/01">January 2010</a></li>
                                        <li><a href="blog/archives/date/2009/12">December 2009</a></li>
                                        <li><a href="blog/archives/date/2009/11">November 2009</a></li>
                                        <li><a href="blog/archives/date/2009/10">October 2009</a></li>
                                        <li><a href="blog/archives/date/2009/09">September 2009</a></li>
                                        <li><a href="blog/archives/date/2009/08">August 2009</a></li>
                                        <li><a href="blog/archives/date/2009/07">July 2009</a></li>
                                        <li><a href="blog/archives/date/2009/06">June 2009</a></li>
                                        <li><a href="blog/archives/date/2009/05">May 2009</a></li>
                                        <li><a href="blog/archives/date/2009/04">April 2009</a></li>
                                        <li><a href="blog/archives/date/2009/03">March 2009</a></li>
                                        <li><a href="blog/archives/date/2009/02">February 2009</a></li>
                                        <li><a href="blog/archives/date/2009/01">January 2009</a></li>
                                        <li><a href="blog/archives/date/2008/12">December 2008</a></li>
                                        <li><a href="blog/archives/date/2008/11">November 2008</a></li>
                                        <li><a href="blog/archives/date/2008/10">October 2008</a></li>
                                        <li><a href="blog/archives/date/2008/09">September 2008</a></li>
                                        <li><a href="blog/archives/date/2008/08">August 2008</a></li>
                                        <li><a href="blog/archives/date/2008/07">July 2008</a></li>
                                        <li><a href="blog/archives/date/2008/06">June 2008</a></li>
                                        <li><a href="blog/archives/date/2008/05">May 2008</a></li>
                                        <li><a href="blog/archives/date/2008/04">April 2008</a></li>
                                        <li><a href="blog/archives/date/2008/03">March 2008</a></li>
                                        <li><a href="blog/archives/date/2008/02">February 2008</a></li>
                                    </ul>
                                </aside>
                            </div>
                            <!-- #secondary -->
                        </div>
                        <!-- #tab-3 -->
                    </div>
                    <!-- .site-header-inside -->
                </div>
                <!-- #tabs -->
            </header>
            <!-- #masthead -->

            <div id="content" class="site-content fadeInFast">
                <section id="primary" class="content-area">
                    <main id="main" class="site-main" role="main">
                        <header class="page-header">
                            <h1 class="page-title">Month / <span>January 2013</span></h1>
                        </header>
                        <!-- .page-header -->

                        <!-- If author has a bio, show it. -->

                        <article
                            id="post-1835"
                            class="post post-1835 type-post status-publish format-standard hentry category-coding tag-c tag-linq tag-mongodb"
                        >
                            <!-- Grab the featured image -->

                            <header class="entry-header">
                                <div class="entry-date">
                                    <span class="posted-on"
                                        ><a href="blog/archives/1835" rel="bookmark"
                                            ><time class="entry-date published" datetime="2013-01-26T16:56:00-06:00"
                                                >January 26, 2013</time
                                            ><time class="updated" datetime="2013-01-26T14:39:01-06:00"
                                                >January 26, 2013</time
                                            ></a
                                        ></span
                                    ><span class="byline"> by </span>
                                    <span class="author vcard"
                                        ><a class="url fn n" href="blog/archives/author/aaron"
                                            >Aaron</a
                                        ></span
                                    >
                                </div>
                                <!-- .entry-meta -->

                                <h1 class="entry-title">
                                    <a href="blog/archives/1835" rel="bookmark"
                                        >How to rewrite a MongoDB C# LINQ with a Projection Requirement using a
                                        MongoCursor</a
                                    >
                                </h1>
                            </header>
                            <!-- .entry-header -->

                            <div class="entry-meta">
                                <ul class="meta-list">
                                    <li class="meta-cat">
                                        <a href="blog/archives/category/coding" rel="category tag">Coding</a>
                                    </li>
                                    <li class="meta-tag">
                                        <a href="blog/archives/tag/c" rel="tag">C#</a>,
                                        <a href="blog/archives/tag/linq" rel="tag">LINQ</a>,
                                        <a href="blog/archives/tag/mongodb" rel="tag">MongoDB</a>
                                    </li>
                                </ul>
                            </div>
                            <div class="entry-content">
                                <p align="left">
                                    The LINQ Provider for MongoDB does not
                                    <a href="https://jira.mongodb.org/browse/CSHARP-456">currently</a> take into account
                                    data projections efficiently when returning data. This could mean that youâ€™re
                                    unnecessarily returning more data from the database than is needed.
                                </p>
                                <p>
                                    So, Iâ€™m going to show you the pattern I applied as a replacement for the LINQ
                                    queries when I need to use a projection.
                                </p>
                                <p>Given the following simple LINQ statement:</p>
                                <pre class="csharpcode">var query = 
    (from r <span class="kwrd">in</span> DataLayer.Database
         .GetCollection&lt;Research&gt;()
         .AsQueryable&lt;Research&gt;()
        <span class="kwrd">where</span> !r.Deleted
        select <span class="kwrd">new</span>
        {
            Id = r.Id,
            Title = r.Title,
            Created = r.Created
        }).Skip(PageSize * page).Take(PageSize);</pre>
                                <p>
                                    <style type="text/css">
                                        .csharpcode,
                                        .csharpcode pre {
                                            font-size: small;
                                            color: black;
                                            font-family: consolas, "Courier New", courier, monospace;
                                            background-color: #ffffff;
                                            /*white-space: pre;*/
                                        }
                                        .csharpcode pre {
                                            margin: 0em;
                                        }
                                        .csharpcode .rem {
                                            color: #008000;
                                        }
                                        .csharpcode .kwrd {
                                            color: #0000ff;
                                        }
                                        .csharpcode .str {
                                            color: #006080;
                                        }
                                        .csharpcode .op {
                                            color: #0000c0;
                                        }
                                        .csharpcode .preproc {
                                            color: #cc6633;
                                        }
                                        .csharpcode .asp {
                                            background-color: #ffff00;
                                        }
                                        .csharpcode .html {
                                            color: #800000;
                                        }
                                        .csharpcode .attr {
                                            color: #ff0000;
                                        }
                                        .csharpcode .alt {
                                            background-color: #f4f4f4;
                                            width: 100%;
                                            margin: 0em;
                                        }
                                        .csharpcode .lnum {
                                            color: #606060;
                                        }
                                    </style>
                                </p>
                                <p>it can be converted to a MongoCursor style search like this:</p>
                                <pre class="csharpcode">var cursor = DataLayer.Database.GetCollection&lt;Research&gt;()
    .FindAs&lt;Research&gt;(Query&lt;Research&gt;.NE(r =&gt; r.Deleted, <span class="kwrd">true</span>))
        .SetFields(
            Fields&lt;Research&gt;.Include(
                r =&gt; r.Id, 
                r =&gt; r.Title, 
                r =&gt; r.Created))
        .SetLimit(PageSize)
        .SetSkip(PageSize * page);           </pre>
                                <p>
                                    <style type="text/css">
                                        .csharpcode,
                                        .csharpcode pre {
                                            font-size: small;
                                            color: black;
                                            font-family: consolas, "Courier New", courier, monospace;
                                            background-color: #ffffff;
                                            /*white-space: pre;*/
                                        }
                                        .csharpcode pre {
                                            margin: 0em;
                                        }
                                        .csharpcode .rem {
                                            color: #008000;
                                        }
                                        .csharpcode .kwrd {
                                            color: #0000ff;
                                        }
                                        .csharpcode .str {
                                            color: #006080;
                                        }
                                        .csharpcode .op {
                                            color: #0000c0;
                                        }
                                        .csharpcode .preproc {
                                            color: #cc6633;
                                        }
                                        .csharpcode .asp {
                                            background-color: #ffff00;
                                        }
                                        .csharpcode .html {
                                            color: #800000;
                                        }
                                        .csharpcode .attr {
                                            color: #ff0000;
                                        }
                                        .csharpcode .alt {
                                            background-color: #f4f4f4;
                                            width: 100%;
                                            margin: 0em;
                                        }
                                        .csharpcode .lnum {
                                            color: #606060;
                                        }
                                    </style>
                                </p>
                                <p>
                                    Iâ€™ve attempted to format it in a similar way mostly for my own sanity. As you see,
                                    both queries first get access to the database collection. But, instead of using
                                    <strong>AsQueryable&lt;T&gt;</strong>, youâ€™ll use the
                                    <strong>FindAs&lt;T&gt;</strong> method. The query is more verbose in the second
                                    example, although not overly so. I chose to keep it strongly typed by using the
                                    generic version <strong>Query&lt;Research&gt;</strong>. By doing so, it meant that I
                                    could use an Expression to set the field/property that was being queried, rather
                                    than rely on a string (I could have just passed â€œDeletedâ€ as a string in the code).
                                </p>
                                <p>
                                    By strongly typing the parameters in this way, it meant that the compile process can
                                    catch things like type mismatches (verifying that the value being compared is a
                                    Boolean for example as is the Deleted property).
                                </p>
                                <p>
                                    Secondly, and this addresses the requirement of a
                                    <a href="http://docs.mongodb.org/manual/core/read-operations/#result-projections"
                                        >result projection</a
                                    >, Iâ€™ve included just those fields that are required by the UI rather than all of
                                    the fields in the document. One of the fields is potentially quite long (up to 1MB
                                    of text), and in this case, unnecessary in a summary list display in my web
                                    application. Here, I used the <strong>SetFields </strong>method of the MongoCursor.
                                </p>
                                <p>
                                    The C# driver includes a static class called <strong>Fields</strong> (in a generic
                                    and non-generic form) which can be used to express the set of fields to be
                                    included/excluded. Iâ€™ll point out that there is an option to just pass in a list of
                                    strings to <strong>SetFields</strong>, but itâ€™s not strongly typed. So again, no
                                    compile-time checking that Iâ€™ve got the property names correct. Iâ€™m going for safety
                                    here, so I chose the strongly-typed generic implementation of
                                    <strong>Fields&lt;Research&gt;</strong>. Then, using the
                                    <strong>Expression</strong> syntax again, Iâ€™ve selected the fields I needed as a
                                    parameter list.
                                </p>
                                <p>
                                    Finally, I added some code to limit the result size and set the skip equivalent to
                                    the original LINQ query.
                                </p>
                                <p>
                                    There are a number of other Query methods that you can use to build more complex
                                    operations.
                                </p>
                                <p>For example:</p>
                                <pre class="csharpcode">var q = Query.And(
    Query&lt;Research&gt;.Exists(r =&gt; r.Title), 
    Query&lt;Research&gt;.Matches(
        r =&gt; r.Title, BsonRegularExpression.Create(<span class="kwrd">new</span> Regex(<span class="str">&quot;^R&quot;</span>))));</pre>
                                <p>
                                    <style type="text/css">
                                        .csharpcode,
                                        .csharpcode pre {
                                            font-size: small;
                                            color: black;
                                            font-family: consolas, "Courier New", courier, monospace;
                                            background-color: #ffffff;
                                            /*white-space: pre;*/
                                        }
                                        .csharpcode pre {
                                            margin: 0em;
                                        }
                                        .csharpcode .rem {
                                            color: #008000;
                                        }
                                        .csharpcode .kwrd {
                                            color: #0000ff;
                                        }
                                        .csharpcode .str {
                                            color: #006080;
                                        }
                                        .csharpcode .op {
                                            color: #0000c0;
                                        }
                                        .csharpcode .preproc {
                                            color: #cc6633;
                                        }
                                        .csharpcode .asp {
                                            background-color: #ffff00;
                                        }
                                        .csharpcode .html {
                                            color: #800000;
                                        }
                                        .csharpcode .attr {
                                            color: #ff0000;
                                        }
                                        .csharpcode .alt {
                                            background-color: #f4f4f4;
                                            width: 100%;
                                            margin: 0em;
                                        }
                                        .csharpcode .lnum {
                                            color: #606060;
                                        }
                                    </style>
                                </p>
                                <p>The above maps to the following MongoDB query:</p>
                                <pre
                                    class="csharpcode"
                                >{ <span class="str">&quot;$and&quot;</span> : [{ <span class="str">&quot;Title&quot;</span> : { <span class="str">&quot;$exists&quot;</span> : <span class="kwrd">true</span> } }, { <span class="str">&quot;Title&quot;</span> : /^R/ }] }</pre>
                                <p>Title field exists and the Title field starts with an uppercase â€œRâ€.</p>
                                <p>
                                    While the Query style syntax is more verbose than the equivalent LINQ statement, the
                                    result still is expressive and very readable and maintainable.
                                </p>
                                <p>
                                    FYI: If thereâ€™s an index on Title, then the /^R/ syntax returns the results the most
                                    <a href="http://docs.mongodb.org/manual/reference/operator/regex/#_S_regex"
                                        >efficiently</a
                                    >
                                    in MongoDB (as it stops searching after the first character).
                                </p>
                            </div>
                            <!-- .entry-content -->
                        </article>
                        <!-- #post-## -->

                        <div class="code-block code-block-1" style="margin: 8px 0; clear: both">
                            <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
                            <ins
                                class="adsbygoogle"
                                style="display: block"
                                data-ad-format="fluid"
                                data-ad-layout-key="-fg+5r+6l-ft+4e"
                                data-ad-client="ca-pub-2328055154157951"
                                data-ad-slot="9395646477"
                            ></ins>
                            <script>
                                (adsbygoogle = window.adsbygoogle || []).push({});
                            </script>
                        </div>

                        <article
                            id="post-1833"
                            class="post post-1833 type-post status-publish format-standard hentry category-coding tag-c tag-iqueryable tag-linq tag-mongodb"
                        >
                            <!-- Grab the featured image -->

                            <header class="entry-header">
                                <div class="entry-date">
                                    <span class="posted-on"
                                        ><a href="blog/archives/1833" rel="bookmark"
                                            ><time class="entry-date published" datetime="2013-01-26T11:04:46-06:00"
                                                >January 26, 2013</time
                                            ><time class="updated" datetime="2013-01-26T11:05:53-06:00"
                                                >January 26, 2013</time
                                            ></a
                                        ></span
                                    ><span class="byline"> by </span>
                                    <span class="author vcard"
                                        ><a class="url fn n" href="blog/archives/author/aaron"
                                            >Aaron</a
                                        ></span
                                    >
                                </div>
                                <!-- .entry-meta -->

                                <h1 class="entry-title">
                                    <a href="blog/archives/1833" rel="bookmark"
                                        >How to view the MongoDB Query when using the C# LINQ Provider</a
                                    >
                                </h1>
                            </header>
                            <!-- .entry-header -->

                            <div class="entry-meta">
                                <ul class="meta-list">
                                    <li class="meta-cat">
                                        <a href="blog/archives/category/coding" rel="category tag">Coding</a>
                                    </li>
                                    <li class="meta-tag">
                                        <a href="blog/archives/tag/c" rel="tag">C#</a>,
                                        <a href="blog/archives/tag/iqueryable" rel="tag">IQueryable</a>,
                                        <a href="blog/archives/tag/linq" rel="tag">LINQ</a>,
                                        <a href="blog/archives/tag/mongodb" rel="tag">MongoDB</a>
                                    </li>
                                </ul>
                            </div>
                            <div class="entry-content">
                                <p>
                                    If youâ€™re using the
                                    <a href="http://www.mongodb.org/display/DOCS/CSharp+Language+Center"
                                        >Official MongoDB C# Driver</a
                                    >
                                    from 10gen, you may want to occasionally verify that the generated query matches
                                    your LINQ query (or at least that itâ€™s building something efficient).
                                </p>
                                <p>Take for example this query:</p>
                                <pre class="csharpcode">var query = 
    (from r <span class="kwrd">in</span> DataLayer.Database.GetCollection&lt;Research&gt;().AsQueryable&lt;Research&gt;()
        <span class="kwrd">where</span> !r.Deleted
        select <span class="kwrd">new</span>
        {
            Id = r.Id,
            Title = r.Title,
            Created = r.Created
        }).Skip(PageSize * page).Take(PageSize);

query.DebugWriteMongoQueryText();</pre>
                                <p>
                                    <style type="text/css">
                                        .csharpcode,
                                        .csharpcode pre {
                                            font-size: small;
                                            color: black;
                                            font-family: consolas, "Courier New", courier, monospace;
                                            background-color: #ffffff;
                                            /*white-space: pre;*/
                                        }
                                        .csharpcode pre {
                                            margin: 0em;
                                        }
                                        .csharpcode .rem {
                                            color: #008000;
                                        }
                                        .csharpcode .kwrd {
                                            color: #0000ff;
                                        }
                                        .csharpcode .str {
                                            color: #006080;
                                        }
                                        .csharpcode .op {
                                            color: #0000c0;
                                        }
                                        .csharpcode .preproc {
                                            color: #cc6633;
                                        }
                                        .csharpcode .asp {
                                            background-color: #ffff00;
                                        }
                                        .csharpcode .html {
                                            color: #800000;
                                        }
                                        .csharpcode .attr {
                                            color: #ff0000;
                                        }
                                        .csharpcode .alt {
                                            background-color: #f4f4f4;
                                            width: 100%;
                                            margin: 0em;
                                        }
                                        .csharpcode .lnum {
                                            color: #606060;
                                        }
                                    </style>
                                </p>
                                <p>
                                    I wanted to verify that the query was checking the Deleted property, and see if the
                                    projection was considered as part of the query, so a few lines of code later â€¦
                                </p>
                                <pre
                                    class="csharpcode"
                                ><span class="kwrd">public</span> <span class="kwrd">static</span> <span class="kwrd">string</span> ToMongoQueryText&lt;TQueryable&gt;(<span class="kwrd">this</span> IQueryable&lt;TQueryable&gt; query)
{
    <span class="kwrd">return</span> (query <span class="kwrd">as</span> MongoQueryable&lt;TQueryable&gt;).GetMongoQuery().ToString();            
}

[Conditional(<span class="str">&quot;DEBUG&quot;</span>)]
<span class="kwrd">public</span> <span class="kwrd">static</span> <span class="kwrd">void</span> DebugWriteMongoQueryText&lt;TQuerable&gt;(<span class="kwrd">this</span> IQueryable&lt;TQuerable&gt; query)
{
    Debug.WriteLine(<span class="str">&quot;QUERY: &quot;</span> + query.ToMongoQueryText());
}</pre>
                                <p>
                                    <style type="text/css">
                                        .csharpcode,
                                        .csharpcode pre {
                                            font-size: small;
                                            color: black;
                                            font-family: consolas, "Courier New", courier, monospace;
                                            background-color: #ffffff;
                                            /*white-space: pre;*/
                                        }
                                        .csharpcode pre {
                                            margin: 0em;
                                        }
                                        .csharpcode .rem {
                                            color: #008000;
                                        }
                                        .csharpcode .kwrd {
                                            color: #0000ff;
                                        }
                                        .csharpcode .str {
                                            color: #006080;
                                        }
                                        .csharpcode .op {
                                            color: #0000c0;
                                        }
                                        .csharpcode .preproc {
                                            color: #cc6633;
                                        }
                                        .csharpcode .asp {
                                            background-color: #ffff00;
                                        }
                                        .csharpcode .html {
                                            color: #800000;
                                        }
                                        .csharpcode .attr {
                                            color: #ff0000;
                                        }
                                        .csharpcode .alt {
                                            background-color: #f4f4f4;
                                            width: 100%;
                                            margin: 0em;
                                        }
                                        .csharpcode .lnum {
                                            color: #606060;
                                        }
                                    </style>
                                </p>
                                <p>
                                    I added two extension methods to IQueryable. As the return type for the query in my
                                    sample is actually an anonymous type, it wasnâ€™t something I could easily type in the
                                    Immediate Window in Visual Studio for example.
                                </p>
                                <p>
                                    <a href="blog/wpcontent/uploads/2013/01/image1.png"
                                        ><img
                                            title="image"
                                            style="
                                                border-top: 0px;
                                                border-right: 0px;
                                                background-image: none;
                                                border-bottom: 0px;
                                                float: none;
                                                padding-top: 0px;
                                                padding-left: 0px;
                                                margin-left: auto;
                                                border-left: 0px;
                                                display: block;
                                                padding-right: 0px;
                                                margin-right: auto;
                                            "
                                            border="0"
                                            alt="&lt;&gt;f__AnonymousType2&lt;string,string,System.DateTime&gt;"
                                            src="blog/wpcontent/uploads/2013/01/image_thumb1.png"
                                            width="514"
                                            height="95"
                                    /></a>
                                </p>
                                <p>No thanks&#160; &lt;&gt;f__AnonymousType2&lt;string,string,System.DateTime&gt;.</p>
                                <p>
                                    I added the
                                    <a
                                        href="http://msdn.microsoft.com/en-us/library/system.diagnostics.conditionalattribute(v=vs.110).aspx"
                                        >Conditional</a
                                    >
                                    Attribute so that the code would only execute in a Debug build of my application.
                                </p>
                                <pre class="csharpcode">query.DebugWriteMongoQueryText();</pre>
                                <p>The output of the query above was:</p>
                                <pre
                                    class="csharpcode"
                                >QUERY: { <span class="str">&quot;Deleted&quot;</span> : { <span class="str">&quot;$ne&quot;</span> : <span class="kwrd">true</span> } }</pre>
                                <p>
                                    <style type="text/css">
                                        .csharpcode,
                                        .csharpcode pre {
                                            font-size: small;
                                            color: black;
                                            font-family: consolas, "Courier New", courier, monospace;
                                            background-color: #ffffff;
                                            /*white-space: pre;*/
                                        }
                                        .csharpcode pre {
                                            margin: 0em;
                                        }
                                        .csharpcode .rem {
                                            color: #008000;
                                        }
                                        .csharpcode .kwrd {
                                            color: #0000ff;
                                        }
                                        .csharpcode .str {
                                            color: #006080;
                                        }
                                        .csharpcode .op {
                                            color: #0000c0;
                                        }
                                        .csharpcode .preproc {
                                            color: #cc6633;
                                        }
                                        .csharpcode .asp {
                                            background-color: #ffff00;
                                        }
                                        .csharpcode .html {
                                            color: #800000;
                                        }
                                        .csharpcode .attr {
                                            color: #ff0000;
                                        }
                                        .csharpcode .alt {
                                            background-color: #f4f4f4;
                                            width: 100%;
                                            margin: 0em;
                                        }
                                        .csharpcode .lnum {
                                            color: #606060;
                                        }
                                    </style>
                                </p>
                                <p>
                                    As youâ€™ll see, the anonymous projection wasnâ€™t considered. Unfortunately, thatâ€™s a
                                    <a href="https://jira.mongodb.org/browse/CSHARP-456">known issue</a> with the
                                    current driver. This mattered in my above example, as some of the fields could
                                    contain a large amount of data that wasnâ€™t needed by the current display.
                                </p>
                            </div>
                            <!-- .entry-content -->
                        </article>
                        <!-- #post-## -->

                        <div class="code-block code-block-1" style="margin: 8px 0; clear: both">
                            <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
                            <ins
                                class="adsbygoogle"
                                style="display: block"
                                data-ad-format="fluid"
                                data-ad-layout-key="-fg+5r+6l-ft+4e"
                                data-ad-client="ca-pub-2328055154157951"
                                data-ad-slot="9395646477"
                            ></ins>
                            <script>
                                (adsbygoogle = window.adsbygoogle || []).push({});
                            </script>
                        </div>

                        <article
                            id="post-1820"
                            class="post post-1820 type-post status-publish format-standard hentry category-coding tag-asp-net tag-javascript tag-knockout tag-mvc"
                        >
                            <!-- Grab the featured image -->

                            <header class="entry-header">
                                <div class="entry-date">
                                    <span class="posted-on"
                                        ><a href="blog/archives/1820" rel="bookmark"
                                            ><time class="entry-date published" datetime="2013-01-25T20:48:30-06:00"
                                                >January 25, 2013</time
                                            ><time class="updated" datetime="2013-01-26T10:44:23-06:00"
                                                >January 26, 2013</time
                                            ></a
                                        ></span
                                    ><span class="byline"> by </span>
                                    <span class="author vcard"
                                        ><a class="url fn n" href="blog/archives/author/aaron"
                                            >Aaron</a
                                        ></span
                                    >
                                </div>
                                <!-- .entry-meta -->

                                <h1 class="entry-title">
                                    <a href="blog/archives/1820" rel="bookmark"
                                        >Knockout binding for JavaScript route fixup</a
                                    >
                                </h1>
                            </header>
                            <!-- .entry-header -->

                            <div class="entry-meta">
                                <ul class="meta-list">
                                    <li class="meta-cat">
                                        <a href="blog/archives/category/coding" rel="category tag">Coding</a>
                                    </li>
                                    <li class="meta-tag">
                                        <a href="blog/archives/tag/asp-net" rel="tag">ASP.NET</a>,
                                        <a href="blog/archives/tag/javascript" rel="tag">JavaScript</a>,
                                        <a href="blog/archives/tag/knockout" rel="tag">Knockout</a>,
                                        <a href="blog/archives/tag/mvc" rel="tag">MVC</a>
                                    </li>
                                    <li class="meta-comment">
                                        <span class="comments-link"
                                            ><a href="blog/archives/1820#comments">5 Comments</a></span
                                        >
                                    </li>
                                </ul>
                            </div>
                            <div class="entry-content">
                                <p><a href="blog/archives/1800">Part one.</a></p>
                                <p>
                                    After the first round, I felt compelled to KnockOut the code a bit more. Iâ€™d
                                    mentioned I wasnâ€™t pleased with the code exactly. It needed some refactoring.
                                </p>
                                <p>
                                    So, Iâ€™ve created a new Knockout binding handler. This binding handler replaces&#160;
                                    named parameters with a modelâ€™s properties in a path.
                                </p>
                                <p>For example, given this object:</p>
                                <table cellspacing="0" cellpadding="2" width="400" border="1">
                                    <tbody>
                                        <tr>
                                            <td valign="top" width="200"><strong>Property Name</strong></td>
                                            <td valign="top" width="200"><strong>Value</strong></td>
                                        </tr>
                                        <tr>
                                            <td valign="top" width="200">id</td>
                                            <td valign="top" width="200">A123</td>
                                        </tr>
                                        <tr>
                                            <td valign="top" width="200">first_name</td>
                                            <td valign="top" width="200">Aaron</td>
                                        </tr>
                                        <tr>
                                            <td valign="top" width="200">state</td>
                                            <td valign="top" width="200">WI</td>
                                        </tr>
                                    </tbody>
                                </table>
                                <p>The following paths would be converted thusly:</p>
                                <table cellspacing="0" cellpadding="2" width="400" border="1">
                                    <tbody>
                                        <tr>
                                            <td valign="top" width="200"><strong>Original</strong></td>
                                            <td valign="top" width="200"><strong>Replaced</strong></td>
                                        </tr>
                                        <tr>
                                            <td valign="top" width="200">/person/{id}</td>
                                            <td valign="top" width="200">/person/A123</td>
                                        </tr>
                                        <tr>
                                            <td valign="top" width="200">/person/{state}/{id}</td>
                                            <td valign="top" width="200">/person/WI/A123</td>
                                        </tr>
                                    </tbody>
                                </table>
                                <p>You get the idea. Hereâ€™s the JavaScript code:</p>
                                <pre class="csharpcode">ko.bindingHandlers[<span class="str">'route'</span>] = {
    <span class="rem">// Examples: </span>
    <span class="rem">//      &lt;a data-bind=&quot;route: {model: $data, url: 'person_details', attr: 'href' }&quot; &gt;</span>
    <span class="rem">// or, you can shortcut the syntax to default to the currently bound object and just pass </span>
    <span class="rem">// the url or the route name as a string directly</span>
    <span class="rem">//      &lt;a data-bind=&quot;route: 'person_details' }&quot; &gt;</span>
    update: <span class="kwrd">function</span> (element, valueAccessor, allBindingsAccessor, $data) {
        <span class="kwrd">var</span> valueUnwrapped = ko.utils.unwrapObservable(valueAccessor());
        <span class="kwrd">var</span> options = ko.bindingHandlers.route.options || {};

        <span class="rem">// look for the model property </span>
        <span class="kwrd">var</span> model = ko.utils.unwrapObservable(valueUnwrapped[<span class="str">'model'</span>]);
        <span class="kwrd">if</span> (<span class="kwrd">typeof</span> model !== <span class="str">'object'</span>) {

            model = ko.utils.unwrapObservable($data);
            <span class="kwrd">if</span> (<span class="kwrd">typeof</span> model === <span class="str">'undefined'</span> || model === <span class="kwrd">null</span>) {
                <span class="kwrd">throw</span> <span class="kwrd">new</span> Error(<span class="str">'set route model to object (or nothing bound?)'</span>);
            }
        }

        <span class="rem">// look for the url property first</span>
        <span class="kwrd">var</span> url = ko.utils.unwrapObservable(valueUnwrapped[<span class="str">'url'</span>]);
        <span class="rem">// validate we've got something as a url (might be a name, might be a full url)        </span>
        <span class="kwrd">if</span> (<span class="kwrd">typeof</span> url !== <span class="str">'string'</span> || url == <span class="str">&quot;&quot;</span>) {
            url = valueUnwrapped;
            <span class="kwrd">if</span> (<span class="kwrd">typeof</span> url !== <span class="str">'string'</span> || url == <span class="str">&quot;&quot;</span>) {
                <span class="kwrd">throw</span> <span class="kwrd">new</span> Error(<span class="str">&quot;set route url property to route name or url directly&quot;</span>);
            }
        }

        <span class="rem">// is it on the keyed collection?</span>
        <span class="kwrd">var</span> map = options.map;
        <span class="kwrd">if</span> (<span class="kwrd">typeof</span> map !== <span class="str">'undefined'</span> &amp;&amp; map !== <span class="kwrd">null</span>) {
            <span class="kwrd">if</span> (map.hasOwnProperty(url)) {
                url = map[url];
            }
        }
        <span class="rem">// check for a routing function as well</span>
        <span class="kwrd">var</span> fn = options.routeNameToUrl;
        <span class="kwrd">if</span> (<span class="kwrd">typeof</span> fn === <span class="str">'function'</span>) { url = fn.call(<span class="kwrd">null</span>, url); }
        <span class="rem">// did we get something meaningful?</span>
        <span class="kwrd">if</span> (url !== <span class="kwrd">null</span> &amp;&amp; url !== <span class="str">''</span> &amp;&amp; url.length &gt; 0) {
            url = ko.bindingHandlers.route.buildUrl(url, model);            
        }
        <span class="rem">// the url might need some fixin after a routing, anything goes here (might just be a default)</span>
        fn = options.fixUrl;
        <span class="kwrd">if</span> (<span class="kwrd">typeof</span> fn === <span class="str">'function'</span>) { url = fn.call(<span class="kwrd">null</span>, url); }
        element.setAttribute(ko.utils.unwrapObservable(valueUnwrapped[<span class="str">'attr'</span>]) || <span class="str">'href'</span>, url);
    },    

    <span class="rem">// given a model, this function replaces named parameters in a simple string </span>
    <span class="rem">// with values from the model</span>
    <span class="rem">//     /path/to/some/{id}/{category}</span>
    <span class="rem">// with object { 'id' : 'abc', 'category' : 'cars' }</span>
    <span class="rem">// becomes</span>
    <span class="rem">//     /path/to/some/abc/cars</span>
    buildUrl : <span class="kwrd">function</span>(url, model) {
        <span class="rem">// unfixed if there's not a thing</span>
        <span class="kwrd">if</span> (<span class="kwrd">typeof</span> model === <span class="str">'undefined'</span> || model === <span class="kwrd">null</span>) { <span class="kwrd">return</span> url; }

        <span class="kwrd">var</span> propValue;
        <span class="kwrd">for</span> (<span class="kwrd">var</span> propName <span class="kwrd">in</span> model) {                
            <span class="kwrd">if</span> (model.hasOwnProperty(propName)) {
                propValue = model[propName];
                <span class="kwrd">if</span> (ko) { propValue = ko.utils.unwrapObservable(propValue); }

                <span class="kwrd">if</span> (<span class="kwrd">typeof</span> propValue === <span class="str">'undefined'</span> || propValue === <span class="kwrd">null</span>) {
                    propValue = <span class="str">&quot;&quot;</span>;
                } <span class="kwrd">else</span> {
                    propValue = propValue.toString();
                }
                url = url.replace(<span class="str">'{'</span> + propName.toLowerCase() + <span class="str">'}'</span>, propValue);
            }
        }
        <span class="kwrd">return</span> url;
    },

    options: {
        <span class="rem">// ** convert a route name to a url through whatever means you'd like</span>
        <span class="rem">// routeNameToUrl : function(routeName) { return url; } </span>

        <span class="rem">// ** anything you want, called after routeNameToUrl, might add a virtual directory</span>
        <span class="rem">// ** for example</span>
        <span class="rem">// fixUrl: function(url) { return url;  }  </span>

        <span class="rem">// ** A map route names to URLs **</span>
        <span class="rem">// all other functions are called if set (to possibly override this)</span>
        <span class="rem">// this is not required if you use one of the other functions</span>
        <span class="rem">// map : { 'a_route_name' : '/path/to/something/{id}/{action}' }        </span>
    }
};</pre>
                                <style type="text/css">
                                    .csharpcode,
                                    .csharpcode pre {
                                        font-size: small;
                                        color: black;
                                        font-family: consolas, "Courier New", courier, monospace;
                                        background-color: #ffffff;
                                        /*white-space: pre;*/
                                    }
                                    .csharpcode pre {
                                        margin: 0em;
                                    }
                                    .csharpcode .rem {
                                        color: #008000;
                                    }
                                    .csharpcode .kwrd {
                                        color: #0000ff;
                                    }
                                    .csharpcode .str {
                                        color: #006080;
                                    }
                                    .csharpcode .op {
                                        color: #0000c0;
                                    }
                                    .csharpcode .preproc {
                                        color: #cc6633;
                                    }
                                    .csharpcode .asp {
                                        background-color: #ffff00;
                                    }
                                    .csharpcode .html {
                                        color: #800000;
                                    }
                                    .csharpcode .attr {
                                        color: #ff0000;
                                    }
                                    .csharpcode .alt {
                                        background-color: #f4f4f4;
                                        width: 100%;
                                        margin: 0em;
                                    }
                                    .csharpcode .lnum {
                                        color: #606060;
                                    }
                                </style>
                                <style type="text/css">
                                    .csharpcode,
                                    .csharpcode pre {
                                        font-size: small;
                                        color: black;
                                        font-family: consolas, "Courier New", courier, monospace;
                                        background-color: #ffffff;
                                        /*white-space: pre;*/
                                    }
                                    .csharpcode pre {
                                        margin: 0em;
                                    }
                                    .csharpcode .rem {
                                        color: #008000;
                                    }
                                    .csharpcode .kwrd {
                                        color: #0000ff;
                                    }
                                    .csharpcode .str {
                                        color: #006080;
                                    }
                                    .csharpcode .op {
                                        color: #0000c0;
                                    }
                                    .csharpcode .preproc {
                                        color: #cc6633;
                                    }
                                    .csharpcode .asp {
                                        background-color: #ffff00;
                                    }
                                    .csharpcode .html {
                                        color: #800000;
                                    }
                                    .csharpcode .attr {
                                        color: #ff0000;
                                    }
                                    .csharpcode .alt {
                                        background-color: #f4f4f4;
                                        width: 100%;
                                        margin: 0em;
                                    }
                                    .csharpcode .lnum {
                                        color: #606060;
                                    }
                                </style>
                                <p>In another JavaScript file, I did initialize some of the options:</p>
                                <pre class="csharpcode">
ko.bindingHandlers.route.options.routeNameToUrl = getRoute;
ko.bindingHandlers.route.options.fixUrl = app_url;</pre
                                >
                                <style type="text/css">
                                    .csharpcode,
                                    .csharpcode pre {
                                        font-size: small;
                                        color: black;
                                        font-family: consolas, "Courier New", courier, monospace;
                                        background-color: #ffffff;
                                        /*white-space: pre;*/
                                    }
                                    .csharpcode pre {
                                        margin: 0em;
                                    }
                                    .csharpcode .rem {
                                        color: #008000;
                                    }
                                    .csharpcode .kwrd {
                                        color: #0000ff;
                                    }
                                    .csharpcode .str {
                                        color: #006080;
                                    }
                                    .csharpcode .op {
                                        color: #0000c0;
                                    }
                                    .csharpcode .preproc {
                                        color: #cc6633;
                                    }
                                    .csharpcode .asp {
                                        background-color: #ffff00;
                                    }
                                    .csharpcode .html {
                                        color: #800000;
                                    }
                                    .csharpcode .attr {
                                        color: #ff0000;
                                    }
                                    .csharpcode .alt {
                                        background-color: #f4f4f4;
                                        width: 100%;
                                        margin: 0em;
                                    }
                                    .csharpcode .lnum {
                                        color: #606060;
                                    }
                                </style>
                                <p>
                                    The <strong>getRoute</strong> function just maps a route name to a path, and the
                                    <strong>app_url</strong> prepends the virtual directory to the path as needed.
                                </p>
                                <p>Here it is in use:</p>
                                <pre
                                    class="csharpcode"
                                ><span class="kwrd">&lt;</span><span class="html">div</span> <span class="attr">data-bind</span><span class="kwrd">=&quot;foreach: data.persons&quot;</span><span class="kwrd">&gt;</span>
    <span class="kwrd">&lt;</span><span class="html">h3</span> <span class="attr">class</span><span class="kwrd">=&quot;title&quot;</span> <span class="attr">data-bind</span><span class="kwrd">=&quot;text: Title&quot;</span><span class="kwrd">&gt;&lt;/</span><span class="html">h3</span><span class="kwrd">&gt;</span>
    <span class="kwrd">&lt;</span><span class="html">div</span><span class="kwrd">&gt;</span>
        <span class="kwrd">&lt;</span><span class="html">a</span> <span class="attr">data-bind</span><span class="kwrd">=&quot;route: { model: $data, url: 'person_details', attr: 'href' } &quot;</span><span class="kwrd">&gt;</span>Details2<span class="kwrd">&lt;/</span><span class="html">a</span><span class="kwrd">&gt;</span>
        <span class="kwrd">&lt;</span><span class="html">a</span> <span class="attr">data-bind</span><span class="kwrd">=&quot;route: '/data/details/{id}/{title}' &quot;</span><span class="kwrd">&gt;</span>Details<span class="kwrd">&lt;/</span><span class="html">a</span><span class="kwrd">&gt;</span>
        <span class="kwrd">&lt;</span><span class="html">a</span> <span class="attr">data-bind</span><span class="kwrd">=&quot;route: 'person_details' &quot;</span><span class="kwrd">&gt;</span>Details<span class="kwrd">&lt;/</span><span class="html">a</span><span class="kwrd">&gt;</span>
    <span class="kwrd">&lt;/</span><span class="html">div</span><span class="kwrd">&gt;</span>
<span class="kwrd">&lt;/</span><span class="html">div&gt;</span></pre>
                                <style type="text/css">
                                    .csharpcode,
                                    .csharpcode pre {
                                        font-size: small;
                                        color: black;
                                        font-family: consolas, "Courier New", courier, monospace;
                                        background-color: #ffffff;
                                        /*white-space: pre;*/
                                    }
                                    .csharpcode pre {
                                        margin: 0em;
                                    }
                                    .csharpcode .rem {
                                        color: #008000;
                                    }
                                    .csharpcode .kwrd {
                                        color: #0000ff;
                                    }
                                    .csharpcode .str {
                                        color: #006080;
                                    }
                                    .csharpcode .op {
                                        color: #0000c0;
                                    }
                                    .csharpcode .preproc {
                                        color: #cc6633;
                                    }
                                    .csharpcode .asp {
                                        background-color: #ffff00;
                                    }
                                    .csharpcode .html {
                                        color: #800000;
                                    }
                                    .csharpcode .attr {
                                        color: #ff0000;
                                    }
                                    .csharpcode .alt {
                                        background-color: #f4f4f4;
                                        width: 100%;
                                        margin: 0em;
                                    }
                                    .csharpcode .lnum {
                                        color: #606060;
                                    }
                                </style>
                                <style type="text/css">
                                    .csharpcode,
                                    .csharpcode pre {
                                        font-size: small;
                                        color: black;
                                        font-family: consolas, "Courier New", courier, monospace;
                                        background-color: #ffffff;
                                        /*white-space: pre;*/
                                    }
                                    .csharpcode pre {
                                        margin: 0em;
                                    }
                                    .csharpcode .rem {
                                        color: #008000;
                                    }
                                    .csharpcode .kwrd {
                                        color: #0000ff;
                                    }
                                    .csharpcode .str {
                                        color: #006080;
                                    }
                                    .csharpcode .op {
                                        color: #0000c0;
                                    }
                                    .csharpcode .preproc {
                                        color: #cc6633;
                                    }
                                    .csharpcode .asp {
                                        background-color: #ffff00;
                                    }
                                    .csharpcode .html {
                                        color: #800000;
                                    }
                                    .csharpcode .attr {
                                        color: #ff0000;
                                    }
                                    .csharpcode .alt {
                                        background-color: #f4f4f4;
                                        width: 100%;
                                        margin: 0em;
                                    }
                                    .csharpcode .lnum {
                                        color: #606060;
                                    }
                                </style>
                                <p>
                                    Youâ€™ll probably like the new way better syntactically at least compared to the
                                    <a href="blog/archives/1800">old</a> way. A route binding requires one
                                    input when used in itâ€™s most basic form:
                                </p>
                                <ul>
                                    <li>
                                        <strong>url = </strong>the URL or route name to use as the template for the
                                        replacement. It should contain (or later resolve to) curly-braced enclosed
                                        property name keys which will be substituted by values from the model. The value
                                        of the property could be either a route name (see options below) or a path.
                                    </li>
                                </ul>
                                <p>When using just the basic form you can use the shortened syntax:</p>
                                <pre
                                    class="csharpcode"
                                ><span class="kwrd">&lt;</span><span class="html">a</span> <span class="attr">data-bind</span><span class="kwrd">=&quot;route: 'research_details' &quot;</span><span class="kwrd">&gt;</span>Details<span class="kwrd">&lt;/</span><span class="html">a</span><span class="kwrd">&gt;</span></pre>
                                <p>
                                    This handily binds to the current object (via the bindingContext.$data property of
                                    the bindingHandler update function call, which is <strong>also </strong>the fourth
                                    parameter, which Iâ€™ve renamed to $data rather than the typical viewModel). So, you
                                    wonâ€™t need to necessarily (explicitly) set the model for the binding.
                                </p>
                                <p>
                                    If you need a a bit more control, you can change the syntax and get access to a few
                                    other options (including direct access to the model you want to bind to if the
                                    current item isnâ€™t directly what you want to use).
                                </p>
                                <ul>
                                    <li>
                                        <strong>model</strong> = this is the object that contains the properties and
                                        values to be used as replacements within the url
                                    </li>
                                    <li>
                                        <strong>attr </strong>(optional) = the name of the attribute to set the
                                        generated url into. Defaults to href if not set.
                                    </li>
                                </ul>
                                <p>There are a few global options you can control as well:</p>
                                <ul>
                                    <li>
                                        <strong>routeNameToUrl </strong>= (function)(routeName) optionally, given a
                                        route name, should return the path (or the original value). Here you can do a
                                        lookup of routeName to path.
                                    </li>
                                    <li>
                                        <strong>map</strong> = {object} the object properties should be route names and
                                        set equal to the path. this optional lookup is performed before the
                                        routeNameToUrl function is called.
                                    </li>
                                    <li>
                                        <strong>fixUrl</strong> = (function)(url) do anything here. this is called after
                                        the mapping and routeNameToUrl is optionally called. I use this to correct
                                        javascript Ajax request paths by appending the application virtual directory
                                    </li>
                                </ul>
                                <p>
                                    (Thanks to <a href="http://www.knockmeout.net/">Ryan</a> for the suggestion to use
                                    the $data on the bindingContext, and then again for the nudge to just use the 4th
                                    parameter.
                                    <img
                                        class="wlEmoticon wlEmoticon-smile"
                                        style="
                                            border-top-style: none;
                                            border-left-style: none;
                                            border-bottom-style: none;
                                            border-right-style: none;
                                        "
                                        alt="Smile"
                                        src="blog/wpcontent/uploads/2013/01/wlEmoticon-smile.png"
                                    />
                                    )
                                </p>
                            </div>
                            <!-- .entry-content -->
                        </article>
                        <!-- #post-## -->

                        <div class="code-block code-block-1" style="margin: 8px 0; clear: both">
                            <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
                            <ins
                                class="adsbygoogle"
                                style="display: block"
                                data-ad-format="fluid"
                                data-ad-layout-key="-fg+5r+6l-ft+4e"
                                data-ad-client="ca-pub-2328055154157951"
                                data-ad-slot="9395646477"
                            ></ins>
                            <script>
                                (adsbygoogle = window.adsbygoogle || []).push({});
                            </script>
                        </div>

                        <article
                            id="post-1800"
                            class="post post-1800 type-post status-publish format-standard hentry category-coding"
                        >
                            <!-- Grab the featured image -->

                            <header class="entry-header">
                                <div class="entry-date">
                                    <span class="posted-on"
                                        ><a href="blog/archives/1800" rel="bookmark"
                                            ><time class="entry-date published" datetime="2013-01-24T20:56:13-06:00"
                                                >January 24, 2013</time
                                            ></a
                                        ></span
                                    ><span class="byline"> by </span>
                                    <span class="author vcard"
                                        ><a class="url fn n" href="blog/archives/author/aaron"
                                            >Aaron</a
                                        ></span
                                    >
                                </div>
                                <!-- .entry-meta -->

                                <h1 class="entry-title">
                                    <a href="blog/archives/1800" rel="bookmark"
                                        >Named routing with Knockout, ASP.NET MVC, and AttributeRouting, from
                                        JavaScript</a
                                    >
                                </h1>
                            </header>
                            <!-- .entry-header -->

                            <div class="entry-meta">
                                <ul class="meta-list">
                                    <li class="meta-cat">
                                        <a href="blog/archives/category/coding" rel="category tag">Coding</a>
                                    </li>
                                    <li class="meta-comment">
                                        <span class="comments-link"
                                            ><a href="blog/archives/1800#comments">1 Comment</a></span
                                        >
                                    </li>
                                </ul>
                            </div>
                            <div class="entry-content">
                                <p>
                                    It&#8217;s hard to describe exactly what I&#8217;ve built here, but I&#8217;m just
                                    throwing these pieces out on the Internet in case someone: a) finds them useful, or
                                    b) has a better solution.
                                </p>
                                <p>Goals:</p>
                                <ol>
                                    <li>
                                        <span style="line-height: 13px"
                                            >Named routes, with a wee bit of a Rails feel
                                        </span>
                                    </li>
                                    <li>
                                        <span style="line-height: 13px"
                                            >A Knockout friendly syntax for binding to the values of a model to build an
                                            href</span
                                        >
                                    </li>
                                    <li>Automatic replacement of values in the url with values from the model</li>
                                    <li>
                                        JavaScript generation (OK, not really a goal, but a necessary evil I suspected)
                                    </li>
                                </ol>
                                <p>Solution:</p>
                                <p>
                                    <span style="line-height: 13px">I started by using AttributeRouting (from</span
                                    ><a
                                        style="line-height: 13px"
                                        title="Attribute Routing"
                                        href="http://attributerouting.net/"
                                    >
                                        AttributeRouting.net</a
                                    ><span style="line-height: 13px"
                                        >). It offers a simple syntax for creating routes (and naming them):</span
                                    >
                                </p>
                                <p>
                                    [sourcecode language=&#8221;csharp&#8221;]<br />
                                    [GET(&quot;research/{id}&quot;, RouteName = &quot;research_details&quot;)]<br />
                                    public ActionResult Details(string id)<br />
                                    {<br />
                                    var model = new ResearchDetailsViewModel();<br />
                                    [/sourcecode]
                                </p>
                                <p>
                                    In RouteConfig.cs, code gathers the list of named routes, and builds a snippet of
                                    JavaScript which will be inserted on every page (yes, it would be nice if this were
                                    cached, see refactoring below):
                                </p>
                                <p>[sourcecode language=&#8221;csharp&#8221;]</p>
                                <p>
                                    var named = new List();<br />
                                    foreach (var route in RouteTable.Routes)<br />
                                    {<br />
                                    AttributeRoute r = route as AttributeRoute;<br />
                                    Â  Â if (r != null)<br />
                                    Â  Â {<br />
                                    Â  Â Â  Â if (!string.IsNullOrWhiteSpace(r.RouteName))<br />
                                    Â  Â Â  Â {<br />
                                    Â  Â Â  Â Â  Â named.Add(r);<br />
                                    Â  Â Â  Â }<br />
                                    Â  Â }<br />
                                    }<br />
                                    if (named.Count &gt; 0)<br />
                                    {<br />
                                    Â  Â StringBuilder js = new StringBuilder();<br />
                                    Â  Â foreach (var namedRoute in named)<br />
                                    Â  Â {<br />
                                    Â  Â Â  Â js.AppendFormat(@&quot;function {0}_url(model){{ return
                                    buildUrl(&quot;&quot;{1}&quot;&quot;, model); }}&quot;,<br />
                                    Â  Â Â  Â namedRoute.RouteName, namedRoute.Url);<br />
                                    Â  Â Â  Â js.AppendLine();<br />
                                    Â  Â }<br />
                                    Â  Â RouteScript = js.ToString();<br />
                                    }<br />
                                    [/sourcecode]
                                </p>
                                <p>The name of the function is based on the RouteName property of the attribute.</p>
                                <p>I added a function called <strong>buildUrlÂ </strong>to a common JavaScript file:</p>
                                <p>[sourcecode language=&#8221;javascript&#8221;]</p>
                                <p>
                                    function buildUrl(url, model) {<br />
                                    // unfixed if there&#8217;s not a thing<br />
                                    Â  if (typeof model === &#8216;undefined&#8217; || model === null) { return url; }
                                </p>
                                <p>
                                    var propValue;<br />
                                    Â  for (var propName in model) {<br />
                                    Â  Â Â  Â  if (model.hasOwnProperty(propName)) {<br />
                                    propValue = model[propName];<br />
                                    Â  Â Â  Â Â  if (ko) { propValue = ko.utils.unwrapObservable(propValue); }
                                </p>
                                <p>
                                    if (typeof propValue === &#8216;undefined&#8217; || propValue === null) {<br />
                                    Â  Â Â  Â Â  Â Â  propValue = &quot;&quot;;<br />
                                    } else {<br />
                                    Â  Â Â  Â Â  Â  propValue = propValue.toString();<br />
                                    Â  Â Â  Â  }<br />
                                    Â  Â Â  Â  url = url.replace(&#8216;{&#8216; + propName.toLowerCase() + &#8216;}&#8217;,
                                    propValue);<br />
                                    Â  }<br />
                                    Â  Â }<br />
                                    Â  Â return url;<br />
                                    }<br />
                                    [/sourcecode]
                                </p>
                                <p>
                                    The code above validates there is data and then proceeds to loop through every
                                    property of the model to see if there might be a replacement needed within the
                                    passed URL. If Knockout is available (if ko check), then it unwraps the value as the
                                    code needs the raw value from this point onward.
                                </p>
                                <p>It lowercases each property name and tries a replacement.</p>
                                <p>
                                    So, if the string was <strong>/research/{id}/{category}</strong>, and the model has
                                    properties named, <strong>Id</strong> and <strong>Category</strong>, the values of
                                    each will be substituted and returned as a full string. For example, it might be
                                    <strong>/research/123/Coding</strong>.
                                </p>
                                <p>Next, a simple example of using some JSON data:</p>
                                <p>
                                    [sourcecode language=&#8221;javascript&#8221;]<br />
                                    $(functionÂ ()Â {<br />
                                    varÂ vmÂ =Â {<br />
                                    url:Â functionÂ ($data)Â {<br />
                                    returnÂ app_url(research_details_url($data));<br />
                                    },<br />
                                    dataÂ :Â ko.observable()<br />
                                    };
                                </p>
                                <p>
                                    $.getJSON(app_url(&quot;api/research/&quot;)).success(functionÂ (data)Â {<br />
                                    vm.dataÂ =Â ko.mapping.fromJS(data);<br />
                                    ko.applyBindings(vm);<br />
                                    });<br />
                                    });<br />
                                    [/sourcecode]
                                </p>
                                <p>Then, finally, the Knockout template:</p>
                                <p>
                                    [sourcecode language=&#8221;html&#8221;]<br />
                                    &lt;div data-bind=&quot;foreach: data.research&quot;&gt;<br />
                                    &lt;h3 class=&quot;title&quot; data-bind=&quot;text: Title&quot;&gt;&lt;/h3&gt;<br />
                                    &lt;div&gt;<br />
                                    &lt;a data-bind=&quot;attr: { href: $parent.url($data)
                                    }&quot;&gt;Details&lt;/a&gt;<br />
                                    &lt;/div&gt;<br />
                                    &lt;/div&gt;<br />
                                    [/sourcecode]
                                </p>
                                <p>
                                    By using $parent in the template, Knockout points at the view model in this case
                                    (<strong>vm</strong>). On the view model, I added a function called
                                    <strong>url</strong>. Right now, I&#8217;ve hard coded it to point to a specific
                                    dynamically generated function called research_details_url. It&#8217;s passing the
                                    array item (which simply has an Id &amp; Title property). So, the data-bind for the
                                    anchor (A) element assigns the value of the computation to the href attribute.
                                </p>
                                <p>app_url:</p>
                                <p>[sourcecode language=&#8221;javascript&#8221;]</p>
                                <p>
                                    function app_url(url) {<br />
                                    return &quot;@Request.ApplicationPath&quot; + url;<br />
                                    }
                                </p>
                                <p>[/sourcecode]</p>
                                <p>As I said, it&#8217;s not super elegant, but itÂ achievedÂ my basic goals.</p>
                                <p>Elegance rating: 59%</p>
                                <p>Function rating: 100%</p>
                                <p>Need of some refactoring rating: 99%</p>
                            </div>
                            <!-- .entry-content -->
                        </article>
                        <!-- #post-## -->

                        <div class="code-block code-block-1" style="margin: 8px 0; clear: both">
                            <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
                            <ins
                                class="adsbygoogle"
                                style="display: block"
                                data-ad-format="fluid"
                                data-ad-layout-key="-fg+5r+6l-ft+4e"
                                data-ad-client="ca-pub-2328055154157951"
                                data-ad-slot="9395646477"
                            ></ins>
                            <script>
                                (adsbygoogle = window.adsbygoogle || []).push({});
                            </script>
                        </div>

                        <article
                            id="post-1799"
                            class="post post-1799 type-post status-publish format-standard hentry category-recommendations tag-connectivity tag-nest tag-thermostat tag-wifi"
                        >
                            <!-- Grab the featured image -->

                            <header class="entry-header">
                                <div class="entry-date">
                                    <span class="posted-on"
                                        ><a href="blog/archives/1799" rel="bookmark"
                                            ><time class="entry-date published" datetime="2013-01-23T07:47:29-06:00"
                                                >January 23, 2013</time
                                            ></a
                                        ></span
                                    ><span class="byline"> by </span>
                                    <span class="author vcard"
                                        ><a class="url fn n" href="blog/archives/author/aaron"
                                            >Aaron</a
                                        ></span
                                    >
                                </div>
                                <!-- .entry-meta -->

                                <h1 class="entry-title">
                                    <a href="blog/archives/1799" rel="bookmark"
                                        >Nest Thermostat Wifi Connectivity Issues?</a
                                    >
                                </h1>
                            </header>
                            <!-- .entry-header -->

                            <div class="entry-meta">
                                <ul class="meta-list">
                                    <li class="meta-cat">
                                        <a href="blog/archives/category/recommendations" rel="category tag"
                                            >Recommendations</a
                                        >
                                    </li>
                                    <li class="meta-tag">
                                        <a href="blog/archives/tag/connectivity" rel="tag">Connectivity</a>,
                                        <a href="blog/archives/tag/nest" rel="tag">Nest</a>,
                                        <a href="blog/archives/tag/thermostat" rel="tag">Thermostat</a>,
                                        <a href="blog/archives/tag/wifi" rel="tag">Wifi</a>
                                    </li>
                                    <li class="meta-comment">
                                        <span class="comments-link"
                                            ><a href="blog/archives/1799#comments">7 Comments</a></span
                                        >
                                    </li>
                                </ul>
                            </div>
                            <div class="entry-content">
                                <p>
                                    Iâ€™ve been seeing more Wifi issues recently with my Nest thermostats. I donâ€™t see a
                                    pattern to the problem, and it seems to randomly affect all of them (sometimes at
                                    the same time, but often just one).
                                </p>
                                <p><img alt="image" src="blog/wpcontent/uploads/2012/03/image6.png" /></p>
                                <p>
                                    Iâ€™ve got a supported Wifi router (Apple Airport Express), and itâ€™s within reasonable
                                    range to all of the thermostats in our house (no more than 20 foot from any
                                    thermostat). While itâ€™s unfortunately overlapping with a similar band/frequency in
                                    our house, the router is dedicated to only the Thermostats right now (a unique
                                    SSID).
                                </p>
                                <p>It doesnâ€™t have any settings that seem necessary to change:</p>
                                <p>
                                    <a href="blog/wpcontent/uploads/2013/01/SNAGHTMLe2a23de.png"
                                        ><img
                                            loading="lazy"
                                            title="SNAGHTMLe2a23de"
                                            style="display: inline"
                                            alt="SNAGHTMLe2a23de"
                                            src="blog/wpcontent/uploads/2013/01/SNAGHTMLe2a23de_thumb.png"
                                            width="640"
                                            height="358"
                                    /></a>
                                </p>
                                <p>
                                    <a href="blog/wpcontent/uploads/2013/01/image.png"
                                        ><img
                                            loading="lazy"
                                            title="image"
                                            style="display: inline"
                                            alt="image"
                                            src="blog/wpcontent/uploads/2013/01/image_thumb.png"
                                            width="640"
                                            height="313"
                                    /></a>
                                </p>
                                <p>Any ideas?</p>
                            </div>
                            <!-- .entry-content -->
                        </article>
                        <!-- #post-## -->
                    </main>
                    <!-- #main -->
                </section>
                <!-- #primary -->
            </div>
            <!-- #content -->

            <footer id="colophon" class="site-footer" role="contentinfo">
                <div class="site-info">
                    
                    <span class="sep"> | </span>
                    Theme: editor by <a href="https://array.is/">Array</a>
                </div>
                <!-- .site-info -->
            </footer>
            <!-- #colophon -->
        </div>
        <!-- #page -->

        <script
            type="text/javascript"
            src="blog/wpcontent/themes/editor/js/jquery.fitvids.js"
            id="fitvids-js"
        ></script>
        <script
            type="text/javascript"
            src="blog/wpcontent/themes/editor/js/editor.js"
            id="editor-js-js"
        ></script>
       <script>
            _stq = window._stq || [];
            _stq.push([
                "view",
                { v: "ext", j: "1:11.0", blog: "193486638", post: "0", tz: "-5", srv: "www.wiredprairie.us" },
            ]);
            _stq.push(["clickTrackerInit", "193486638", "0"]);
        </script>
    </body>
</html>
