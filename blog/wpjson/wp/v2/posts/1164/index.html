{"id":1164,"date":"2011-01-09T19:05:53","date_gmt":"2011-01-10T00:05:53","guid":{"rendered":"http:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/1164"},"modified":"2011-01-09T19:09:17","modified_gmt":"2011-01-10T00:09:17","slug":"making-android-development-a-little-more-like-microsoft-development","status":"publish","type":"post","link":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/1164","title":{"rendered":"Making Android development a little more like Microsoft development"},"content":{"rendered":"<p><img loading=\"lazy\" style=\"border-bottom: ; border-left: ; margin: ; padding-left: ; padding-right: ; display: inline; border-top: ; border-right: ; padding-top: \" title=\"Android train, now boarding!\" alt=\"All aboard the Android train!\" src=\"http:\/\/www.wiredprairie.us\/blog\/wp-content\/uploads\/2011\/01\/image.png\" width=\"451\" height=\"308\" \/><\/p>\n<p>By day, I mostly use Microsoft development tools, and have used them for YEARS. I\u2019ve been experimenting with some Android development recently, and was annoyed by several missing handy tricks that Microsoft tools have done for years. So, I just coded one replacement.<\/p>\n<p>Commonly, in Microsoft platforms, when you create a user interface element (from VB3 to WPF and Silverlight) and give it an ID\/Name, that named element is readily available in code-behind, without any extra effort. <strong>Nice<\/strong>.<\/p>\n<p>Android development, apparently, is lacking that feature. So, I created a simple pattern to make it convenient for me. Imagine the following UI element defined in an Android Layout:<\/p>\n<pre class=\"code\"><span style=\"color: teal\">&lt;<\/span><span style=\"color: #3f7f7f\">Button <\/span><span style=\"color: #7f007f\">android:id<\/span>=<span style=\"color: #2a00ff\">&quot;@+id\/btnSend&quot; <\/span><span style=\"color: #7f007f\">android:layout_width<\/span>=<span style=\"color: #2a00ff\">&quot;fill_parent&quot;\n     <\/span><span style=\"color: #7f007f\">android:layout_alignParentBottom<\/span>=<span style=\"color: #2a00ff\">&quot;true&quot; \n    <\/span><span style=\"color: #7f007f\">android:layout_height<\/span>=<span style=\"color: #2a00ff\">&quot;wrap_content&quot; <\/span><span style=\"color: #7f007f\">android:text<\/span>=<span style=\"color: #2a00ff\">&quot;@string\/send_message&quot; <\/span><span style=\"color: teal\">\/&gt;<\/span><\/pre>\n<p>As you can see, the id of the Button is btnSend. <\/p>\n<p>Normally, in the backing Java class if you wanted to access that UI element, you\u2019d add code like this:<\/p>\n<pre class=\"code\"><span style=\"background: #e8f2fe\">Button btn = (Button) findViewById(R.id.<\/span><span style=\"background: #e8f2fe; color: #0000c0\">btnSend<\/span><span style=\"background: #e8f2fe\">);<\/span><\/pre>\n<p>Simple, but annoying for commonly accessed UI elements (or Views).<\/p>\n<p>I\u2019m not the best Java coder by any means as I\u2019ve not done it full time for more than 10 years and my knowledge of any recent Java innovations is zero. So, take this code with a pinch of skepticism.<\/p>\n<pre class=\"code\"><span style=\"color: #7f0055\">private void <\/span>autoWire() {\n    Field[] privateFields = <span style=\"color: #7f0055\">this<\/span>.getClass().getDeclaredFields();\n            \n    <span style=\"color: #7f0055\">for<\/span>(Field f : privateFields){\n        f.setAccessible(<span style=\"color: #7f0055\">true<\/span>);            \n        <span style=\"color: #646464\">ViewId <\/span>viewId = f.getAnnotation(<span style=\"color: #646464\">ViewId<\/span>.<span style=\"color: #7f0055\">class<\/span>);\n        <span style=\"color: #7f0055\">if <\/span>(viewId != <span style=\"color: #7f0055\">null <\/span>){\n            <span style=\"color: #7f0055\">try <\/span>{\n                f.set(<span style=\"color: #7f0055\">this<\/span>, (Object)<span style=\"color: #7f0055\">this<\/span>.findViewById(viewId.Id()));\n            } <span style=\"color: #7f0055\">catch <\/span>(IllegalArgumentException e) {\n                <span style=\"color: #3f7f5f\">\/\/ <\/span><span style=\"color: #7f9fbf\">TODO <\/span><span style=\"color: #3f7f5f\">Auto-generated catch block\n                <\/span>e.printStackTrace();\n            } <span style=\"color: #7f0055\">catch <\/span>(IllegalAccessException e) {\n                <span style=\"color: #3f7f5f\">\/\/ <\/span><span style=\"color: #7f9fbf\">TODO <\/span><span style=\"color: #3f7f5f\">Auto-generated catch block\n                <\/span>e.printStackTrace();\n            }\n        }\n    }\n}<\/pre>\n<p>Now, in the onCreate method that is typical of an Android Activity, I call the method above, <strong>autoWire<\/strong>.<\/p>\n<p>This Java code looks at the current class for declarations like this:<\/p>\n<pre class=\"code\"><span style=\"color: #646464\">@ViewId<\/span>(Id=R.id.<span style=\"color: #0000c0\">btnSend<\/span>)\n<span style=\"color: #7f0055\">private <\/span>Button <span style=\"color: #0000c0\">btnSend<\/span>;<\/pre>\n<p>It\u2019s just an annotation (ViewId), followed by the Id of the control. <\/p>\n<p>The annotation definition is:<\/p>\n<pre class=\"code\"><span style=\"color: #7f0055\">import <\/span>java.lang.annotation.ElementType;\n<span style=\"color: #7f0055\">import <\/span>java.lang.annotation.Retention;\n<span style=\"color: #7f0055\">import <\/span>java.lang.annotation.RetentionPolicy;\n<span style=\"color: #7f0055\">import <\/span>java.lang.annotation.Target;\n\n<span style=\"color: #3f5fbf\">\/**\n * <\/span><span style=\"color: #7f9fbf\">@author <\/span><span style=\"color: #3f5fbf\">WiredPrairie\n *\n *\/\n<\/span><span style=\"color: #646464\">@Retention<\/span>(RetentionPolicy.<span style=\"color: #0000c0\">RUNTIME<\/span>)\n<span style=\"color: #646464\">@Target<\/span>(ElementType.<span style=\"color: #0000c0\">FIELD<\/span>)\n<span style=\"color: #7f0055\">public @interface <\/span><span style=\"color: #646464\">ViewId <\/span>{\n    <span style=\"color: #7f0055\">int <\/span>Id();\n}<\/pre>\n<p>Using autoWire, btnSend is automatically set and ready to rock and roll. <\/p>\n","protected":false},"excerpt":{"rendered":"<p>By day, I mostly use Microsoft development tools, and have used them for YEARS. I\u2019ve been experimenting with some Android development recently, and was annoyed by several missing handy tricks that Microsoft tools have done for years. So, I just coded one replacement. Commonly, in Microsoft platforms, when you create a user interface element (from [&hellip;]<\/p>\n","protected":false},"author":2,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"spay_email":"","jetpack_publicize_message":"","jetpack_is_tweetstorm":false,"jetpack_publicize_feature_enabled":true},"categories":[4],"tags":[34,33],"jetpack_publicize_connections":[],"jetpack_featured_media_url":"","jetpack_sharing_enabled":true,"jetpack_shortlink":"https:\/\/wp.me\/pd5QIe-iM","jetpack_likes_enabled":true,"jetpack-related-posts":[{"id":2224,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/2224","url_meta":{"origin":1164,"position":0},"title":"Flutter Demo application linking to BoardGameGeek.Com&#8217;s Hot Game List","date":"February 26, 2018","format":false,"excerpt":"I've built a slightly more interesting application using Flutter.\u00a0 Using an XML feed from BoardGameGeek's API, the application displays a list of the current hot games complete with thumbnail images. Here's the code. I used a standard Flutter app template and also added a few packages to the project. I've\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"Hulk Smash Layout","src":"https:\/\/i0.wp.com\/www.wiredprairie.us\/blog\/wp-content\/uploads\/2018\/02\/2018-02-26-19_45_39-Hulk-Smash-Meme-Generator-Imgflip.png?resize=350%2C200&ssl=1","width":350,"height":200},"classes":[]},{"id":222,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/222","url_meta":{"origin":1164,"position":1},"title":"Sun&#8217;s JavaFX, Take 2.","date":"May 9, 2008","format":false,"excerpt":"I wrote about JavaFX last year about this time. It's back again with an all new, AJAX-heavy, marketing web site. One thing that I hope inspires Microsoft is this: \"JavaFX Desktop for desktop browsers and desktop applications (available fall 2008)\" I ask (appropriate) Microsoft representatives almost every time I talk\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"https:\/\/i0.wp.com\/www.wiredprairie.us\/blog\/wp-content\/uploads\/2008\/05\/image-thumb15.png?resize=350%2C200","width":350,"height":200},"classes":[]},{"id":175,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/175","url_meta":{"origin":1164,"position":2},"title":"What&#8217;s the perfect API?","date":"May 5, 2008","format":false,"excerpt":"I was skimming a rant by someone on arstechnica about how badly messed up Win32 APIs are and how superior everything else is, when this paragraph grabbed my attention: The reason must be that no one in Microsoft actually gives a damn. Each group develops their own UI widgets in\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"","width":0,"height":0},"classes":[]},{"id":368,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/368","url_meta":{"origin":1164,"position":3},"title":"Do we really need another Javascript framework for UI?","date":"June 16, 2008","format":false,"excerpt":"From the web site, RoughlyDrafted magazine, Cocoa for Windows + Flash Killer = SproutCore. Apple doesn\u2019t sell ads, it sells hardware. But if the web requires Flash or Silverlight to run, Adobe or Microsoft can either intentionally kill alternative platforms like the Mac (or Linux), or simply make them work\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"","width":0,"height":0},"classes":[]},{"id":217,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/217","url_meta":{"origin":1164,"position":4},"title":"The ASP.NET Single Page Interface and AJAX Patterns","date":"May 9, 2008","format":false,"excerpt":"Posted on MSDN, by Dino Esposito, \"Single Page Interface and AJAX Patterns.\" What is it? From the article... Single-Page Interface Model To take full advantage of AJAX, you need to have all of your features, or at least most of them, in a single page. This is known as the\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"","width":0,"height":0},"classes":[]},{"id":565,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/565","url_meta":{"origin":1164,"position":5},"title":"Gulp &#8211; a WPF-based text editor for Visual Studio 10?","date":"September 17, 2008","format":false,"excerpt":"According to this, the next version of Visual Studio (v2008 + 1), will have an editor written using WPF. VS10: new WPF-based text editor w\/ fine-grained extensibility, Microsoft Extensibility Framework (MEF, a.k.a. COM for managed code), new features support multiple languages A very common scenario where I work is to\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"","width":0,"height":0},"classes":[]}],"_links":{"self":[{"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wpjson\/wp\/v2\/posts\/1164"}],"collection":[{"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wpjson\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wpjson\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wpjson\/wp\/v2\/users\/2"}],"replies":[{"embeddable":true,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wpjson\/wp\/v2\/comments?post=1164"}],"version-history":[{"count":1,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wpjson\/wp\/v2\/posts\/1164\/revisions"}],"predecessor-version":[{"id":1166,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wpjson\/wp\/v2\/posts\/1164\/revisions\/1166"}],"wp:attachment":[{"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wpjson\/wp\/v2\/media?parent=1164"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wpjson\/wp\/v2\/categories?post=1164"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wpjson\/wp\/v2\/tags?post=1164"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}