{"id":1113,"date":"2010-07-26T20:56:17","date_gmt":"2010-07-27T01:56:17","guid":{"rendered":"http:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/1113"},"modified":"2010-07-26T20:56:17","modified_gmt":"2010-07-27T01:56:17","slug":"how-to-bind-listboxitem-isselected-to-a-bound-item-in-silverlight-4-0","status":"publish","type":"post","link":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/1113","title":{"rendered":"How to bind ListBoxItem.IsSelected to a bound item in Silverlight 4.0"},"content":{"rendered":"<p>This technique requires the Blend 4.0 SDK (which is included in Blend 4.0 and is also available as a <a href=\"http:\/\/www.microsoft.com\/downloads\/details.aspx?FamilyID=d197f51a-de07-4edf-9cba-1f1b4a22110d&amp;displaylang=en\">free download<\/a>.<\/p>\n<p>Someone on StackOverflow asked how to bind a collection of items to a ListBox in Silverlight where the IsSelected property of the ListBoxItem is bound to an IsSelected property of the data item. <\/p>\n<p>WPF has the native ability within a style to set the a style\u2019s setter property IsSelected to a value of the two way binding to an IsSelected Property. Slick.<\/p>\n<p>Silverlight, has no such thing unfortunately.<\/p>\n<p>But, there\u2019s a work around that isn\u2019t too awful. Seriously.<\/p>\n<p><img loading=\"lazy\" style=\"border-bottom: 0px; border-left: 0px; margin: 0px; display: inline; border-top: 0px; border-right: 0px\" class=\"wlDisabledImage\" title=\"image\" border=\"0\" alt=\"image\" src=\"http:\/\/www.wiredprairie.us\/blog\/wp-content\/uploads\/2010\/07\/image2.png\" width=\"335\" height=\"204\" \/><\/p>\n<p>What I\u2019ve done is mapped the look and feel of the ListBoxItem selection to the DataTemplate for the item and removed it from the standard ListBoxItemContainer style:<\/p>\n<pre class=\"code\"><span style=\"color: blue\">&lt;<\/span><span style=\"color: #a31515\">UserControl\n    <\/span><span style=\"color: red\">xmlns<\/span><span style=\"color: blue\">=&quot;http:\/\/schemas.microsoft.com\/winfx\/2006\/xaml\/presentation&quot;\n    <\/span><span style=\"color: red\">xmlns<\/span><span style=\"color: blue\">:<\/span><span style=\"color: red\">x<\/span><span style=\"color: blue\">=&quot;http:\/\/schemas.microsoft.com\/winfx\/2006\/xaml&quot;\n    <\/span><span style=\"color: red\">xmlns<\/span><span style=\"color: blue\">:<\/span><span style=\"color: red\">d<\/span><span style=\"color: blue\">=&quot;http:\/\/schemas.microsoft.com\/expression\/blend\/2008&quot;\n    <\/span><span style=\"color: red\">xmlns<\/span><span style=\"color: blue\">:<\/span><span style=\"color: red\">mc<\/span><span style=\"color: blue\">=&quot;http:\/\/schemas.openxmlformats.org\/markup-compatibility\/2006&quot;\n    <\/span><span style=\"color: red\">xmlns<\/span><span style=\"color: blue\">:<\/span><span style=\"color: red\">local<\/span><span style=\"color: blue\">=&quot;clr-namespace:TestSilverlightTodoListItem&quot; <\/span><span style=\"color: red\">xmlns<\/span><span style=\"color: blue\">:<\/span><span style=\"color: red\">i<\/span><span style=\"color: blue\">=&quot;http:\/\/schemas.microsoft.com\/expression\/2010\/interactivity&quot; <\/span><span style=\"color: red\">xmlns<\/span><span style=\"color: blue\">:<\/span><span style=\"color: red\">ei<\/span><span style=\"color: blue\">=&quot;http:\/\/schemas.microsoft.com\/expression\/2010\/interactions&quot; <\/span><span style=\"color: red\">x<\/span><span style=\"color: blue\">:<\/span><span style=\"color: red\">Class<\/span><span style=\"color: blue\">=&quot;TestSilverlightTodoListItem.MainPage&quot;\n    <\/span><span style=\"color: red\">mc<\/span><span style=\"color: blue\">:<\/span><span style=\"color: red\">Ignorable<\/span><span style=\"color: blue\">=&quot;d&quot;\n    <\/span><span style=\"color: red\">d<\/span><span style=\"color: blue\">:<\/span><span style=\"color: red\">DesignHeight<\/span><span style=\"color: blue\">=&quot;300&quot; <\/span><span style=\"color: red\">d<\/span><span style=\"color: blue\">:<\/span><span style=\"color: red\">DesignWidth<\/span><span style=\"color: blue\">=&quot;400&quot;&gt;\n\n    &lt;<\/span><span style=\"color: #a31515\">UserControl.Resources<\/span><span style=\"color: blue\">&gt;        \n\n        &lt;<\/span><span style=\"color: #a31515\">local<\/span><span style=\"color: blue\">:<\/span><span style=\"color: #a31515\">PeopleList <\/span><span style=\"color: red\">x<\/span><span style=\"color: blue\">:<\/span><span style=\"color: red\">Key<\/span><span style=\"color: blue\">=&quot;PeopleListDataSource&quot; <\/span><span style=\"color: red\">d<\/span><span style=\"color: blue\">:<\/span><span style=\"color: red\">IsDataSource<\/span><span style=\"color: blue\">=&quot;True&quot;\/&gt;        \n\n        &lt;<\/span><span style=\"color: #a31515\">Style <\/span><span style=\"color: red\">x<\/span><span style=\"color: blue\">:<\/span><span style=\"color: red\">Key<\/span><span style=\"color: blue\">=&quot;ListBoxItemStyle1&quot; <\/span><span style=\"color: red\">TargetType<\/span><span style=\"color: blue\">=&quot;ListBoxItem&quot;&gt;\n            &lt;<\/span><span style=\"color: #a31515\">Setter <\/span><span style=\"color: red\">Property<\/span><span style=\"color: blue\">=&quot;Padding&quot; <\/span><span style=\"color: red\">Value<\/span><span style=\"color: blue\">=&quot;3&quot;\/&gt;\n            &lt;<\/span><span style=\"color: #a31515\">Setter <\/span><span style=\"color: red\">Property<\/span><span style=\"color: blue\">=&quot;HorizontalContentAlignment&quot; <\/span><span style=\"color: red\">Value<\/span><span style=\"color: blue\">=&quot;Stretch&quot;\/&gt;\n            &lt;<\/span><span style=\"color: #a31515\">Setter <\/span><span style=\"color: red\">Property<\/span><span style=\"color: blue\">=&quot;VerticalContentAlignment&quot; <\/span><span style=\"color: red\">Value<\/span><span style=\"color: blue\">=&quot;Top&quot;\/&gt;\n            &lt;<\/span><span style=\"color: #a31515\">Setter <\/span><span style=\"color: red\">Property<\/span><span style=\"color: blue\">=&quot;Background&quot; <\/span><span style=\"color: red\">Value<\/span><span style=\"color: blue\">=&quot;Transparent&quot;\/&gt;\n            &lt;<\/span><span style=\"color: #a31515\">Setter <\/span><span style=\"color: red\">Property<\/span><span style=\"color: blue\">=&quot;BorderThickness&quot; <\/span><span style=\"color: red\">Value<\/span><span style=\"color: blue\">=&quot;1&quot;\/&gt;\n            &lt;<\/span><span style=\"color: #a31515\">Setter <\/span><span style=\"color: red\">Property<\/span><span style=\"color: blue\">=&quot;TabNavigation&quot; <\/span><span style=\"color: red\">Value<\/span><span style=\"color: blue\">=&quot;Local&quot;\/&gt;            \n            &lt;<\/span><span style=\"color: #a31515\">Setter <\/span><span style=\"color: red\">Property<\/span><span style=\"color: blue\">=&quot;Template&quot;&gt;\n                &lt;<\/span><span style=\"color: #a31515\">Setter.Value<\/span><span style=\"color: blue\">&gt;\n                    &lt;<\/span><span style=\"color: #a31515\">ControlTemplate <\/span><span style=\"color: red\">TargetType<\/span><span style=\"color: blue\">=&quot;ListBoxItem&quot;&gt;\n                        &lt;<\/span><span style=\"color: #a31515\">Grid <\/span><span style=\"color: red\">Background<\/span><span style=\"color: blue\">=&quot;{<\/span><span style=\"color: #a31515\">TemplateBinding <\/span><span style=\"color: red\">Background<\/span><span style=\"color: blue\">}&quot;&gt;\n                            &lt;<\/span><span style=\"color: #a31515\">VisualStateManager.VisualStateGroups<\/span><span style=\"color: blue\">&gt;\n                                &lt;<\/span><span style=\"color: #a31515\">VisualStateGroup <\/span><span style=\"color: red\">x<\/span><span style=\"color: blue\">:<\/span><span style=\"color: red\">Name<\/span><span style=\"color: blue\">=&quot;CommonStates&quot;&gt;\n                                    &lt;<\/span><span style=\"color: #a31515\">VisualState <\/span><span style=\"color: red\">x<\/span><span style=\"color: blue\">:<\/span><span style=\"color: red\">Name<\/span><span style=\"color: blue\">=&quot;Normal&quot;\/&gt;\n                                    &lt;<\/span><span style=\"color: #a31515\">VisualState <\/span><span style=\"color: red\">x<\/span><span style=\"color: blue\">:<\/span><span style=\"color: red\">Name<\/span><span style=\"color: blue\">=&quot;MouseOver&quot;&gt;\n                                    &lt;\/<\/span><span style=\"color: #a31515\">VisualState<\/span><span style=\"color: blue\">&gt;\n                                    &lt;<\/span><span style=\"color: #a31515\">VisualState <\/span><span style=\"color: red\">x<\/span><span style=\"color: blue\">:<\/span><span style=\"color: red\">Name<\/span><span style=\"color: blue\">=&quot;Disabled&quot;&gt;\n                                    &lt;\/<\/span><span style=\"color: #a31515\">VisualState<\/span><span style=\"color: blue\">&gt;\n                                &lt;\/<\/span><span style=\"color: #a31515\">VisualStateGroup<\/span><span style=\"color: blue\">&gt;\n                                &lt;<\/span><span style=\"color: #a31515\">VisualStateGroup <\/span><span style=\"color: red\">x<\/span><span style=\"color: blue\">:<\/span><span style=\"color: red\">Name<\/span><span style=\"color: blue\">=&quot;SelectionStates&quot;&gt;\n                                    &lt;<\/span><span style=\"color: #a31515\">VisualState <\/span><span style=\"color: red\">x<\/span><span style=\"color: blue\">:<\/span><span style=\"color: red\">Name<\/span><span style=\"color: blue\">=&quot;Unselected&quot;\/&gt;\n                                    &lt;<\/span><span style=\"color: #a31515\">VisualState <\/span><span style=\"color: red\">x<\/span><span style=\"color: blue\">:<\/span><span style=\"color: red\">Name<\/span><span style=\"color: blue\">=&quot;Selected&quot;&gt;\n                                    &lt;\/<\/span><span style=\"color: #a31515\">VisualState<\/span><span style=\"color: blue\">&gt;\n                                &lt;\/<\/span><span style=\"color: #a31515\">VisualStateGroup<\/span><span style=\"color: blue\">&gt;\n                                &lt;<\/span><span style=\"color: #a31515\">VisualStateGroup <\/span><span style=\"color: red\">x<\/span><span style=\"color: blue\">:<\/span><span style=\"color: red\">Name<\/span><span style=\"color: blue\">=&quot;FocusStates&quot;&gt;\n                                    &lt;<\/span><span style=\"color: #a31515\">VisualState <\/span><span style=\"color: red\">x<\/span><span style=\"color: blue\">:<\/span><span style=\"color: red\">Name<\/span><span style=\"color: blue\">=&quot;Focused&quot;&gt;\n                                        &lt;<\/span><span style=\"color: #a31515\">Storyboard<\/span><span style=\"color: blue\">&gt;\n                                            &lt;<\/span><span style=\"color: #a31515\">ObjectAnimationUsingKeyFrames <\/span><span style=\"color: red\">Duration<\/span><span style=\"color: blue\">=&quot;0&quot; <\/span><span style=\"color: red\">Storyboard.TargetProperty<\/span><span style=\"color: blue\">=&quot;Visibility&quot; <\/span><span style=\"color: red\">Storyboard.TargetName<\/span><span style=\"color: blue\">=&quot;FocusVisualElement&quot;&gt;\n                                                &lt;<\/span><span style=\"color: #a31515\">DiscreteObjectKeyFrame <\/span><span style=\"color: red\">KeyTime<\/span><span style=\"color: blue\">=&quot;0&quot;&gt;\n                                                    &lt;<\/span><span style=\"color: #a31515\">DiscreteObjectKeyFrame.Value<\/span><span style=\"color: blue\">&gt;\n                                                        &lt;<\/span><span style=\"color: #a31515\">Visibility<\/span><span style=\"color: blue\">&gt;<\/span><span style=\"color: #a31515\">Visible<\/span><span style=\"color: blue\">&lt;\/<\/span><span style=\"color: #a31515\">Visibility<\/span><span style=\"color: blue\">&gt;\n                                                    &lt;\/<\/span><span style=\"color: #a31515\">DiscreteObjectKeyFrame.Value<\/span><span style=\"color: blue\">&gt;\n                                                &lt;\/<\/span><span style=\"color: #a31515\">DiscreteObjectKeyFrame<\/span><span style=\"color: blue\">&gt;\n                                            &lt;\/<\/span><span style=\"color: #a31515\">ObjectAnimationUsingKeyFrames<\/span><span style=\"color: blue\">&gt;\n                                        &lt;\/<\/span><span style=\"color: #a31515\">Storyboard<\/span><span style=\"color: blue\">&gt;\n                                    &lt;\/<\/span><span style=\"color: #a31515\">VisualState<\/span><span style=\"color: blue\">&gt;\n                                    &lt;<\/span><span style=\"color: #a31515\">VisualState <\/span><span style=\"color: red\">x<\/span><span style=\"color: blue\">:<\/span><span style=\"color: red\">Name<\/span><span style=\"color: blue\">=&quot;Unfocused&quot;\/&gt;\n                                &lt;\/<\/span><span style=\"color: #a31515\">VisualStateGroup<\/span><span style=\"color: blue\">&gt;\n                            &lt;\/<\/span><span style=\"color: #a31515\">VisualStateManager.VisualStateGroups<\/span><span style=\"color: blue\">&gt;\n                            &lt;<\/span><span style=\"color: #a31515\">ContentPresenter <\/span><span style=\"color: red\">x<\/span><span style=\"color: blue\">:<\/span><span style=\"color: red\">Name<\/span><span style=\"color: blue\">=&quot;contentPresenter&quot; <\/span><span style=\"color: red\">ContentTemplate<\/span><span style=\"color: blue\">=&quot;{<\/span><span style=\"color: #a31515\">TemplateBinding <\/span><span style=\"color: red\">ContentTemplate<\/span><span style=\"color: blue\">}&quot; <\/span><span style=\"color: red\">Content<\/span><span style=\"color: blue\">=&quot;{<\/span><span style=\"color: #a31515\">TemplateBinding <\/span><span style=\"color: red\">Content<\/span><span style=\"color: blue\">}&quot; <\/span><span style=\"color: red\">HorizontalAlignment<\/span><span style=\"color: blue\">=&quot;{<\/span><span style=\"color: #a31515\">TemplateBinding <\/span><span style=\"color: red\">HorizontalContentAlignment<\/span><span style=\"color: blue\">}&quot; <\/span><span style=\"color: red\">Margin<\/span><span style=\"color: blue\">=&quot;{<\/span><span style=\"color: #a31515\">TemplateBinding <\/span><span style=\"color: red\">Padding<\/span><span style=\"color: blue\">}&quot;\/&gt;\n                            &lt;<\/span><span style=\"color: #a31515\">Rectangle <\/span><span style=\"color: red\">x<\/span><span style=\"color: blue\">:<\/span><span style=\"color: red\">Name<\/span><span style=\"color: blue\">=&quot;FocusVisualElement&quot; <\/span><span style=\"color: red\">RadiusY<\/span><span style=\"color: blue\">=&quot;1&quot; <\/span><span style=\"color: red\">RadiusX<\/span><span style=\"color: blue\">=&quot;1&quot; <\/span><span style=\"color: red\">Stroke<\/span><span style=\"color: blue\">=&quot;#FF6DBDD1&quot; <\/span><span style=\"color: red\">StrokeThickness<\/span><span style=\"color: blue\">=&quot;1&quot; <\/span><span style=\"color: red\">Visibility<\/span><span style=\"color: blue\">=&quot;Collapsed&quot;\/&gt;\n                        &lt;\/<\/span><span style=\"color: #a31515\">Grid<\/span><span style=\"color: blue\">&gt;\n                    &lt;\/<\/span><span style=\"color: #a31515\">ControlTemplate<\/span><span style=\"color: blue\">&gt;\n                &lt;\/<\/span><span style=\"color: #a31515\">Setter.Value<\/span><span style=\"color: blue\">&gt;\n            &lt;\/<\/span><span style=\"color: #a31515\">Setter<\/span><span style=\"color: blue\">&gt;\n        &lt;\/<\/span><span style=\"color: #a31515\">Style<\/span><span style=\"color: blue\">&gt;\n\n        &lt;<\/span><span style=\"color: #a31515\">DataTemplate <\/span><span style=\"color: red\">x<\/span><span style=\"color: blue\">:<\/span><span style=\"color: red\">Key<\/span><span style=\"color: blue\">=&quot;PersonTemplate&quot;&gt;\n            &lt;<\/span><span style=\"color: #a31515\">Grid<\/span><span style=\"color: blue\">&gt;\n                &lt;<\/span><span style=\"color: #a31515\">Grid.ColumnDefinitions<\/span><span style=\"color: blue\">&gt;\n                    &lt;<\/span><span style=\"color: #a31515\">ColumnDefinition <\/span><span style=\"color: red\">Width<\/span><span style=\"color: blue\">=&quot;Auto&quot;\/&gt;\n                    &lt;<\/span><span style=\"color: #a31515\">ColumnDefinition <\/span><span style=\"color: red\">Width<\/span><span style=\"color: blue\">=&quot;*&quot;\/&gt;\n                &lt;\/<\/span><span style=\"color: #a31515\">Grid.ColumnDefinitions<\/span><span style=\"color: blue\">&gt;\n                &lt;<\/span><span style=\"color: #a31515\">i<\/span><span style=\"color: blue\">:<\/span><span style=\"color: #a31515\">Interaction.Behaviors<\/span><span style=\"color: blue\">&gt;\n                    &lt;<\/span><span style=\"color: #a31515\">ei<\/span><span style=\"color: blue\">:<\/span><span style=\"color: #a31515\">DataStateBehavior <\/span><span style=\"color: red\">Binding<\/span><span style=\"color: blue\">=&quot;{<\/span><span style=\"color: #a31515\">Binding <\/span><span style=\"color: red\">IsSelected<\/span><span style=\"color: blue\">, <\/span><span style=\"color: red\">Mode<\/span><span style=\"color: blue\">=TwoWay}&quot; <\/span><span style=\"color: red\">Value<\/span><span style=\"color: blue\">=&quot;True&quot; <\/span><span style=\"color: red\">TrueState<\/span><span style=\"color: blue\">=&quot;Selected&quot; <\/span><span style=\"color: red\">FalseState<\/span><span style=\"color: blue\">=&quot;Unselected&quot;\/&gt;                    \n                &lt;\/<\/span><span style=\"color: #a31515\">i<\/span><span style=\"color: blue\">:<\/span><span style=\"color: #a31515\">Interaction.Behaviors<\/span><span style=\"color: blue\">&gt;\n                &lt;<\/span><span style=\"color: #a31515\">VisualStateManager.VisualStateGroups<\/span><span style=\"color: blue\">&gt;\n                    &lt;<\/span><span style=\"color: #a31515\">VisualStateGroup <\/span><span style=\"color: red\">x<\/span><span style=\"color: blue\">:<\/span><span style=\"color: red\">Name<\/span><span style=\"color: blue\">=&quot;Selection&quot;&gt;\n                        &lt;<\/span><span style=\"color: #a31515\">VisualStateGroup.Transitions<\/span><span style=\"color: blue\">&gt;\n                            &lt;<\/span><span style=\"color: #a31515\">VisualTransition <\/span><span style=\"color: red\">GeneratedDuration<\/span><span style=\"color: blue\">=&quot;0:0:0.25&quot;\/&gt;\n                        &lt;\/<\/span><span style=\"color: #a31515\">VisualStateGroup.Transitions<\/span><span style=\"color: blue\">&gt;\n                        &lt;<\/span><span style=\"color: #a31515\">VisualState <\/span><span style=\"color: red\">x<\/span><span style=\"color: blue\">:<\/span><span style=\"color: red\">Name<\/span><span style=\"color: blue\">=&quot;Selected&quot;&gt;\n                            &lt;<\/span><span style=\"color: #a31515\">Storyboard<\/span><span style=\"color: blue\">&gt;\n                                &lt;<\/span><span style=\"color: #a31515\">DoubleAnimation <\/span><span style=\"color: red\">Duration<\/span><span style=\"color: blue\">=&quot;0&quot; <\/span><span style=\"color: red\">To<\/span><span style=\"color: blue\">=&quot;1&quot; <\/span><span style=\"color: red\">Storyboard.TargetProperty<\/span><span style=\"color: blue\">=&quot;(UIElement.Opacity)&quot; <\/span><span style=\"color: red\">Storyboard.TargetName<\/span><span style=\"color: blue\">=&quot;fillColor&quot; <\/span><span style=\"color: red\">d<\/span><span style=\"color: blue\">:<\/span><span style=\"color: red\">IsOptimized<\/span><span style=\"color: blue\">=&quot;True&quot;\/&gt;\n                                &lt;<\/span><span style=\"color: #a31515\">DoubleAnimation <\/span><span style=\"color: red\">Duration<\/span><span style=\"color: blue\">=&quot;0&quot; <\/span><span style=\"color: red\">To<\/span><span style=\"color: blue\">=&quot;1&quot; <\/span><span style=\"color: red\">Storyboard.TargetProperty<\/span><span style=\"color: blue\">=&quot;(UIElement.Opacity)&quot; <\/span><span style=\"color: red\">Storyboard.TargetName<\/span><span style=\"color: blue\">=&quot;fillColor2&quot; <\/span><span style=\"color: red\">d<\/span><span style=\"color: blue\">:<\/span><span style=\"color: red\">IsOptimized<\/span><span style=\"color: blue\">=&quot;True&quot;\/&gt;\n                            &lt;\/<\/span><span style=\"color: #a31515\">Storyboard<\/span><span style=\"color: blue\">&gt;\n                        &lt;\/<\/span><span style=\"color: #a31515\">VisualState<\/span><span style=\"color: blue\">&gt;\n                        &lt;<\/span><span style=\"color: #a31515\">VisualState <\/span><span style=\"color: red\">x<\/span><span style=\"color: blue\">:<\/span><span style=\"color: red\">Name<\/span><span style=\"color: blue\">=&quot;Unselected&quot;\/&gt;\n                    &lt;\/<\/span><span style=\"color: #a31515\">VisualStateGroup<\/span><span style=\"color: blue\">&gt;\n                &lt;\/<\/span><span style=\"color: #a31515\">VisualStateManager.VisualStateGroups<\/span><span style=\"color: blue\">&gt;\n                &lt;<\/span><span style=\"color: #a31515\">VisualStateManager.CustomVisualStateManager<\/span><span style=\"color: blue\">&gt;\n                    &lt;<\/span><span style=\"color: #a31515\">ei<\/span><span style=\"color: blue\">:<\/span><span style=\"color: #a31515\">ExtendedVisualStateManager<\/span><span style=\"color: blue\">\/&gt;\n                &lt;\/<\/span><span style=\"color: #a31515\">VisualStateManager.CustomVisualStateManager<\/span><span style=\"color: blue\">&gt;\n                &lt;<\/span><span style=\"color: #a31515\">Rectangle <\/span><span style=\"color: red\">x<\/span><span style=\"color: blue\">:<\/span><span style=\"color: red\">Name<\/span><span style=\"color: blue\">=&quot;fillColor&quot; <\/span><span style=\"color: red\">Fill<\/span><span style=\"color: blue\">=&quot;#FFBADDE9&quot; <\/span><span style=\"color: red\">IsHitTestVisible<\/span><span style=\"color: blue\">=&quot;False&quot; <\/span><span style=\"color: red\">Opacity<\/span><span style=\"color: blue\">=&quot;0&quot; <\/span><span style=\"color: red\">RadiusY<\/span><span style=\"color: blue\">=&quot;1&quot; <\/span><span style=\"color: red\">RadiusX<\/span><span style=\"color: blue\">=&quot;1&quot; <\/span><span style=\"color: red\">Grid.ColumnSpan<\/span><span style=\"color: blue\">=&quot;2&quot;\/&gt;\n                &lt;<\/span><span style=\"color: #a31515\">Rectangle <\/span><span style=\"color: red\">x<\/span><span style=\"color: blue\">:<\/span><span style=\"color: red\">Name<\/span><span style=\"color: blue\">=&quot;fillColor2&quot; <\/span><span style=\"color: red\">Fill<\/span><span style=\"color: blue\">=&quot;#FFBADDE9&quot; <\/span><span style=\"color: red\">IsHitTestVisible<\/span><span style=\"color: blue\">=&quot;False&quot; <\/span><span style=\"color: red\">Opacity<\/span><span style=\"color: blue\">=&quot;0&quot; <\/span><span style=\"color: red\">RadiusY<\/span><span style=\"color: blue\">=&quot;1&quot; <\/span><span style=\"color: red\">RadiusX<\/span><span style=\"color: blue\">=&quot;1&quot; <\/span><span style=\"color: red\">Grid.ColumnSpan<\/span><span style=\"color: blue\">=&quot;2&quot;\/&gt;\n                &lt;<\/span><span style=\"color: #a31515\">CheckBox <\/span><span style=\"color: red\">IsChecked<\/span><span style=\"color: blue\">=&quot;{<\/span><span style=\"color: #a31515\">Binding <\/span><span style=\"color: red\">IsSelected<\/span><span style=\"color: blue\">, <\/span><span style=\"color: red\">Mode<\/span><span style=\"color: blue\">=TwoWay}&quot; <\/span><span style=\"color: red\">Grid.ColumnSpan<\/span><span style=\"color: blue\">=&quot;1&quot;\/&gt;\n                &lt;<\/span><span style=\"color: #a31515\">TextBlock <\/span><span style=\"color: red\">x<\/span><span style=\"color: blue\">:<\/span><span style=\"color: red\">Name<\/span><span style=\"color: blue\">=&quot;textBlock&quot; <\/span><span style=\"color: red\">Text<\/span><span style=\"color: blue\">=&quot;{<\/span><span style=\"color: #a31515\">Binding <\/span><span style=\"color: red\">Name<\/span><span style=\"color: blue\">}&quot; <\/span><span style=\"color: red\">Grid.Column<\/span><span style=\"color: blue\">=&quot;1&quot;\/&gt;\n            &lt;\/<\/span><span style=\"color: #a31515\">Grid<\/span><span style=\"color: blue\">&gt;\n        &lt;\/<\/span><span style=\"color: #a31515\">DataTemplate<\/span><span style=\"color: blue\">&gt;\n    &lt;\/<\/span><span style=\"color: #a31515\">UserControl.Resources<\/span><span style=\"color: blue\">&gt;\n    &lt;<\/span><span style=\"color: #a31515\">Grid <\/span><span style=\"color: red\">x<\/span><span style=\"color: blue\">:<\/span><span style=\"color: red\">Name<\/span><span style=\"color: blue\">=&quot;LayoutRoot&quot; <\/span><span style=\"color: red\">Background<\/span><span style=\"color: blue\">=&quot;White&quot; <\/span><span style=\"color: red\">DataContext<\/span><span style=\"color: blue\">=&quot;{<\/span><span style=\"color: #a31515\">Binding <\/span><span style=\"color: red\">Source<\/span><span style=\"color: blue\">={<\/span><span style=\"color: #a31515\">StaticResource <\/span><span style=\"color: red\">PeopleListDataSource<\/span><span style=\"color: blue\">}}&quot; &gt;\n        &lt;<\/span><span style=\"color: #a31515\">ListBox <\/span><span style=\"color: red\">x<\/span><span style=\"color: blue\">:<\/span><span style=\"color: red\">Name<\/span><span style=\"color: blue\">=&quot;myList&quot; <\/span><span style=\"color: red\">ItemsSource<\/span><span style=\"color: blue\">=&quot;{<\/span><span style=\"color: #a31515\">Binding<\/span><span style=\"color: blue\">}&quot; \n            <\/span><span style=\"color: red\">ItemContainerStyle<\/span><span style=\"color: blue\">=&quot;{<\/span><span style=\"color: #a31515\">StaticResource <\/span><span style=\"color: red\">ListBoxItemStyle1<\/span><span style=\"color: blue\">}&quot; \n            <\/span><span style=\"color: red\">ItemTemplate<\/span><span style=\"color: blue\">=&quot;{<\/span><span style=\"color: #a31515\">StaticResource <\/span><span style=\"color: red\">PersonTemplate<\/span><span style=\"color: blue\">}&quot; \n            <\/span><span style=\"color: red\">SelectionMode<\/span><span style=\"color: blue\">=&quot;Multiple&quot; \/&gt;\n    &lt;\/<\/span><span style=\"color: #a31515\">Grid<\/span><span style=\"color: blue\">&gt;\n&lt;\/<\/span><span style=\"color: #a31515\">UserControl<\/span><span style=\"color: blue\">&gt;\n\n<\/span><\/pre>\n<p>The real magic is using the DataStateBehavior (which is included in the Blend 4.0 SDK):<\/p>\n<pre class=\"code\"><span style=\"color: blue\">&lt;<\/span><span style=\"color: #a31515\">i<\/span><span style=\"color: blue\">:<\/span><span style=\"color: #a31515\">Interaction.Behaviors<\/span><span style=\"color: blue\">&gt;\n    &lt;<\/span><span style=\"color: #a31515\">ei<\/span><span style=\"color: blue\">:<\/span><span style=\"color: #a31515\">DataStateBehavior <\/span><span style=\"color: red\">Binding<\/span><span style=\"color: blue\">=&quot;{<\/span><span style=\"color: #a31515\">Binding <\/span><span style=\"color: red\">IsSelected<\/span><span style=\"color: blue\">, <\/span><span style=\"color: red\">Mode<\/span><span style=\"color: blue\">=TwoWay}&quot; <\/span><span style=\"color: red\">Value<\/span><span style=\"color: blue\">=&quot;True&quot; <\/span><span style=\"color: red\">TrueState<\/span><span style=\"color: blue\">=&quot;Selected&quot; <\/span><span style=\"color: red\">FalseState<\/span><span style=\"color: blue\">=&quot;Unselected&quot;\/&gt;                    \n&lt;\/<\/span><span style=\"color: #a31515\">i<\/span><span style=\"color: blue\">:<\/span><span style=\"color: #a31515\">Interaction.Behaviors<\/span><span style=\"color: blue\">&gt;\n\n<\/span><\/pre>\n<p>This ties the IsSelected property of the Person class (see below) to two VisualStates that I defined in the DataTemplate. A \u201cSelected\u201d and an \u201cUnselected\u201d state.<\/p>\n<p>I grabbed the rectangle from the standard ListBoxItem container template template. <\/p>\n<p>In the code behind, I wired up the selection changed event:<\/p>\n<pre class=\"code\"><span style=\"color: blue\">public partial class <\/span><span style=\"color: #2b91af\">MainPage <\/span>: <span style=\"color: #2b91af\">UserControl\n<\/span>{\n    <span style=\"color: blue\">private <\/span><span style=\"color: #2b91af\">PeopleList <\/span>_items = <span style=\"color: blue\">new <\/span><span style=\"color: #2b91af\">PeopleList<\/span>();\n\n    <span style=\"color: blue\">public <\/span>MainPage()\n    {\n        <span style=\"color: blue\">this<\/span>.DataContext = _items;\n        InitializeComponent();\n        myList.SelectionChanged += <span style=\"color: blue\">new <\/span><span style=\"color: #2b91af\">SelectionChangedEventHandler<\/span>(myList_SelectionChanged); \n    }\n\n    <span style=\"color: blue\">void <\/span>myList_SelectionChanged(<span style=\"color: blue\">object <\/span>sender, <span style=\"color: #2b91af\">SelectionChangedEventArgs <\/span>e)\n    {\n        <span style=\"color: green\">\/\/ these both just need to toggle \n        <\/span><span style=\"color: blue\">foreach <\/span>(<span style=\"color: blue\">object <\/span>o <span style=\"color: blue\">in <\/span>e.AddedItems)\n        {\n            <span style=\"color: #2b91af\">Person <\/span>p = o <span style=\"color: blue\">as <\/span><span style=\"color: #2b91af\">Person<\/span>;\n            p.IsSelected = !p.IsSelected;\n        }\n        <span style=\"color: blue\">foreach <\/span>(<span style=\"color: blue\">object <\/span>o <span style=\"color: blue\">in <\/span>e.RemovedItems)\n        {\n            <span style=\"color: #2b91af\">Person <\/span>p = o <span style=\"color: blue\">as <\/span><span style=\"color: #2b91af\">Person<\/span>;\n            p.IsSelected = !p.IsSelected;\n        }\n    }\n\n    <span style=\"color: blue\">void <\/span>myList_KeyUp(<span style=\"color: blue\">object <\/span>sender, <span style=\"color: #2b91af\">KeyEventArgs <\/span>e)\n    {\n        <span style=\"color: blue\">if <\/span>(e.Key == <span style=\"color: #2b91af\">Key<\/span>.Space  )\n        {\n            <span style=\"color: blue\">if <\/span>(e.OriginalSource <span style=\"color: blue\">is <\/span><span style=\"color: #2b91af\">ListBoxItem<\/span>)\n            {\n                <span style=\"color: #2b91af\">Person <\/span>p = (e.OriginalSource <span style=\"color: blue\">as <\/span><span style=\"color: #2b91af\">ListBoxItem<\/span>).DataContext <span style=\"color: blue\">as <\/span><span style=\"color: #2b91af\">Person<\/span>;\n                <span style=\"color: blue\">if <\/span>(p != <span style=\"color: blue\">null<\/span>)\n                {\n                    p.IsSelected = !p.IsSelected;\n                }\n            }\n        }\n    }\n}<\/pre>\n<p>The selection changed toggles the state of each item. Without doing that, the selection doesn\u2019t behave correctly. The SelectedItems list on the listbox no longer reflects the reality of the bound data items \u2013 but that shouldn\u2019t matter in this case as the property of the item reflects the real state accurately.<\/p>\n<p>For testing:<\/p>\n<pre class=\"code\"><span style=\"color: blue\">public class <\/span><span style=\"color: #2b91af\">PeopleList <\/span>: <span style=\"color: #2b91af\">ObservableCollection<\/span>&lt;<span style=\"color: #2b91af\">Person<\/span>&gt;\n{\n    <span style=\"color: blue\">public <\/span>PeopleList()\n    {\n      <span style=\"color: blue\">this<\/span>.Add( <span style=\"color: blue\">new <\/span><span style=\"color: #2b91af\">Person <\/span>{ Name = <span style=\"color: #a31515\">&quot;Henry&quot;<\/span>, IsSelected = <span style=\"color: blue\">true <\/span>});\n      <span style=\"color: blue\">this<\/span>.Add(<span style=\"color: blue\">new <\/span><span style=\"color: #2b91af\">Person <\/span>{ Name = <span style=\"color: #a31515\">&quot;Bonnie&quot;<\/span>, IsSelected = <span style=\"color: blue\">true <\/span>});\n      <span style=\"color: blue\">this<\/span>.Add( <span style=\"color: blue\">new <\/span><span style=\"color: #2b91af\">Person <\/span>{ Name = <span style=\"color: #a31515\">&quot;Clyde&quot;<\/span>, IsSelected = <span style=\"color: blue\">false <\/span>});\n      <span style=\"color: blue\">this<\/span>.Add( <span style=\"color: blue\">new <\/span><span style=\"color: #2b91af\">Person <\/span>{ Name = <span style=\"color: #a31515\">&quot;Ervin&quot;<\/span>, IsSelected = <span style=\"color: blue\">false <\/span>});\n      <span style=\"color: blue\">this<\/span>.Add( <span style=\"color: blue\">new <\/span><span style=\"color: #2b91af\">Person <\/span>{ Name = <span style=\"color: #a31515\">&quot;Timmy&quot;<\/span>, IsSelected = <span style=\"color: blue\">true <\/span>});\n      <span style=\"color: blue\">this<\/span>.Add( <span style=\"color: blue\">new <\/span><span style=\"color: #2b91af\">Person <\/span>{ Name = <span style=\"color: #a31515\">&quot;Jane&quot;<\/span>, IsSelected = <span style=\"color: blue\">true <\/span>});\n\n    }\n}<\/pre>\n<p> And:<\/p>\n<pre class=\"code\"><span style=\"color: blue\">public class <\/span><span style=\"color: #2b91af\">Person <\/span>: <span style=\"color: #2b91af\">INotifyPropertyChanged\n<\/span>{\n    <span style=\"color: blue\">private bool <\/span>_isSelected;\n    <span style=\"color: blue\">private string <\/span>_name;\n\n    <span style=\"color: blue\">public string <\/span>Name\n    {\n        <span style=\"color: blue\">get <\/span>{ <span style=\"color: blue\">return <\/span>_name; }\n        <span style=\"color: blue\">set\n        <\/span>{\n            <span style=\"color: blue\">if <\/span>(<span style=\"color: blue\">value <\/span>!= _name)\n            {\n                _name = <span style=\"color: blue\">value<\/span>;\n                RaisePropertyChanged(<span style=\"color: #a31515\">&quot;Name&quot;<\/span>);\n            }\n        }\n    }\n\n    <span style=\"color: blue\">public bool <\/span>IsSelected\n    {\n        <span style=\"color: blue\">get <\/span>{ <span style=\"color: blue\">return <\/span>_isSelected; }\n        <span style=\"color: blue\">set\n        <\/span>{\n            <span style=\"color: blue\">if <\/span>(_isSelected != <span style=\"color: blue\">value<\/span>)\n            {\n                _isSelected = <span style=\"color: blue\">value<\/span>;\n                RaisePropertyChanged(<span style=\"color: #a31515\">&quot;IsSelected&quot;<\/span>);\n            }\n        }\n    }\n\n    <span style=\"color: blue\">private void <\/span>RaisePropertyChanged(<span style=\"color: blue\">string <\/span>propertyName)\n    {\n        <span style=\"color: blue\">if <\/span>(PropertyChanged != <span style=\"color: blue\">null<\/span>)\n        {\n            PropertyChanged(<span style=\"color: blue\">this<\/span>, <span style=\"color: blue\">new <\/span><span style=\"color: #2b91af\">PropertyChangedEventArgs<\/span>(propertyName));\n        }\n\n    }\n\n    <span style=\"color: blue\">public event <\/span><span style=\"color: #2b91af\">PropertyChangedEventHandler <\/span>PropertyChanged;\n}<\/pre>\n","protected":false},"excerpt":{"rendered":"<p>This technique requires the Blend 4.0 SDK (which is included in Blend 4.0 and is also available as a free download. Someone on StackOverflow asked how to bind a collection of items to a ListBox in Silverlight where the IsSelected property of the ListBoxItem is bound to an IsSelected property of the data item. WPF [&hellip;]<\/p>\n","protected":false},"author":2,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"spay_email":"","jetpack_publicize_message":"","jetpack_is_tweetstorm":false,"jetpack_publicize_feature_enabled":true},"categories":[4,14],"tags":[],"jetpack_publicize_connections":[],"jetpack_featured_media_url":"","jetpack_sharing_enabled":true,"jetpack_shortlink":"https:\/\/wp.me\/pd5QIe-hX","jetpack_likes_enabled":true,"jetpack-related-posts":[{"id":1701,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/1701","url_meta":{"origin":1113,"position":0},"title":"Windows 8 WinRT\/Metro Missing UpdateSourceTrigger","date":"August 5, 2012","format":false,"excerpt":"If you\u2019ve done WPF or Silverlight programming, you may have found an occasion where using the Binding property UpdateSourceTrigger set to PropertyChanged was extremely useful. (I know I have!) It may have looked something like this: <TextBox Text=\"{Binding Path=Value, UpdateSourceTrigger=PropertyChanged}\" \/> The key feature was the live updating of the\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"","width":0,"height":0},"classes":[]},{"id":568,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/568","url_meta":{"origin":1113,"position":1},"title":"Data Binding and Tooltips in Silverlight","date":"September 19, 2008","format":false,"excerpt":"Have you ever wanted to databind a tooltip in Silverlight (or WPF for that matter), and found that the DataContext isn't available for tooltips (the datacontext is null)? It's very annoying. Tooltips, unfortunately, aren't connected to their parents in anyway when they're created, so they loose the ability to connect\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"","width":0,"height":0},"classes":[]},{"id":388,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/388","url_meta":{"origin":1113,"position":2},"title":"Silverlight Weather Demonstration","date":"June 26, 2008","format":false,"excerpt":"Demonstration available here. (You'll need to wait for a moment while it loads the first time). I've created a reasonably simple, yet multi-technology (and discipline) demonstration using Silverlight for the user interface and ASP.NET as the back-end. The demonstration uses: Silverlight 2.0 Data binding Delayed downloading of images \"Web services\"\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"https:\/\/i0.wp.com\/www.wiredprairie.us\/blog\/wp-content\/uploads\/2008\/06\/image21.png?resize=350%2C200","width":350,"height":200},"classes":[]},{"id":1016,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/1016","url_meta":{"origin":1113,"position":3},"title":"Silverlight vs. Flash vs. Photoshop Text Rendering","date":"March 24, 2010","format":false,"excerpt":"Curious about text rendering characteristics between Flash 10, Silverlight 4.0 and Photoshop, I created two small applications, one in Flash CS 4, and one in Visual Studio 2010. The Silverlight 4.0 tests are using the release candidate which was current as of March 23, 2010. I used Times New Roman\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"image","src":"https:\/\/i0.wp.com\/www.wiredprairie.us\/blog\/wp-content\/uploads\/2010\/03\/image_thumb.png?resize=350%2C200","width":350,"height":200},"classes":[]},{"id":633,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/633","url_meta":{"origin":1113,"position":4},"title":"A Silverlight 2 TilePanel","date":"December 14, 2008","format":false,"excerpt":"You may notice that the Silverlight TileBrush is missing some key properties which would enable it to actually tile a brush. The WPF TileBrush has properties such as TileMode, Viewbox, and ViewportUnits that can be used to tile an image as a fill or as a background for a UIElement.\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"https:\/\/i0.wp.com\/www.wiredprairie.us\/blog\/wp-content\/uploads\/2008\/12\/image1.png?resize=350%2C200","width":350,"height":200},"classes":[]},{"id":543,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/543","url_meta":{"origin":1113,"position":5},"title":"Where do you &quot;event&quot;?","date":"September 4, 2008","format":false,"excerpt":"From JohnPapa.net, \"Siliverlight 2-Tip - Declaring Events.\" He thinks that the place to wire up an event is always in code rather than in markup (like XAML). \"What\u2019s my opinion? I firmly believe the handlers belong in the code and not in the XAML.\" I'd suggest that's not always right\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"","width":0,"height":0},"classes":[]}],"_links":{"self":[{"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wpjson\/wp\/v2\/posts\/1113"}],"collection":[{"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wpjson\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wpjson\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wpjson\/wp\/v2\/users\/2"}],"replies":[{"embeddable":true,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wpjson\/wp\/v2\/comments?post=1113"}],"version-history":[{"count":0,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wpjson\/wp\/v2\/posts\/1113\/revisions"}],"wp:attachment":[{"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wpjson\/wp\/v2\/media?parent=1113"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wpjson\/wp\/v2\/categories?post=1113"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wpjson\/wp\/v2\/tags?post=1113"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}