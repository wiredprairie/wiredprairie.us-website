{"id":847,"date":"2009-10-28T07:49:11","date_gmt":"2009-10-28T12:49:11","guid":{"rendered":"http:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/847"},"modified":"2009-10-28T07:49:11","modified_gmt":"2009-10-28T12:49:11","slug":"silverlight-cliptobounds","status":"publish","type":"post","link":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/847","title":{"rendered":"Silverlight ClipToBounds"},"content":{"rendered":"<p>WPF\u2019s ClipToBounds property is not available on Panels in Silverlight, which can lead to some design frustration. Using the new Interactions and Blend Behavior framework, it\u2019s easy to whip up something nearly identical!<\/p>\n<pre class=\"code\"><span style=\"color: blue\">using <\/span><span style=\"color: black\">System;\n<\/span><span style=\"color: blue\">using <\/span><span style=\"color: black\">System.Collections.Generic;\n<\/span><span style=\"color: blue\">using <\/span><span style=\"color: black\">System.Text;\n<\/span><span style=\"color: blue\">using <\/span><span style=\"color: black\">System.Windows;\n<\/span><span style=\"color: blue\">using <\/span><span style=\"color: black\">System.Windows.Controls;\n<\/span><span style=\"color: blue\">using <\/span><span style=\"color: black\">System.Windows.Data;\n<\/span><span style=\"color: blue\">using <\/span><span style=\"color: black\">System.Windows.Documents;\n<\/span><span style=\"color: blue\">using <\/span><span style=\"color: black\">System.Windows.Input;\n<\/span><span style=\"color: blue\">using <\/span><span style=\"color: black\">System.Windows.Media;\n<\/span><span style=\"color: blue\">using <\/span><span style=\"color: black\">System.Windows.Media.Imaging;\n<\/span><span style=\"color: blue\">using <\/span><span style=\"color: black\">System.Windows.Shapes;\n<\/span><span style=\"color: blue\">using <\/span><span style=\"color: black\">System.Windows.Interactivity;\n<\/span><span style=\"color: green\">\/\/using Microsoft.Expression.Interactivity.Core;\n\n<\/span><span style=\"color: blue\">namespace <\/span><span style=\"color: black\">AutoClipperDemo\n{\n    <\/span><span style=\"color: blue\">public class <\/span><span style=\"color: black\">AutoClipBehavior : Behavior&lt;DependencyObject&gt;\n    {\n        <\/span><span style=\"color: blue\">private <\/span><span style=\"color: black\">RectangleGeometry _rectGeo;\n\n        <\/span><span style=\"color: blue\">protected override void <\/span><span style=\"color: black\">OnAttached()\n        {\n            <\/span><span style=\"color: blue\">base<\/span><span style=\"color: black\">.OnAttached();\n\n            <\/span><span style=\"color: blue\">if <\/span><span style=\"color: black\">(<\/span><span style=\"color: blue\">base<\/span><span style=\"color: black\">.AssociatedObject <\/span><span style=\"color: blue\">is <\/span><span style=\"color: black\">FrameworkElement)\n            {                 \n                FrameworkElement fe = AssociatedObject <\/span><span style=\"color: blue\">as <\/span><span style=\"color: black\">FrameworkElement;\n                fe.SizeChanged += <\/span><span style=\"color: blue\">new <\/span><span style=\"color: black\">SizeChangedEventHandler(AttachedObjectSizeChanged);\n                \n                _rectGeo = <\/span><span style=\"color: blue\">new <\/span><span style=\"color: black\">RectangleGeometry();\n                fe.Clip = _rectGeo;\n                \n                OnAdjustClip(fe, <\/span><span style=\"color: blue\">new <\/span><span style=\"color: black\">Size(fe.ActualWidth, fe.ActualHeight));\n            }            \n        }\n\n        <\/span><span style=\"color: blue\">protected virtual void <\/span><span style=\"color: black\">OnAdjustClip(FrameworkElement fe, Size sz)\n        {\n            Rect rect = <\/span><span style=\"color: blue\">new <\/span><span style=\"color: black\">Rect(<\/span><span style=\"color: purple\">0<\/span><span style=\"color: black\">, <\/span><span style=\"color: purple\">0<\/span><span style=\"color: black\">, sz.Width, sz.Height);\n\n            <\/span><span style=\"color: green\">\/\/ it would be interesting to handle the border, but alas\n            \/\/ we can't as it would clip the border as well. :)\n            \/\/ best solution is to just put the border on or around\n            \/\/ the panel being clipped by this\n            <\/span><span style=\"color: black\">_rectGeo.Rect = rect;\n        }\n\n        <\/span><span style=\"color: blue\">private void <\/span><span style=\"color: black\">AttachedObjectSizeChanged(<\/span><span style=\"color: blue\">object <\/span><span style=\"color: black\">sender, SizeChangedEventArgs e)\n        {            \n            OnAdjustClip(AssociatedObject <\/span><span style=\"color: blue\">as <\/span><span style=\"color: black\">FrameworkElement, e.NewSize);\n        }\n\n        <\/span><span style=\"color: green\">\/\/ always clean up after yourself ... remove anything that was attached\n        \/\/ to prevent incorrect clipping and unnecessary event handlers\n        <\/span><span style=\"color: blue\">protected override void <\/span><span style=\"color: black\">OnDetaching()\n        {\n            <\/span><span style=\"color: blue\">base<\/span><span style=\"color: black\">.OnDetaching();\n\n            <\/span><span style=\"color: blue\">if <\/span><span style=\"color: black\">(<\/span><span style=\"color: blue\">base<\/span><span style=\"color: black\">.AssociatedObject <\/span><span style=\"color: blue\">is <\/span><span style=\"color: black\">FrameworkElement)\n            {\n                FrameworkElement fe = AssociatedObject <\/span><span style=\"color: blue\">as <\/span><span style=\"color: black\">FrameworkElement;\n                fe.SizeChanged -= <\/span><span style=\"color: blue\">new <\/span><span style=\"color: black\">SizeChangedEventHandler(AttachedObjectSizeChanged);\n                fe.Clip = <\/span><span style=\"color: blue\">null<\/span><span style=\"color: black\">;\n                _rectGeo = <\/span><span style=\"color: blue\">null<\/span><span style=\"color: black\">;\n            }\n        }\n    }\n}<\/span><\/pre>\n<p><a href=\"http:\/\/11011.net\/software\/vspaste\"><\/a><\/p>\n<p><img loading=\"lazy\" style=\"border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px\" title=\"image\" border=\"0\" alt=\"image\" src=\"http:\/\/www.wiredprairie.us\/blog\/wp-content\/uploads\/2009\/10\/image2.png\" width=\"454\" height=\"340\" \/> <\/p>\n<pre class=\"code\"><span style=\"color: blue\">&lt;<\/span><span style=\"color: #a31515\">Border <\/span><span style=\"color: red\">Grid.Column<\/span><span style=\"color: blue\">=&quot;4&quot; <\/span><span style=\"color: red\">Grid.Row<\/span><span style=\"color: blue\">=&quot;2&quot; <\/span><span style=\"color: red\">BorderBrush<\/span><span style=\"color: blue\">=&quot;White&quot; <\/span><span style=\"color: red\">BorderThickness<\/span><span style=\"color: blue\">=&quot;4&quot; <\/span><span style=\"color: red\">Background<\/span><span style=\"color: blue\">=&quot;#FF31C525&quot;&gt;\n    &lt;<\/span><span style=\"color: #a31515\">i<\/span><span style=\"color: blue\">:<\/span><span style=\"color: #a31515\">Interaction.Behaviors<\/span><span style=\"color: blue\">&gt;\n        &lt;<\/span><span style=\"color: #a31515\">local<\/span><span style=\"color: blue\">:<\/span><span style=\"color: #a31515\">AutoClipBehavior<\/span><span style=\"color: blue\">\/&gt;\n    &lt;\/<\/span><span style=\"color: #a31515\">i<\/span><span style=\"color: blue\">:<\/span><span style=\"color: #a31515\">Interaction.Behaviors<\/span><span style=\"color: blue\">&gt;\n    &lt;<\/span><span style=\"color: #a31515\">Grid<\/span><span style=\"color: blue\">&gt;\n        &lt;<\/span><span style=\"color: #a31515\">Ellipse <\/span><span style=\"color: red\">Fill<\/span><span style=\"color: blue\">=&quot;#FF09570A&quot; <\/span><span style=\"color: red\">Stroke<\/span><span style=\"color: blue\">=&quot;Black&quot; <\/span><span style=\"color: red\">Height<\/span><span style=\"color: blue\">=&quot;250&quot; <\/span><span style=\"color: red\">Margin<\/span><span style=\"color: blue\">=&quot;91,138,-61,-46&quot; <\/span><span style=\"color: red\">VerticalAlignment<\/span><span style=\"color: blue\">=&quot;Bottom&quot; <\/span><span style=\"color: red\">Width<\/span><span style=\"color: blue\">=&quot;250&quot;\/&gt;\n    &lt;\/<\/span><span style=\"color: #a31515\">Grid<\/span><span style=\"color: blue\">&gt;\n&lt;\/<\/span><span style=\"color: #a31515\">Border<\/span><span style=\"color: blue\">&gt;\n<\/span><\/pre>\n<p><a href=\"http:\/\/11011.net\/software\/vspaste\"><\/a><\/p>\n","protected":false},"excerpt":{"rendered":"<p>WPF\u2019s ClipToBounds property is not available on Panels in Silverlight, which can lead to some design frustration. Using the new Interactions and Blend Behavior framework, it\u2019s easy to whip up something nearly identical! using System; using System.Collections.Generic; using System.Text; using System.Windows; using System.Windows.Controls; using System.Windows.Data; using System.Windows.Documents; using System.Windows.Input; using System.Windows.Media; using System.Windows.Media.Imaging; using System.Windows.Shapes; [&hellip;]<\/p>\n","protected":false},"author":2,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"spay_email":"","jetpack_publicize_message":"","jetpack_is_tweetstorm":false,"jetpack_publicize_feature_enabled":true},"categories":[4,14],"tags":[],"jetpack_publicize_connections":[],"jetpack_featured_media_url":"","jetpack_sharing_enabled":true,"jetpack_shortlink":"https:\/\/wp.me\/pd5QIe-dF","jetpack_likes_enabled":true,"jetpack-related-posts":[{"id":568,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/568","url_meta":{"origin":847,"position":0},"title":"Data Binding and Tooltips in Silverlight","date":"September 19, 2008","format":false,"excerpt":"Have you ever wanted to databind a tooltip in Silverlight (or WPF for that matter), and found that the DataContext isn't available for tooltips (the datacontext is null)? It's very annoying. Tooltips, unfortunately, aren't connected to their parents in anyway when they're created, so they loose the ability to connect\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"","width":0,"height":0},"classes":[]},{"id":1701,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/1701","url_meta":{"origin":847,"position":1},"title":"Windows 8 WinRT\/Metro Missing UpdateSourceTrigger","date":"August 5, 2012","format":false,"excerpt":"If you\u2019ve done WPF or Silverlight programming, you may have found an occasion where using the Binding property UpdateSourceTrigger set to PropertyChanged was extremely useful. (I know I have!) It may have looked something like this: <TextBox Text=\"{Binding Path=Value, UpdateSourceTrigger=PropertyChanged}\" \/> The key feature was the live updating of the\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"","width":0,"height":0},"classes":[]},{"id":1705,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/1705","url_meta":{"origin":847,"position":2},"title":"WinRT\/Xaml\/AKA Metro DataTemplate selection based on Data Types","date":"August 20, 2012","format":false,"excerpt":"You may have noticed that WinRT does not have automatic resolution of a DataTemplate based on the data type of object added to an ItemsControl. While unfortunate as this behavior is quite handy, it\u2019s not too difficult to replicate the functionality using a DataTemplateSelector. WPF for example, could do something\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"","width":0,"height":0},"classes":[]},{"id":379,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/379","url_meta":{"origin":847,"position":3},"title":"Oh Silverlight 2.0 Console (Example and Source code)","date":"June 21, 2008","format":false,"excerpt":"Try it here. See a picture below: :) I ran into one odd issue when using Silverlight 2.0 Beta 2.... \u00a0void Page_Loaded(object sender, RoutedEventArgs e) { \/\/ if you don't invoke this asynchronously, you can't add at load time \/\/ (seems to be a silverlight 2.0 issue) Dispatcher.BeginInvoke(delegate() { consoleCanvas.AnimateNewChild(\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"image","src":"https:\/\/i0.wp.com\/www.wiredprairie.us\/blog\/wp-content\/uploads\/2008\/06\/image20.png?resize=350%2C200","width":350,"height":200},"classes":[]},{"id":723,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/723","url_meta":{"origin":847,"position":4},"title":"Silverlight Stopwatch class in C#","date":"March 1, 2009","format":false,"excerpt":"I needed a simple method for doing some timings in Silverlight. Silverlight lacks the high performance query counter that is available natively in Windows (and available in .NET 3.5 for example), but it does have a TickCount. My code (mostly) mirrors the existing .NET Stopwatch class using the TickCount property\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"","width":0,"height":0},"classes":[]},{"id":1016,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/1016","url_meta":{"origin":847,"position":5},"title":"Silverlight vs. Flash vs. Photoshop Text Rendering","date":"March 24, 2010","format":false,"excerpt":"Curious about text rendering characteristics between Flash 10, Silverlight 4.0 and Photoshop, I created two small applications, one in Flash CS 4, and one in Visual Studio 2010. The Silverlight 4.0 tests are using the release candidate which was current as of March 23, 2010. I used Times New Roman\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"image","src":"https:\/\/i0.wp.com\/www.wiredprairie.us\/blog\/wp-content\/uploads\/2010\/03\/image_thumb.png?resize=350%2C200","width":350,"height":200},"classes":[]}],"_links":{"self":[{"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wpjson\/wp\/v2\/posts\/847"}],"collection":[{"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wpjson\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wpjson\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wpjson\/wp\/v2\/users\/2"}],"replies":[{"embeddable":true,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wpjson\/wp\/v2\/comments?post=847"}],"version-history":[{"count":0,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wpjson\/wp\/v2\/posts\/847\/revisions"}],"wp:attachment":[{"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wpjson\/wp\/v2\/media?parent=847"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wpjson\/wp\/v2\/categories?post=847"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wpjson\/wp\/v2\/tags?post=847"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}