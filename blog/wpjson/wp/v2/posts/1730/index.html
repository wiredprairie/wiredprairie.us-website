{"id":1730,"date":"2012-09-07T20:51:30","date_gmt":"2012-09-08T01:51:30","guid":{"rendered":"http:\/\/www.wiredprairie.us\/blog\/?p=1730"},"modified":"2012-09-07T20:51:30","modified_gmt":"2012-09-08T01:51:30","slug":"how-to-find-an-element-in-a-datatemplate-in-winrtxaml","status":"publish","type":"post","link":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/1730","title":{"rendered":"How to find an element in a DataTemplate in WinRT\/XAML."},"content":{"rendered":"<p>Here\u2019s one way to find a named element in a DataTemplate in XAML in Windows 8 XAML.<\/p>\n<p>You might try FindName to discover it doesn\u2019t work. That\u2019s because it\u2019s not recursive.<\/p>\n<p>So, I created a simple extension method to do the same thing:<\/p>\n<pre class=\"code\"><span style=\"background: white; color: blue\">public static class <\/span><span style=\"background: white; color: #2b91af\">FrameworkElementExtensions\n<\/span><span style=\"background: white; color: black\">{\n    <\/span><span style=\"background: white; color: blue\">public static <\/span><span style=\"background: white; color: #2b91af\">FrameworkElement <\/span><span style=\"background: white; color: black\">FindDescendantByName(<\/span><span style=\"background: white; color: blue\">this <\/span><span style=\"background: white; color: #2b91af\">FrameworkElement <\/span><span style=\"background: white; color: black\">element, <\/span><span style=\"background: white; color: blue\">string <\/span><span style=\"background: white; color: black\">name)\n    {\n        <\/span><span style=\"background: white; color: blue\">if <\/span><span style=\"background: white; color: black\">(element == <\/span><span style=\"background: white; color: blue\">null <\/span><span style=\"background: white; color: black\">|| <\/span><span style=\"background: white; color: blue\">string<\/span><span style=\"background: white; color: black\">.IsNullOrWhiteSpace(name)) { <\/span><span style=\"background: white; color: blue\">return null<\/span><span style=\"background: white; color: black\">; }\n\n        <\/span><span style=\"background: white; color: blue\">if <\/span><span style=\"background: white; color: black\">(name.Equals(element.Name, <\/span><span style=\"background: white; color: #2b91af\">StringComparison<\/span><span style=\"background: white; color: black\">.OrdinalIgnoreCase))\n        {\n            <\/span><span style=\"background: white; color: blue\">return <\/span><span style=\"background: white; color: black\">element;\n        }\n        <\/span><span style=\"background: white; color: blue\">var <\/span><span style=\"background: white; color: black\">childCount = <\/span><span style=\"background: white; color: #2b91af\">VisualTreeHelper<\/span><span style=\"background: white; color: black\">.GetChildrenCount(element);\n        <\/span><span style=\"background: white; color: blue\">for <\/span><span style=\"background: white; color: black\">(<\/span><span style=\"background: white; color: blue\">int <\/span><span style=\"background: white; color: black\">i = 0; i &lt; childCount; i++)\n        {\n            <\/span><span style=\"background: white; color: blue\">var <\/span><span style=\"background: white; color: black\">result = (<\/span><span style=\"background: white; color: #2b91af\">VisualTreeHelper<\/span><span style=\"background: white; color: black\">.GetChild(element, i) <\/span><span style=\"background: white; color: blue\">as <\/span><span style=\"background: white; color: #2b91af\">FrameworkElement<\/span><span style=\"background: white; color: black\">).FindDescendantByName(name);\n            <\/span><span style=\"background: white; color: blue\">if <\/span><span style=\"background: white; color: black\">(result != <\/span><span style=\"background: white; color: blue\">null<\/span><span style=\"background: white; color: black\">) { <\/span><span style=\"background: white; color: blue\">return <\/span><span style=\"background: white; color: black\">result; }\n        }\n        <\/span><span style=\"background: white; color: blue\">return null<\/span><span style=\"background: white; color: black\">;\n    }\n}<\/span><\/pre>\n<p>The code above loops through the children and attempts to match by name. <\/p>\n<p>A simple usage (admittedly, this is stupid and clunky as lists are often virtualized, but \u2026)<\/p>\n<pre class=\"code\"><span style=\"background: white; color: blue\">private void <\/span><span style=\"background: white; color: black\">Page_Loaded_1(<\/span><span style=\"background: white; color: blue\">object <\/span><span style=\"background: white; color: black\">sender, Windows.UI.Xaml.<\/span><span style=\"background: white; color: #2b91af\">RoutedEventArgs <\/span><span style=\"background: white; color: black\">e)\n{\n    <\/span><span style=\"background: white; color: blue\">for <\/span><span style=\"background: white; color: black\">(<\/span><span style=\"background: white; color: blue\">int <\/span><span style=\"background: white; color: black\">i = 0; i &lt; myPeeps.Items.Count; i++)\n    {\n        <\/span><span style=\"background: white; color: blue\">var <\/span><span style=\"background: white; color: black\">element = myPeeps.ItemContainerGenerator.ContainerFromIndex(i) <\/span><span style=\"background: white; color: blue\">as <\/span><span style=\"background: white; color: #2b91af\">FrameworkElement<\/span><span style=\"background: white; color: black\">;\n        <\/span><span style=\"background: white; color: blue\">if <\/span><span style=\"background: white; color: black\">(element != <\/span><span style=\"background: white; color: blue\">null<\/span><span style=\"background: white; color: black\">)\n        {\n            <\/span><span style=\"background: white; color: blue\">var <\/span><span style=\"background: white; color: black\">tb = element.FindDescendantByName(<\/span><span style=\"background: white; color: #a31515\">&quot;tbValue&quot;<\/span><span style=\"background: white; color: black\">) <\/span><span style=\"background: white; color: blue\">as <\/span><span style=\"background: white; color: #2b91af\">TextBlock<\/span><span style=\"background: white; color: black\">;\n            <\/span><span style=\"background: white; color: blue\">if <\/span><span style=\"background: white; color: black\">(tb != <\/span><span style=\"background: white; color: blue\">null<\/span><span style=\"background: white; color: black\">)\n            {\n                tb.Text = i.ToString();\n            }\n        }\n    }\n}<\/span><\/pre>\n<p>Given this DataTemplate and Page:<\/p>\n<pre class=\"code\"><span style=\"background: white; color: blue\">&lt;<\/span><span style=\"background: white; color: #a31515\">Page.Resources<\/span><span style=\"background: white; color: blue\">&gt;\n    &lt;<\/span><span style=\"background: white; color: #a31515\">local<\/span><span style=\"background: white; color: blue\">:<\/span><span style=\"background: white; color: #a31515\">SampleDataSource <\/span><span style=\"background: white; color: red\">x<\/span><span style=\"background: white; color: blue\">:<\/span><span style=\"background: white; color: red\">Key<\/span><span style=\"background: white; color: blue\">=&quot;sampleData&quot; \/&gt;\n    &lt;<\/span><span style=\"background: white; color: #a31515\">DataTemplate <\/span><span style=\"background: white; color: red\">x<\/span><span style=\"background: white; color: blue\">:<\/span><span style=\"background: white; color: red\">Key<\/span><span style=\"background: white; color: blue\">=&quot;SampleDataTemplate&quot;&gt;\n        &lt;<\/span><span style=\"background: white; color: #a31515\">Grid <\/span><span style=\"background: white; color: blue\">&gt;\n            &lt;<\/span><span style=\"background: white; color: #a31515\">Grid.RowDefinitions<\/span><span style=\"background: white; color: blue\">&gt;\n                &lt;<\/span><span style=\"background: white; color: #a31515\">RowDefinition <\/span><span style=\"background: white; color: red\">Height<\/span><span style=\"background: white; color: blue\">=&quot;Auto&quot;\/&gt;\n                &lt;<\/span><span style=\"background: white; color: #a31515\">RowDefinition <\/span><span style=\"background: white; color: red\">Height<\/span><span style=\"background: white; color: blue\">=&quot;Auto&quot;\/&gt;\n            &lt;\/<\/span><span style=\"background: white; color: #a31515\">Grid.RowDefinitions<\/span><span style=\"background: white; color: blue\">&gt;\n            &lt;<\/span><span style=\"background: white; color: #a31515\">TextBlock <\/span><span style=\"background: white; color: red\">HorizontalAlignment<\/span><span style=\"background: white; color: blue\">=&quot;Left&quot; <\/span><span style=\"background: white; color: red\">Text<\/span><span style=\"background: white; color: blue\">=&quot;{<\/span><span style=\"background: white; color: #a31515\">Binding <\/span><span style=\"background: white; color: red\">Name<\/span><span style=\"background: white; color: blue\">}&quot; \/&gt;\n            &lt;<\/span><span style=\"background: white; color: #a31515\">TextBlock <\/span><span style=\"background: white; color: red\">Grid.Row<\/span><span style=\"background: white; color: blue\">=&quot;1&quot; <\/span><span style=\"background: white; color: red\">Name<\/span><span style=\"background: white; color: blue\">=&quot;tbValue&quot; \/&gt;\n        &lt;\/<\/span><span style=\"background: white; color: #a31515\">Grid<\/span><span style=\"background: white; color: blue\">&gt;\n    &lt;\/<\/span><span style=\"background: white; color: #a31515\">DataTemplate<\/span><span style=\"background: white; color: blue\">&gt;\n&lt;\/<\/span><span style=\"background: white; color: #a31515\">Page.Resources<\/span><span style=\"background: white; color: blue\">&gt;\n\n&lt;<\/span><span style=\"background: white; color: #a31515\">Grid <\/span><span style=\"background: white; color: red\">Background<\/span><span style=\"background: white; color: blue\">=&quot;{<\/span><span style=\"background: white; color: #a31515\">StaticResource <\/span><span style=\"background: white; color: red\">ApplicationPageBackgroundThemeBrush<\/span><span style=\"background: white; color: blue\">}&quot; \n      <\/span><span style=\"background: white; color: red\">DataContext<\/span><span style=\"background: white; color: blue\">=&quot;{<\/span><span style=\"background: white; color: #a31515\">StaticResource <\/span><span style=\"background: white; color: red\">sampleData<\/span><span style=\"background: white; color: blue\">}&quot;&gt;\n    &lt;<\/span><span style=\"background: white; color: #a31515\">ItemsControl <\/span><span style=\"background: white; color: red\">x<\/span><span style=\"background: white; color: blue\">:<\/span><span style=\"background: white; color: red\">Name<\/span><span style=\"background: white; color: blue\">=&quot;myPeeps&quot;\n        <\/span><span style=\"background: white; color: red\">ItemsSource <\/span><span style=\"background: white; color: blue\">= &quot;{<\/span><span style=\"background: white; color: #a31515\">Binding <\/span><span style=\"background: white; color: red\">Persons<\/span><span style=\"background: white; color: blue\">}&quot;\n        <\/span><span style=\"background: white; color: red\">ItemTemplate<\/span><span style=\"background: white; color: blue\">=&quot;{<\/span><span style=\"background: white; color: #a31515\">StaticResource <\/span><span style=\"background: white; color: red\">SampleDataTemplate<\/span><span style=\"background: white; color: blue\">}&quot; <\/span><span style=\"background: white; color: red\">FontSize<\/span><span style=\"background: white; color: blue\">=&quot;22&quot;\/&gt;\n&lt;\/<\/span><span style=\"background: white; color: #a31515\">Grid<\/span><span style=\"background: white; color: blue\">&gt;<\/span><\/pre>\n<p>And this sample data:<\/p>\n<pre class=\"code\"><span style=\"background: white; color: blue\">public class <\/span><span style=\"background: white; color: #2b91af\">Person <\/span><span style=\"background: white; color: black\">{\n    <\/span><span style=\"background: white; color: blue\">public string <\/span><span style=\"background: white; color: black\">Name { <\/span><span style=\"background: white; color: blue\">get<\/span><span style=\"background: white; color: black\">; <\/span><span style=\"background: white; color: blue\">set<\/span><span style=\"background: white; color: black\">; }        \n}    \n\n<\/span><span style=\"background: white; color: blue\">public class <\/span><span style=\"background: white; color: #2b91af\">SampleDataSource <\/span><span style=\"background: white; color: black\">{\n    <\/span><span style=\"background: white; color: blue\">public <\/span><span style=\"background: white; color: #2b91af\">IEnumerable<\/span><span style=\"background: white; color: black\">&lt;<\/span><span style=\"background: white; color: #2b91af\">Person<\/span><span style=\"background: white; color: black\">&gt; Persons { <\/span><span style=\"background: white; color: blue\">get<\/span><span style=\"background: white; color: black\">; <\/span><span style=\"background: white; color: blue\">private set<\/span><span style=\"background: white; color: black\">; }\n    \n    \n    <\/span><span style=\"background: white; color: blue\">public <\/span><span style=\"background: white; color: black\">SampleDataSource () {\n        <\/span><span style=\"background: white; color: blue\">var <\/span><span style=\"background: white; color: black\">list = <\/span><span style=\"background: white; color: blue\">new <\/span><span style=\"background: white; color: #2b91af\">List<\/span><span style=\"background: white; color: black\">&lt;<\/span><span style=\"background: white; color: #2b91af\">Person<\/span><span style=\"background: white; color: black\">&gt;();\n        \n        list.Add(<\/span><span style=\"background: white; color: blue\">new <\/span><span style=\"background: white; color: #2b91af\">Person <\/span><span style=\"background: white; color: black\">{ Name = <\/span><span style=\"background: white; color: #a31515\">&quot;Alex&quot; <\/span><span style=\"background: white; color: black\">});\n        list.Add(<\/span><span style=\"background: white; color: blue\">new <\/span><span style=\"background: white; color: #2b91af\">Person <\/span><span style=\"background: white; color: black\">{ Name = <\/span><span style=\"background: white; color: #a31515\">&quot;Betsy&quot; <\/span><span style=\"background: white; color: black\">});\n        list.Add(<\/span><span style=\"background: white; color: blue\">new <\/span><span style=\"background: white; color: #2b91af\">Person <\/span><span style=\"background: white; color: black\">{ Name = <\/span><span style=\"background: white; color: #a31515\">&quot;Carla&quot; <\/span><span style=\"background: white; color: black\">});\n        list.Add(<\/span><span style=\"background: white; color: blue\">new <\/span><span style=\"background: white; color: #2b91af\">Person <\/span><span style=\"background: white; color: black\">{ Name = <\/span><span style=\"background: white; color: #a31515\">&quot;Donald&quot; <\/span><span style=\"background: white; color: black\">});\n        list.Add(<\/span><span style=\"background: white; color: blue\">new <\/span><span style=\"background: white; color: #2b91af\">Person <\/span><span style=\"background: white; color: black\">{ Name = <\/span><span style=\"background: white; color: #a31515\">&quot;Erica&quot; <\/span><span style=\"background: white; color: black\">});\n        list.Add(<\/span><span style=\"background: white; color: blue\">new <\/span><span style=\"background: white; color: #2b91af\">Person <\/span><span style=\"background: white; color: black\">{ Name = <\/span><span style=\"background: white; color: #a31515\">&quot;Francis&quot; <\/span><span style=\"background: white; color: black\">});            \n        \n        <\/span><span style=\"background: white; color: blue\">this<\/span><span style=\"background: white; color: black\">.Persons = list;\n    }            \n}<\/span><\/pre>\n<p>You\u2019ll get results like this:<\/p>\n<p><img loading=\"lazy\" style=\"background-image: none; border-bottom: 0px; border-left: 0px; margin: 0px auto; padding-left: 0px; padding-right: 0px; display: block; float: none; border-top: 0px; border-right: 0px; padding-top: 0px\" title=\"image\" border=\"0\" alt=\"image\" src=\"http:\/\/www.wiredprairie.us\/blog\/wp-content\/uploads\/2012\/09\/image.png\" width=\"497\" height=\"582\" \/><\/p>\n","protected":false},"excerpt":{"rendered":"<p>Here\u2019s one way to find a named element in a DataTemplate in XAML in Windows 8 XAML. You might try FindName to discover it doesn\u2019t work. That\u2019s because it\u2019s not recursive. So, I created a simple extension method to do the same thing: public static class FrameworkElementExtensions { public static FrameworkElement FindDescendantByName(this FrameworkElement element, string [&hellip;]<\/p>\n","protected":false},"author":2,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"spay_email":"","jetpack_publicize_message":"","jetpack_is_tweetstorm":false,"jetpack_publicize_feature_enabled":true},"categories":[4],"tags":[82,119,105,107],"jetpack_publicize_connections":[],"jetpack_featured_media_url":"","jetpack_sharing_enabled":true,"jetpack_shortlink":"https:\/\/wp.me\/pd5QIe-rU","jetpack_likes_enabled":true,"jetpack-related-posts":[{"id":1705,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/1705","url_meta":{"origin":1730,"position":0},"title":"WinRT\/Xaml\/AKA Metro DataTemplate selection based on Data Types","date":"August 20, 2012","format":false,"excerpt":"You may have noticed that WinRT does not have automatic resolution of a DataTemplate based on the data type of object added to an ItemsControl. While unfortunate as this behavior is quite handy, it\u2019s not too difficult to replicate the functionality using a DataTemplateSelector. WPF for example, could do something\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"","width":0,"height":0},"classes":[]},{"id":568,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/568","url_meta":{"origin":1730,"position":1},"title":"Data Binding and Tooltips in Silverlight","date":"September 19, 2008","format":false,"excerpt":"Have you ever wanted to databind a tooltip in Silverlight (or WPF for that matter), and found that the DataContext isn't available for tooltips (the datacontext is null)? It's very annoying. Tooltips, unfortunately, aren't connected to their parents in anyway when they're created, so they loose the ability to connect\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"","width":0,"height":0},"classes":[]},{"id":1701,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/1701","url_meta":{"origin":1730,"position":2},"title":"Windows 8 WinRT\/Metro Missing UpdateSourceTrigger","date":"August 5, 2012","format":false,"excerpt":"If you\u2019ve done WPF or Silverlight programming, you may have found an occasion where using the Binding property UpdateSourceTrigger set to PropertyChanged was extremely useful. (I know I have!) It may have looked something like this: <TextBox Text=\"{Binding Path=Value, UpdateSourceTrigger=PropertyChanged}\" \/> The key feature was the live updating of the\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"","width":0,"height":0},"classes":[]},{"id":388,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/388","url_meta":{"origin":1730,"position":3},"title":"Silverlight Weather Demonstration","date":"June 26, 2008","format":false,"excerpt":"Demonstration available here. (You'll need to wait for a moment while it loads the first time). I've created a reasonably simple, yet multi-technology (and discipline) demonstration using Silverlight for the user interface and ASP.NET as the back-end. The demonstration uses: Silverlight 2.0 Data binding Delayed downloading of images \"Web services\"\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"https:\/\/i0.wp.com\/www.wiredprairie.us\/blog\/wp-content\/uploads\/2008\/06\/image21.png?resize=350%2C200","width":350,"height":200},"classes":[]},{"id":670,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/670","url_meta":{"origin":1730,"position":4},"title":"Silverlight: Dynamically creating XAML elements  at runtime","date":"January 19, 2009","format":false,"excerpt":"Given the following XML file: <assets> <asset name=\"tile\"> <Canvas xmlns=\"http:\/\/schemas.microsoft.com\/winfx\/2006\/xaml\/presentation\" xmlns:x=\"http:\/\/schemas.microsoft.com\/winfx\/2006\/xaml\"> <Path x:Name=\"top\" Width=\"24\" Height=\"12\" Stretch=\"Fill\" Fill=\"#FF065F02\" Stroke=\"#10000000\" Data=\"F1 M 0,6L 12,12L 24,6L 12,0L 0,6 Z \"\/> <\/Canvas> <\/asset> <\/assets> It\u2019s easy enough to create reusable assets in Silverlight and load them on demand from XML, and refer to the\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"image","src":"https:\/\/i0.wp.com\/www.wiredprairie.us\/blog\/wp-content\/uploads\/2009\/01\/image8.png?resize=350%2C200","width":350,"height":200},"classes":[]},{"id":1597,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/1597","url_meta":{"origin":1730,"position":5},"title":"Paging Data with SQL Server Compact","date":"April 1, 2012","format":false,"excerpt":"If you\u2019re using SQL Server Compact Editition version 4 or higher, there\u2019s finally a decent and efficient way to do data paging: var streets = db.Query<StreetName>(@\"SELECT * FROM StreetNames ORDER BY Id OFFSET @offset ROWS FETCH NEXT @rows ROWS ONLY\", new { offset = group * GroupSize, rows = GroupSize\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"image","src":"https:\/\/i0.wp.com\/www.wiredprairie.us\/blog\/wp-content\/uploads\/2012\/04\/image9.png?resize=350%2C200","width":350,"height":200},"classes":[]}],"_links":{"self":[{"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/posts\/1730"}],"collection":[{"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/users\/2"}],"replies":[{"embeddable":true,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/comments?post=1730"}],"version-history":[{"count":1,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/posts\/1730\/revisions"}],"predecessor-version":[{"id":1731,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/posts\/1730\/revisions\/1731"}],"wp:attachment":[{"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/media?parent=1730"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/categories?post=1730"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/tags?post=1730"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}