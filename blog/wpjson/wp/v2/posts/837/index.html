{"id":837,"date":"2009-09-25T20:59:46","date_gmt":"2009-09-26T01:59:46","guid":{"rendered":"http:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/837"},"modified":"2009-09-25T20:59:46","modified_gmt":"2009-09-26T01:59:46","slug":"transparent-window-sample-in-wpf","status":"publish","type":"post","link":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/837","title":{"rendered":"Transparent Window Sample in WPF"},"content":{"rendered":"<p>For some reason, I wanted to experiment with a transparent window in WPF earlier, along with a custom opacitymask. (I think someone on twitter said something that made me want to throw together something, but by the time I was done, I had forgotten what!).<\/p>\n<p>So, here\u2019s what I created:<\/p>\n<p><img loading=\"lazy\" style=\"border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px\" title=\"image\" border=\"0\" alt=\"image\" src=\"http:\/\/www.wiredprairie.us\/blog\/wp-content\/uploads\/2009\/09\/image.png\" width=\"329\" height=\"316\" \/><\/p>\n<pre class=\"code\"><span style=\"color: blue\">&lt;<\/span><span style=\"color: #a31515\">Window <\/span><span style=\"color: red\">x<\/span><span style=\"color: blue\">:<\/span><span style=\"color: red\">Class<\/span><span style=\"color: blue\">=&quot;TransparentExample.Window1&quot;\n    <\/span><span style=\"color: red\">xmlns<\/span><span style=\"color: blue\">=&quot;http:\/\/schemas.microsoft.com\/winfx\/2006\/xaml\/presentation&quot;\n    <\/span><span style=\"color: red\">xmlns<\/span><span style=\"color: blue\">:<\/span><span style=\"color: red\">x<\/span><span style=\"color: blue\">=&quot;http:\/\/schemas.microsoft.com\/winfx\/2006\/xaml&quot;\n    <\/span><span style=\"color: red\">WindowStyle<\/span><span style=\"color: blue\">=&quot;None&quot;\n    <\/span><span style=\"color: red\">Title<\/span><span style=\"color: blue\">=&quot;Window1&quot; <\/span><span style=\"color: red\">Height<\/span><span style=\"color: blue\">=&quot;450&quot; <\/span><span style=\"color: red\">Width<\/span><span style=\"color: blue\">=&quot;450&quot; <\/span><span style=\"color: red\">AllowsTransparency<\/span><span style=\"color: blue\">=&quot;True&quot; <\/span><span style=\"color: red\">Background<\/span><span style=\"color: blue\">=&quot;Transparent&quot; &gt;\n    &lt;<\/span><span style=\"color: #a31515\">Grid <\/span><span style=\"color: red\">Background<\/span><span style=\"color: blue\">=&quot;Transparent&quot;  &gt;\n        &lt;<\/span><span style=\"color: #a31515\">Ellipse <\/span><span style=\"color: red\">Fill<\/span><span style=\"color: blue\">=&quot;Black&quot; <\/span><span style=\"color: red\">x<\/span><span style=\"color: blue\">:<\/span><span style=\"color: red\">Name<\/span><span style=\"color: blue\">=&quot;ellipse&quot; <\/span><span style=\"color: red\">MouseDown<\/span><span style=\"color: blue\">=&quot;Ellipse_MouseDown&quot; <\/span><span style=\"color: red\">Stroke<\/span><span style=\"color: blue\">=&quot;Black&quot; <\/span><span style=\"color: red\">StrokeThickness<\/span><span style=\"color: blue\">=&quot;8&quot; &gt;\n            &lt;<\/span><span style=\"color: #a31515\">Ellipse.OpacityMask<\/span><span style=\"color: blue\">&gt;\n                &lt;<\/span><span style=\"color: #a31515\">RadialGradientBrush <\/span><span style=\"color: red\">x<\/span><span style=\"color: blue\">:<\/span><span style=\"color: red\">Name<\/span><span style=\"color: blue\">=&quot;opacBrush&quot;&gt;\n                        &lt;<\/span><span style=\"color: #a31515\">GradientStop <\/span><span style=\"color: red\">Offset<\/span><span style=\"color: blue\">=&quot;.2&quot; <\/span><span style=\"color: red\">Color<\/span><span style=\"color: blue\">=&quot;#01000000&quot;&gt;&lt;\/<\/span><span style=\"color: #a31515\">GradientStop<\/span><span style=\"color: blue\">&gt;\n                        &lt;<\/span><span style=\"color: #a31515\">GradientStop <\/span><span style=\"color: red\">Offset<\/span><span style=\"color: blue\">=&quot;1&quot; <\/span><span style=\"color: red\">Color<\/span><span style=\"color: blue\">=&quot;#ff000000&quot;&gt;&lt;\/<\/span><span style=\"color: #a31515\">GradientStop<\/span><span style=\"color: blue\">&gt;\n                &lt;\/<\/span><span style=\"color: #a31515\">RadialGradientBrush<\/span><span style=\"color: blue\">&gt;\n            &lt;\/<\/span><span style=\"color: #a31515\">Ellipse.OpacityMask<\/span><span style=\"color: blue\">&gt;    \n            &lt;<\/span><span style=\"color: #a31515\">Ellipse.BitmapEffect<\/span><span style=\"color: blue\">&gt;\n                &lt;<\/span><span style=\"color: #a31515\">BlurBitmapEffect <\/span><span style=\"color: blue\">&gt;&lt;\/<\/span><span style=\"color: #a31515\">BlurBitmapEffect<\/span><span style=\"color: blue\">&gt;\n            &lt;\/<\/span><span style=\"color: #a31515\">Ellipse.BitmapEffect<\/span><span style=\"color: blue\">&gt;\n        &lt;\/<\/span><span style=\"color: #a31515\">Ellipse<\/span><span style=\"color: blue\">&gt;        \n    &lt;\/<\/span><span style=\"color: #a31515\">Grid<\/span><span style=\"color: blue\">&gt;\n&lt;\/<\/span><span style=\"color: #a31515\">Window<\/span><span style=\"color: blue\">&gt;<\/span><\/pre>\n<p><a href=\"http:\/\/11011.net\/software\/vspaste\"><\/a><\/p>\n<p>Nothing too shocking there. The ellipse has an opacity mask set to a radial gradient brush. Then, in the mouse down event, I\u2019ve adjusted the origin of the gradient to the the point where the mouse was pressed (and then allow the window to be dragged).<\/p>\n<pre class=\"code\"><span style=\"color: blue\">private void <\/span>Ellipse_MouseDown(<span style=\"color: blue\">object <\/span>sender, <span style=\"color: #2b91af\">MouseButtonEventArgs <\/span>e)\n{\n    <span style=\"color: blue\">if <\/span>(e.LeftButton == <span style=\"color: #2b91af\">MouseButtonState<\/span>.Pressed)\n    {\n        <span style=\"color: #2b91af\">Point <\/span>pnt = e.GetPosition(<span style=\"color: blue\">null<\/span>);\n        pnt.X = pnt.X \/ ellipse.ActualWidth ;\n        pnt.Y = pnt.Y \/ ellipse.ActualHeight;\n        opacBrush.GradientOrigin = pnt;\n\n        <span style=\"color: blue\">this<\/span>.DragMove();\n    }\n}<\/pre>\n<p><a href=\"http:\/\/11011.net\/software\/vspaste\"><\/a><\/p>\n<p>One thing that stumped me was DragMove. I had put it at the top of the function initially, and couldn\u2019t understand why calls to GetPosition were <strong>always<\/strong> returning a 0,0. Finally, it dawned on me that DragMove must be causing it. As soon as it was moved to the last function, everything worked.<\/p>\n<p>The sample code closes the window when the escape key is pressed.<\/p>\n<p>&#160;<\/p>\n<p><a href=\"http:\/\/www.wiredprairie.us\/Downloads\/TransparentExample.zip\" target=\"_blank\">Download it<\/a>.<\/p>\n","protected":false},"excerpt":{"rendered":"<p>For some reason, I wanted to experiment with a transparent window in WPF earlier, along with a custom opacitymask. (I think someone on twitter said something that made me want to throw together something, but by the time I was done, I had forgotten what!). So, here\u2019s what I created: &lt;Window x:Class=&quot;TransparentExample.Window1&quot; xmlns=&quot;http:\/\/schemas.microsoft.com\/winfx\/2006\/xaml\/presentation&quot; xmlns:x=&quot;http:\/\/schemas.microsoft.com\/winfx\/2006\/xaml&quot; WindowStyle=&quot;None&quot; [&hellip;]<\/p>\n","protected":false},"author":2,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"spay_email":"","jetpack_publicize_message":"","jetpack_is_tweetstorm":false,"jetpack_publicize_feature_enabled":true},"categories":[4],"tags":[],"jetpack_publicize_connections":[],"jetpack_featured_media_url":"","jetpack_sharing_enabled":true,"jetpack_shortlink":"https:\/\/wp.me\/pd5QIe-dv","jetpack_likes_enabled":true,"jetpack-related-posts":[{"id":1701,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/1701","url_meta":{"origin":837,"position":0},"title":"Windows 8 WinRT\/Metro Missing UpdateSourceTrigger","date":"August 5, 2012","format":false,"excerpt":"If you\u2019ve done WPF or Silverlight programming, you may have found an occasion where using the Binding property UpdateSourceTrigger set to PropertyChanged was extremely useful. (I know I have!) It may have looked something like this: <TextBox Text=\"{Binding Path=Value, UpdateSourceTrigger=PropertyChanged}\" \/> The key feature was the live updating of the\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"","width":0,"height":0},"classes":[]},{"id":1705,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/1705","url_meta":{"origin":837,"position":1},"title":"WinRT\/Xaml\/AKA Metro DataTemplate selection based on Data Types","date":"August 20, 2012","format":false,"excerpt":"You may have noticed that WinRT does not have automatic resolution of a DataTemplate based on the data type of object added to an ItemsControl. While unfortunate as this behavior is quite handy, it\u2019s not too difficult to replicate the functionality using a DataTemplateSelector. WPF for example, could do something\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"","width":0,"height":0},"classes":[]},{"id":633,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/633","url_meta":{"origin":837,"position":2},"title":"A Silverlight 2 TilePanel","date":"December 14, 2008","format":false,"excerpt":"You may notice that the Silverlight TileBrush is missing some key properties which would enable it to actually tile a brush. The WPF TileBrush has properties such as TileMode, Viewbox, and ViewportUnits that can be used to tile an image as a fill or as a background for a UIElement.\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"https:\/\/i0.wp.com\/www.wiredprairie.us\/blog\/wp-content\/uploads\/2008\/12\/image1.png?resize=350%2C200","width":350,"height":200},"classes":[]},{"id":543,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/543","url_meta":{"origin":837,"position":3},"title":"Where do you &quot;event&quot;?","date":"September 4, 2008","format":false,"excerpt":"From JohnPapa.net, \"Siliverlight 2-Tip - Declaring Events.\" He thinks that the place to wire up an event is always in code rather than in markup (like XAML). \"What\u2019s my opinion? I firmly believe the handlers belong in the code and not in the XAML.\" I'd suggest that's not always right\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"","width":0,"height":0},"classes":[]},{"id":902,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/902","url_meta":{"origin":837,"position":4},"title":"Visual Studio 2010 Remote Desktop Performance Tips","date":"March 4, 2010","format":false,"excerpt":"I was disappointed, but certainly not surprised, to see that Microsoft employees blogging that Visual Studio 2010 performance over remote desktop would almost match, or be slightly slower than Visual Studio 2008 performance. However, they got some good advice on how to optimize your RDP experience with Visual Studio. http:\/\/blogs.msdn.com\/jgoldb\/archive\/2010\/02\/27\/optimizing-visual-studio-2010-and-wpf-applications-for-remote-desktop.aspx\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"image","src":"https:\/\/i0.wp.com\/www.wiredprairie.us\/blog\/wp-content\/uploads\/2010\/03\/image.png?resize=350%2C200","width":350,"height":200},"classes":[]},{"id":668,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/668","url_meta":{"origin":837,"position":5},"title":"Silverlight Stars\/Sparkles","date":"January 18, 2009","format":false,"excerpt":"I was in a \u201cstar\u201d mood this afternoon and created this Silverlight 2.0 demonstration. For rendering it uses the CompositionTarget.Rendering method (the easiest way to control dynamic animations such as this). It also uses the VisualStateManager in a variety of places to control the user interface. I\u2019ve become a big\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"https:\/\/i0.wp.com\/www.wiredprairie.us\/blog\/wp-content\/uploads\/2009\/01\/image7.png?resize=350%2C200","width":350,"height":200},"classes":[]}],"_links":{"self":[{"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/posts\/837"}],"collection":[{"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/users\/2"}],"replies":[{"embeddable":true,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/comments?post=837"}],"version-history":[{"count":1,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/posts\/837\/revisions"}],"predecessor-version":[{"id":879,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/posts\/837\/revisions\/879"}],"wp:attachment":[{"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/media?parent=837"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/categories?post=837"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/tags?post=837"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}