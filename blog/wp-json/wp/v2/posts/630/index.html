{"id":630,"date":"2008-12-08T22:00:01","date_gmt":"2008-12-09T03:00:01","guid":{"rendered":"http:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/630"},"modified":"2008-12-09T20:50:00","modified_gmt":"2008-12-10T01:50:00","slug":"drumming-on-silverlight","status":"publish","type":"post","link":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/630","title":{"rendered":"Drumming on Silverlight"},"content":{"rendered":"<p>A few weeks ago someone posted on their blog a simple drum kit written in Silverlight (<strong>Update: <\/strong>I found the original drum inspiration post <a href=\"http:\/\/kenwatts.blogspot.com\/2008\/11\/silverlight-drum-pad.html\">here<\/a><em>)<\/em>. I thought I\u2019d give it a go as well tonight. Here\u2019s the result:<\/p>\n<p><a href=\"http:\/\/www.wiredprairie.us\/examples\/silverlight\/DrumPad\/default.html\" target=\"_blank\"><img loading=\"lazy\" title=\"image\" style=\"border-top-width: 0px; display: inline; border-left-width: 0px; border-bottom-width: 0px; border-right-width: 0px\" height=\"156\" alt=\"image\" src=\"http:\/\/www.wiredprairie.us\/blog\/wp-content\/uploads\/2008\/12\/image.png\" width=\"198\" border=\"0\" \/><\/a><\/p>\n<p>(<a href=\"http:\/\/www.wiredprairie.us\/examples\/silverlight\/DrumPad\/default.html\" target=\"_blank\">click to launch<\/a>)<\/p>\n<p>&#160;<\/p>\n<p>I used a few of the same tricks I\u2019ve used <a href=\"http:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/579\">before<\/a>.<\/p>\n<p>&#160;<\/p>\n<pre class=\"code\"><span style=\"color: blue\">private void <\/span>PlayAudio(<span style=\"color: blue\">string <\/span>fileName, <span style=\"color: blue\">double <\/span>volume)\n{\n    <span style=\"color: #2b91af\">MediaElement <\/span>me = <span style=\"color: blue\">new <\/span><span style=\"color: #2b91af\">MediaElement<\/span>();\n    me.Source = <span style=\"color: blue\">new <\/span><span style=\"color: #2b91af\">Uri<\/span>(fileName, <span style=\"color: #2b91af\">UriKind<\/span>.Relative);\n    me.Volume = volume;\n    me.AutoPlay = <span style=\"color: blue\">true<\/span>;\n    me.CurrentStateChanged += <span style=\"color: blue\">new <\/span><span style=\"color: #2b91af\">RoutedEventHandler<\/span>(Audio_CurrentStateChanged);\n\n    LayoutRoot.Children.Add(me);\n}\n\n<span style=\"color: blue\">public void <\/span>Audio_CurrentStateChanged(<span style=\"color: blue\">object <\/span>sender, <span style=\"color: #2b91af\">RoutedEventArgs <\/span>e)\n{\n    <span style=\"color: blue\">if <\/span>(sender <span style=\"color: blue\">is <\/span><span style=\"color: #2b91af\">MediaElement<\/span>)\n    {\n        <span style=\"color: #2b91af\">MediaElement <\/span>me = sender <span style=\"color: blue\">as <\/span><span style=\"color: #2b91af\">MediaElement<\/span>;\n        <span style=\"color: blue\">if <\/span>(me.CurrentState == <span style=\"color: #2b91af\">MediaElementState<\/span>.Paused)\n        {\n            me.CurrentStateChanged -= <span style=\"color: blue\">new <\/span><span style=\"color: #2b91af\">RoutedEventHandler<\/span>(Audio_CurrentStateChanged);\n            LayoutRoot.Children.Remove(me);\n        }\n    }\n}<\/pre>\n<p><a href=\"http:\/\/11011.net\/software\/vspaste\"><\/a>The kit plays multiple audio files at one time by adding (and removing) the audio streams dynamically as needed.<\/p>\n<p>The ellipses are actually UserControls which use Dependency Properties to adjust to the needs of the specific drum.<\/p>\n<pre class=\"code\"><span style=\"color: blue\">private static void <\/span>StandardBackgroundChanged(<br \/><span style=\"color: #2b91af\">DependencyObject <\/span>d, <br \/><span style=\"color: #2b91af\">DependencyPropertyChangedEventArgs <\/span>e)\n{\n    <span style=\"color: #2b91af\">Pad <\/span>p = d <span style=\"color: blue\">as <\/span><span style=\"color: #2b91af\">Pad<\/span>;\n    <span style=\"color: #2b91af\">Ellipse <\/span>playEllipse = p.FindName(<span style=\"color: #a31515\">&quot;playEllipse&quot;<\/span>) <span style=\"color: blue\">as <\/span><span style=\"color: #2b91af\">Ellipse<\/span>;\n    <span style=\"color: blue\">if <\/span>(e.NewValue == <span style=\"color: blue\">null<\/span>)\n    {\n        playEllipse.Fill = p.Resources[<span style=\"color: #a31515\">&quot;StandardBackgroundBrush&quot;<\/span>] <br \/><span style=\"color: blue\">as <\/span><span style=\"color: #2b91af\">Brush<\/span>;\n    }\n    <span style=\"color: blue\">else\n    <\/span>{\n        playEllipse.Fill = e.NewValue <span style=\"color: blue\">as <\/span><span style=\"color: #2b91af\">Brush<\/span>;\n    }\n}<\/pre>\n<p><a href=\"http:\/\/11011.net\/software\/vspaste\"><\/a><\/p>\n<p>Even the audio file is a DependencyProperty:<\/p>\n<pre class=\"code\"><span style=\"color: blue\">public static readonly <\/span><span style=\"color: #2b91af\">DependencyProperty <\/span>AudioFileNameProperty =\n    <span style=\"color: #2b91af\">DependencyProperty<\/span>.Register(<span style=\"color: #a31515\">&quot;AudioFileName&quot;<\/span>, <span style=\"color: blue\">typeof<\/span>(<span style=\"color: blue\">string<\/span>),\n    <span style=\"color: blue\">typeof<\/span>(<span style=\"color: #2b91af\">Pad<\/span>), <span style=\"color: blue\">new <\/span><span style=\"color: #2b91af\">PropertyMetadata<\/span>(<span style=\"color: #a31515\">&quot;&quot;<\/span>));<\/pre>\n<p><a href=\"http:\/\/11011.net\/software\/vspaste\"><\/a><\/p>\n<p>The master UserControl uses eight instances of the \u201cPad\u201d control like this:<\/p>\n<pre class=\"code\"><span style=\"color: blue\">&lt;<\/span><span style=\"color: #a31515\">DrumPad<\/span><span style=\"color: blue\">:<\/span><span style=\"color: #a31515\">Pad \n    <\/span><span style=\"color: red\">Grid.Column<\/span><span style=\"color: blue\">=&quot;1&quot; \n    <\/span><span style=\"color: red\">Grid.Row<\/span><span style=\"color: blue\">=&quot;1&quot; \n    <\/span><span style=\"color: red\">Margin<\/span><span style=\"color: blue\">=&quot;47,0,-47,0&quot; \n    <\/span><span style=\"color: red\">AudioFileName<\/span><span style=\"color: blue\">=&quot;\/SoundEffects\/Cymbal1.mp3&quot; \n    <\/span><span style=\"color: red\">ActivateKey<\/span><span style=\"color: blue\">=&quot;W&quot; \n    <\/span><span style=\"color: red\">StandardBackground<\/span><span style=\"color: blue\">=&quot;{<\/span><span style=\"color: #a31515\">StaticResource <\/span><span style=\"color: red\">CymbalBrush<\/span><span style=\"color: blue\">}&quot; \n    <\/span><span style=\"color: red\">IsCymbal<\/span><span style=\"color: blue\">=&quot;True&quot;\/&gt;<\/span><\/pre>\n<p><a href=\"http:\/\/11011.net\/software\/vspaste\"><\/a><\/p>\n<p>&#160;<\/p>\n<p>The source is <a href=\"http:\/\/www.wiredprairie.us\/examples\/silverlight\/DrumPad\/DrumPad.zip\">here<\/a> if you\u2019re interested. If you do something cool with this \u2026 send me a link!<\/p>\n","protected":false},"excerpt":{"rendered":"<p>A few weeks ago someone posted on their blog a simple drum kit written in Silverlight (Update: I found the original drum inspiration post here). I thought I\u2019d give it a go as well tonight. Here\u2019s the result: (click to launch) &#160; I used a few of the same tricks I\u2019ve used before. &#160; private [&hellip;]<\/p>\n","protected":false},"author":2,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"spay_email":"","jetpack_publicize_message":"","jetpack_is_tweetstorm":false,"jetpack_publicize_feature_enabled":true},"categories":[4],"tags":[],"jetpack_publicize_connections":[],"jetpack_featured_media_url":"","jetpack_sharing_enabled":true,"jetpack_shortlink":"https:\/\/wp.me\/pd5QIe-aa","jetpack_likes_enabled":true,"jetpack-related-posts":[{"id":577,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/577","url_meta":{"origin":630,"position":0},"title":"Silverlight Game Programming: Playing an Audio File","date":"October 12, 2008","format":false,"excerpt":"In my recent Silverlight game, there are a variety of sound effects that occur from bullet fires to explosions. Most of the audio files are brief, lasting only for a second or less on average. I had a few options -- put a MediaElement directly on the UI (in XAML)\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"https:\/\/i0.wp.com\/www.wiredprairie.us\/blog\/wp-content\/uploads\/2008\/10\/image2.png?resize=350%2C200","width":350,"height":200},"classes":[]},{"id":568,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/568","url_meta":{"origin":630,"position":1},"title":"Data Binding and Tooltips in Silverlight","date":"September 19, 2008","format":false,"excerpt":"Have you ever wanted to databind a tooltip in Silverlight (or WPF for that matter), and found that the DataContext isn't available for tooltips (the datacontext is null)? It's very annoying. Tooltips, unfortunately, aren't connected to their parents in anyway when they're created, so they loose the ability to connect\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"","width":0,"height":0},"classes":[]},{"id":388,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/388","url_meta":{"origin":630,"position":2},"title":"Silverlight Weather Demonstration","date":"June 26, 2008","format":false,"excerpt":"Demonstration available here. (You'll need to wait for a moment while it loads the first time). I've created a reasonably simple, yet multi-technology (and discipline) demonstration using Silverlight for the user interface and ASP.NET as the back-end. The demonstration uses: Silverlight 2.0 Data binding Delayed downloading of images \"Web services\"\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"https:\/\/i0.wp.com\/www.wiredprairie.us\/blog\/wp-content\/uploads\/2008\/06\/image21.png?resize=350%2C200","width":350,"height":200},"classes":[]},{"id":633,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/633","url_meta":{"origin":630,"position":3},"title":"A Silverlight 2 TilePanel","date":"December 14, 2008","format":false,"excerpt":"You may notice that the Silverlight TileBrush is missing some key properties which would enable it to actually tile a brush. The WPF TileBrush has properties such as TileMode, Viewbox, and ViewportUnits that can be used to tile an image as a fill or as a background for a UIElement.\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"https:\/\/i0.wp.com\/www.wiredprairie.us\/blog\/wp-content\/uploads\/2008\/12\/image1.png?resize=350%2C200","width":350,"height":200},"classes":[]},{"id":723,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/723","url_meta":{"origin":630,"position":4},"title":"Silverlight Stopwatch class in C#","date":"March 1, 2009","format":false,"excerpt":"I needed a simple method for doing some timings in Silverlight. Silverlight lacks the high performance query counter that is available natively in Windows (and available in .NET 3.5 for example), but it does have a TickCount. My code (mostly) mirrors the existing .NET Stopwatch class using the TickCount property\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"","width":0,"height":0},"classes":[]},{"id":1084,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/1084","url_meta":{"origin":630,"position":5},"title":"Silverlight Analog\/Retro Flip Numbers","date":"June 9, 2010","format":false,"excerpt":"I\u2019m not sure what to call these exactly. I\u2019ve created a relatively simple Silverlight 4 control that emulates the old mechanical flip style numbers (or letters) displays found at airports and in old clock-radios. I call it the RetroFlipper. It\u2019s easy to use (at least for my needs). Declare an\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"image","src":"https:\/\/i0.wp.com\/www.wiredprairie.us\/blog\/wp-content\/uploads\/2010\/06\/image.png?resize=350%2C200","width":350,"height":200},"classes":[]}],"_links":{"self":[{"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/posts\/630"}],"collection":[{"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/users\/2"}],"replies":[{"embeddable":true,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/comments?post=630"}],"version-history":[{"count":0,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/posts\/630\/revisions"}],"wp:attachment":[{"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/media?parent=630"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/categories?post=630"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/tags?post=630"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}