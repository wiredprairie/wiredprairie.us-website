{"id":925,"date":"2010-03-15T17:36:22","date_gmt":"2010-03-15T22:36:22","guid":{"rendered":"http:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/925"},"modified":"2010-03-15T17:36:22","modified_gmt":"2010-03-15T22:36:22","slug":"my-first-windows-phone-7-experiment","status":"publish","type":"post","link":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/925","title":{"rendered":"My first Windows Phone 7 Experiment"},"content":{"rendered":"<p>OK, It doesn\u2019t look like much. It\u2019s not. I was experimenting with some CompositionTarget Rendering and WriteableBitmap stuff on the plane ride out to Mix 2010 on Sunday and created a little animating blue line thing. (I don\u2019t know what to to call it). But it was a work in progress. <\/p>\n<p>I took the code and copied it into a Windows Phone 7 Silverlight application and hit run. It worked right out of the box. (Using the CTP download from <a href=\"http:\/\/www.microsoft.com\/downloads\/details.aspx?FamilyID=2338b5d1-79d8-46af-b828-380b0f854203&amp;displaylang=en#filelist\">here<\/a>).<\/p>\n<p><img loading=\"lazy\" style=\"border-bottom: 0px; border-left: 0px; display: inline; border-top: 0px; border-right: 0px\" title=\"image\" border=\"0\" alt=\"image\" src=\"http:\/\/www.wiredprairie.us\/blog\/wp-content\/uploads\/2010\/03\/image5.png\" width=\"300\" height=\"584\" \/><\/p>\n<pre class=\"code\"><span style=\"color: #2b91af\">CompositionTarget<\/span>.Rendering += <span style=\"color: blue\">new <\/span><span style=\"color: #2b91af\">EventHandler<\/span>(CompositionTarget_Rendering);<\/pre>\n<p>The event:<\/p>\n<pre class=\"code\"><span style=\"color: blue\">void <\/span>CompositionTarget_Rendering(<span style=\"color: blue\">object <\/span>sender, <span style=\"color: #2b91af\">EventArgs <\/span>e)\n{\n    <span style=\"color: blue\">int <\/span>indx = _shapes.Count - 1;\n    <span style=\"color: blue\">double <\/span>littleCircleHeight = littleCircle.ActualHeight;\n\n    <span style=\"color: blue\">while <\/span>(indx &gt;= 0)\n    {\n        <span style=\"color: #2b91af\">Sparkle <\/span>sparkle = _shapes[indx];\n        sparkle.Y += sparkle.VY;\n        sparkle.X += sparkle.VX;\n        <span style=\"color: blue\">if <\/span>(sparkle.Y - (littleCircleHeight \/ 2) &gt; _rect.Height)\n        {\n            _shapes.RemoveAt(indx);\n        }\n        <span style=\"color: blue\">else\n        <\/span>{\n            <span style=\"color: green\">\/\/ grab the cached one\n            <\/span><span style=\"color: #2b91af\">TranslateTransform <\/span>t = sparkle.Transform <span style=\"color: blue\">as <\/span><span style=\"color: #2b91af\">TranslateTransform<\/span>;\n            t.X = sparkle.X - (littleCircle.ActualWidth \/ 2);\n            t.Y = sparkle.Y - (littleCircleHeight \/ 2);\n            _bitmap.Render(littleCircle, sparkle.Transform);\n        }\n        indx--;\n\n    }\n\n    <span style=\"color: blue\">int <\/span>x = _random.Next(_bitmap.PixelWidth);\n    <span style=\"color: blue\">int <\/span>y = 0; \n\n    <span style=\"color: #2b91af\">Sparkle <\/span>newsparkle = <span style=\"color: blue\">new <\/span><span style=\"color: #2b91af\">Sparkle<\/span>();\n    newsparkle.X = x;\n    newsparkle.Y = y;\n    newsparkle.VX = _random.NextDouble() + .001;\n    newsparkle.VX = (_random.Next(10) &gt; 5 ? newsparkle.VX : newsparkle.VX * -1.0);\n    newsparkle.VY = _random.NextDouble() * 5 + 1.0;\n    newsparkle.Transform = <span style=\"color: blue\">new <\/span><span style=\"color: #2b91af\">TranslateTransform<\/span>() { Y = newsparkle.Y, X = newsparkle.X };\n\n    _shapes.Add(newsparkle);\n    _bitmap.Invalidate();\n}<\/pre>\n<p><a href=\"http:\/\/11011.net\/software\/vspaste\"><\/a><\/p>\n<p>Sizing:<\/p>\n<pre class=\"code\"><span style=\"color: blue\">void <\/span>MainPage_SizeChanged(<span style=\"color: blue\">object <\/span>sender, <span style=\"color: #2b91af\">SizeChangedEventArgs <\/span>e)\n{\n    _bitmap = <span style=\"color: blue\">new <\/span><span style=\"color: #2b91af\">WriteableBitmap<\/span>((<span style=\"color: blue\">int<\/span>)e.NewSize.Width, (<span style=\"color: blue\">int<\/span>)e.NewSize.Height);\n    _bitmap.Clear(<span style=\"color: #2b91af\">Colors<\/span>.Black);\n    _rect = <span style=\"color: blue\">new <\/span><span style=\"color: #2b91af\">Rect<\/span>(0, 0, e.NewSize.Width, e.NewSize.Height);\n    dest.Source = _bitmap;\n}<\/pre>\n<p><a href=\"http:\/\/11011.net\/software\/vspaste\"><\/a><\/p>\n<p>The sparkle class:<\/p>\n<pre class=\"code\"><span style=\"color: blue\">public class <\/span><span style=\"color: #2b91af\">Sparkle\n<\/span>{\n    <span style=\"color: blue\">public double <\/span>X { <span style=\"color: blue\">get<\/span>; <span style=\"color: blue\">set<\/span>; }\n    <span style=\"color: blue\">public double <\/span>Y { <span style=\"color: blue\">get<\/span>; <span style=\"color: blue\">set<\/span>; }\n\n    <span style=\"color: blue\">public double <\/span>VX { <span style=\"color: blue\">get<\/span>; <span style=\"color: blue\">set<\/span>; }\n    <span style=\"color: blue\">public double <\/span>VY { <span style=\"color: blue\">get<\/span>; <span style=\"color: blue\">set<\/span>; }\n\n    <span style=\"color: blue\">public <\/span><span style=\"color: #2b91af\">Transform <\/span>Transform { <span style=\"color: blue\">get<\/span>; <span style=\"color: blue\">set<\/span>; }\n}<\/pre>\n<p><a href=\"http:\/\/11011.net\/software\/vspaste\"><\/a>And it also uses a few functions from the <a href=\"http:\/\/writeablebitmapex.codeplex.com\/\">WriteableBitmap<\/a> extension classes on CodePlex.<\/p>\n<p>It doesn\u2019t perform nearly as well as it does in stand-alone Silverlight \u2013 but it\u2019s running in a VM on my laptop, without accelerated graphics \u2026.. I blame my hardware. <\/p>\n","protected":false},"excerpt":{"rendered":"<p>OK, It doesn\u2019t look like much. It\u2019s not. I was experimenting with some CompositionTarget Rendering and WriteableBitmap stuff on the plane ride out to Mix 2010 on Sunday and created a little animating blue line thing. (I don\u2019t know what to to call it). But it was a work in progress. I took the code [&hellip;]<\/p>\n","protected":false},"author":2,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"spay_email":"","jetpack_publicize_message":"","jetpack_is_tweetstorm":false,"jetpack_publicize_feature_enabled":true},"categories":[4,23,14],"tags":[],"jetpack_publicize_connections":[],"jetpack_featured_media_url":"","jetpack_sharing_enabled":true,"jetpack_shortlink":"https:\/\/wp.me\/pd5QIe-eV","jetpack_likes_enabled":true,"jetpack-related-posts":[{"id":835,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/835","url_meta":{"origin":925,"position":0},"title":"Windows 7 Mobile to support Silverlight 3.0","date":"September 24, 2009","format":false,"excerpt":"Cool news for Windows Mobile 7 \u2013 it will support Silverlight 3.0 out of the box (although I hope it\u2019s updated to reflect whatever version is current at the time WinMo7 finally ships). That still gives phone vendors an opportunity to support Flash before these phones ship though.I\u2019m open to\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"","width":0,"height":0},"classes":[]},{"id":1016,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/1016","url_meta":{"origin":925,"position":1},"title":"Silverlight vs. Flash vs. Photoshop Text Rendering","date":"March 24, 2010","format":false,"excerpt":"Curious about text rendering characteristics between Flash 10, Silverlight 4.0 and Photoshop, I created two small applications, one in Flash CS 4, and one in Visual Studio 2010. The Silverlight 4.0 tests are using the release candidate which was current as of March 23, 2010. I used Times New Roman\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"image","src":"https:\/\/i0.wp.com\/www.wiredprairie.us\/blog\/wp-content\/uploads\/2010\/03\/image_thumb.png?resize=350%2C200","width":350,"height":200},"classes":[]},{"id":723,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/723","url_meta":{"origin":925,"position":2},"title":"Silverlight Stopwatch class in C#","date":"March 1, 2009","format":false,"excerpt":"I needed a simple method for doing some timings in Silverlight. Silverlight lacks the high performance query counter that is available natively in Windows (and available in .NET 3.5 for example), but it does have a TickCount. My code (mostly) mirrors the existing .NET Stopwatch class using the TickCount property\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"","width":0,"height":0},"classes":[]},{"id":668,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/668","url_meta":{"origin":925,"position":3},"title":"Silverlight Stars\/Sparkles","date":"January 18, 2009","format":false,"excerpt":"I was in a \u201cstar\u201d mood this afternoon and created this Silverlight 2.0 demonstration. For rendering it uses the CompositionTarget.Rendering method (the easiest way to control dynamic animations such as this). It also uses the VisualStateManager in a variety of places to control the user interface. I\u2019ve become a big\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"https:\/\/i0.wp.com\/www.wiredprairie.us\/blog\/wp-content\/uploads\/2009\/01\/image7.png?resize=350%2C200","width":350,"height":200},"classes":[]},{"id":1119,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/1119","url_meta":{"origin":925,"position":4},"title":"Windows Phone 7 Marketplace: Ditch the Annual Fee for Free App Developers!","date":"August 23, 2010","format":false,"excerpt":"Dear Microsoft, A few facts: I\u2019m a competent Silverlight developer. I\u2019ve even dabbled in XNA. I\u2019m an owner of a iPhone 3GS. I would like a new phone. I\u2019d like to buy a phone powered by the Windows Phone 7 OS when it\u2019s made available. I\u2019d like to make some\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"","width":0,"height":0},"classes":[]},{"id":1162,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/1162","url_meta":{"origin":925,"position":5},"title":"Silverlight to become Microsoft&rsquo;s next VB6?","date":"November 1, 2010","format":false,"excerpt":"There was a huge uproar in the tech blogs this past week regarding some comments made by Bob Muglia (of Microsoft) as reported by Mary Joe Foley in a post entitled, \u201cMicrosoft: Our Strategy with Silverlight has shifted.\u201d The quotes that caused the most ruckus are: \u201cSilverlight is our development\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"","width":0,"height":0},"classes":[]}],"_links":{"self":[{"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/posts\/925"}],"collection":[{"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/users\/2"}],"replies":[{"embeddable":true,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/comments?post=925"}],"version-history":[{"count":0,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/posts\/925\/revisions"}],"wp:attachment":[{"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/media?parent=925"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/categories?post=925"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/tags?post=925"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}