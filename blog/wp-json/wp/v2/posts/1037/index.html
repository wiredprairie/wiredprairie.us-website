{"id":1037,"date":"2010-04-24T11:46:00","date_gmt":"2010-04-24T16:46:00","guid":{"rendered":"http:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/1037"},"modified":"2010-04-24T11:46:00","modified_gmt":"2010-04-24T16:46:00","slug":"silverlight-childwindows-and-visualstates","status":"publish","type":"post","link":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/1037","title":{"rendered":"Silverlight ChildWindows and VisualStates"},"content":{"rendered":"<p>Unfortunately, as of the latest version of Silverlight 4 and Blend 4, there\u2019s a feature supportability mismatch. Blend 4\u2019s designer may lead to you to believe and expect that <a href=\"http:\/\/msdn.microsoft.com\/en-us\/library\/system.windows.visualstate(v=VS.95).aspx\">VisualStates<\/a> will work within a Silverlight 4 application. (It led me down that path).<\/p>\n<p>In fact, <a href=\"http:\/\/msdn.microsoft.com\/en-us\/library\/system.windows.visualstate(v=VS.95).aspx\">VisualStates<\/a> do not work directly inside of a <a href=\"http:\/\/msdn.microsoft.com\/en-us\/library\/system.windows.controls.childwindow(VS.95).aspx\">ChildWindow<\/a>. VisualStates are only applicable on the root element of a <a href=\"http:\/\/msdn.microsoft.com\/en-us\/library\/system.windows.controls.controltemplate(VS.95).aspx\">ControlTemplate<\/a> or <a href=\"http:\/\/msdn.microsoft.com\/en-us\/library\/system.windows.controls.usercontrol(VS.95).aspx\">UserControl<\/a> (as described <a href=\"http:\/\/msdn.microsoft.com\/en-us\/library\/system.windows.visualstatemanager(VS.95).aspx\">here<\/a>). I just spent the last 20 minutes learning about this limitation the hard way \u2013 by trying it, over and over. :)&#160; It\u2019s not a bug, it just isn\u2019t supported. <\/p>\n<p>If you want to use VisualStates within a ChildWindow, the simplest workaround for this problem is to wrap the content of the child window into a new UserControl and place that UserControl in the ChildWindow (as a child). You\u2019ll need to do a little more work to expose the functionality of the UserControl to the containing ChildWindow (like OK\/Cancel button handling for example), but it\u2019s simple work. I added an event which indicates the child window should be closed:<\/p>\n<pre class=\"code\"><span style=\"color: blue\">public event <\/span><span style=\"color: #2b91af\">EventHandler<\/span>&lt;<span style=\"color: #2b91af\">CloseDialogEventArgs<\/span>&gt; CloseDialog;<\/pre>\n<pre class=\"code\"><span style=\"color: blue\">public class <\/span><span style=\"color: #2b91af\">CloseDialogEventArgs <\/span>: <span style=\"color: #2b91af\">EventArgs\n<\/span>{\n    <span style=\"color: blue\">public bool<\/span>? DialogResult { <span style=\"color: blue\">get<\/span>; <span style=\"color: blue\">set<\/span>; }\n\n    <span style=\"color: blue\">private <\/span>CloseDialogEventArgs()\n    {\n\n    }\n    <span style=\"color: blue\">public <\/span>CloseDialogEventArgs(<span style=\"color: blue\">bool<\/span>? dialogResult)\n    {\n        DialogResult = dialogResult;\n    }\n\n    <span style=\"color: blue\">public static new <\/span><span style=\"color: #2b91af\">CloseDialogEventArgs <\/span>Empty = <span style=\"color: blue\">new <\/span><span style=\"color: #2b91af\">CloseDialogEventArgs<\/span>();\n}<\/pre>\n<p>Then, it can be closed:<\/p>\n<pre class=\"code\"><span style=\"color: blue\">private void <\/span>CancelButton_Click(<span style=\"color: blue\">object <\/span>sender, <span style=\"color: #2b91af\">RoutedEventArgs <\/span>e)\n{\n    <span style=\"color: blue\">if <\/span>(CloseDialog != <span style=\"color: blue\">null<\/span>)\n    {\n        CloseDialog(<span style=\"color: blue\">this<\/span>, <span style=\"color: blue\">new <\/span><span style=\"color: #2b91af\">CloseDialogEventArgs<\/span>(<span style=\"color: blue\">false<\/span>));\n    }\n}<\/pre>\n<p><a href=\"http:\/\/11011.net\/software\/vspaste\"><\/a><\/p>\n","protected":false},"excerpt":{"rendered":"<p>Unfortunately, as of the latest version of Silverlight 4 and Blend 4, there\u2019s a feature supportability mismatch. Blend 4\u2019s designer may lead to you to believe and expect that VisualStates will work within a Silverlight 4 application. (It led me down that path). In fact, VisualStates do not work directly inside of a ChildWindow. VisualStates [&hellip;]<\/p>\n","protected":false},"author":2,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"spay_email":"","jetpack_publicize_message":"","jetpack_is_tweetstorm":false,"jetpack_publicize_feature_enabled":true},"categories":[4],"tags":[25,153],"jetpack_publicize_connections":[],"jetpack_featured_media_url":"","jetpack_sharing_enabled":true,"jetpack_shortlink":"https:\/\/wp.me\/pd5QIe-gJ","jetpack_likes_enabled":true,"jetpack-related-posts":[{"id":388,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/388","url_meta":{"origin":1037,"position":0},"title":"Silverlight Weather Demonstration","date":"June 26, 2008","format":false,"excerpt":"Demonstration available here. (You'll need to wait for a moment while it loads the first time). I've created a reasonably simple, yet multi-technology (and discipline) demonstration using Silverlight for the user interface and ASP.NET as the back-end. The demonstration uses: Silverlight 2.0 Data binding Delayed downloading of images \"Web services\"\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"https:\/\/i0.wp.com\/www.wiredprairie.us\/blog\/wp-content\/uploads\/2008\/06\/image21.png?resize=350%2C200","width":350,"height":200},"classes":[]},{"id":568,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/568","url_meta":{"origin":1037,"position":1},"title":"Data Binding and Tooltips in Silverlight","date":"September 19, 2008","format":false,"excerpt":"Have you ever wanted to databind a tooltip in Silverlight (or WPF for that matter), and found that the DataContext isn't available for tooltips (the datacontext is null)? It's very annoying. Tooltips, unfortunately, aren't connected to their parents in anyway when they're created, so they loose the ability to connect\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"","width":0,"height":0},"classes":[]},{"id":1084,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/1084","url_meta":{"origin":1037,"position":2},"title":"Silverlight Analog\/Retro Flip Numbers","date":"June 9, 2010","format":false,"excerpt":"I\u2019m not sure what to call these exactly. I\u2019ve created a relatively simple Silverlight 4 control that emulates the old mechanical flip style numbers (or letters) displays found at airports and in old clock-radios. I call it the RetroFlipper. It\u2019s easy to use (at least for my needs). Declare an\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"image","src":"https:\/\/i0.wp.com\/www.wiredprairie.us\/blog\/wp-content\/uploads\/2010\/06\/image.png?resize=350%2C200","width":350,"height":200},"classes":[]},{"id":670,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/670","url_meta":{"origin":1037,"position":3},"title":"Silverlight: Dynamically creating XAML elements  at runtime","date":"January 19, 2009","format":false,"excerpt":"Given the following XML file: <assets> <asset name=\"tile\"> <Canvas xmlns=\"http:\/\/schemas.microsoft.com\/winfx\/2006\/xaml\/presentation\" xmlns:x=\"http:\/\/schemas.microsoft.com\/winfx\/2006\/xaml\"> <Path x:Name=\"top\" Width=\"24\" Height=\"12\" Stretch=\"Fill\" Fill=\"#FF065F02\" Stroke=\"#10000000\" Data=\"F1 M 0,6L 12,12L 24,6L 12,0L 0,6 Z \"\/> <\/Canvas> <\/asset> <\/assets> It\u2019s easy enough to create reusable assets in Silverlight and load them on demand from XML, and refer to the\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"image","src":"https:\/\/i0.wp.com\/www.wiredprairie.us\/blog\/wp-content\/uploads\/2009\/01\/image8.png?resize=350%2C200","width":350,"height":200},"classes":[]},{"id":633,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/633","url_meta":{"origin":1037,"position":4},"title":"A Silverlight 2 TilePanel","date":"December 14, 2008","format":false,"excerpt":"You may notice that the Silverlight TileBrush is missing some key properties which would enable it to actually tile a brush. The WPF TileBrush has properties such as TileMode, Viewbox, and ViewportUnits that can be used to tile an image as a fill or as a background for a UIElement.\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"","src":"https:\/\/i0.wp.com\/www.wiredprairie.us\/blog\/wp-content\/uploads\/2008\/12\/image1.png?resize=350%2C200","width":350,"height":200},"classes":[]},{"id":1016,"url":"https:\/\/www.wiredprairie.us\/blog\/index.php\/archives\/1016","url_meta":{"origin":1037,"position":5},"title":"Silverlight vs. Flash vs. Photoshop Text Rendering","date":"March 24, 2010","format":false,"excerpt":"Curious about text rendering characteristics between Flash 10, Silverlight 4.0 and Photoshop, I created two small applications, one in Flash CS 4, and one in Visual Studio 2010. The Silverlight 4.0 tests are using the release candidate which was current as of March 23, 2010. I used Times New Roman\u2026","rel":"","context":"In &quot;Coding&quot;","img":{"alt_text":"image","src":"https:\/\/i0.wp.com\/www.wiredprairie.us\/blog\/wp-content\/uploads\/2010\/03\/image_thumb.png?resize=350%2C200","width":350,"height":200},"classes":[]}],"_links":{"self":[{"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/posts\/1037"}],"collection":[{"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/users\/2"}],"replies":[{"embeddable":true,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/comments?post=1037"}],"version-history":[{"count":0,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/posts\/1037\/revisions"}],"wp:attachment":[{"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/media?parent=1037"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/categories?post=1037"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/www.wiredprairie.us\/blog\/index.php\/wp-json\/wp\/v2\/tags?post=1037"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}